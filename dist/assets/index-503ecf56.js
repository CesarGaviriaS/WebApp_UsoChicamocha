var ra=Object.defineProperty;var ia=(e,t,n)=>t in e?ra(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var qt=(e,t,n)=>(ia(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();typeof globalThis>"u"&&(global=globalThis);typeof process>"u"&&(globalThis.process={env:{},nextTick:e=>setTimeout(e,0),version:"",browser:!0});typeof Buffer>"u"&&(globalThis.Buffer={from:e=>({data:e}),alloc:e=>new Array(e),isBuffer:()=>!1});console.log("✅ Polyfills cargados para compatibilidad Node.js");function ce(){}function Ts(e){return e()}function er(){return Object.create(null)}function Ie(e){e.forEach(Ts)}function bo(e){return typeof e=="function"}function We(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Yn;function Xr(e,t){return e===t?!0:(Yn||(Yn=document.createElement("a")),Yn.href=t,e===Yn.href)}function sa(e){return Object.keys(e).length===0}function wo(e,...t){if(e==null){for(const o of t)o(void 0);return ce}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function st(e){let t;return wo(e,n=>t=n)(),t}function bt(e,t,n){e.$$.on_destroy.push(wo(t,n))}function bn(e){return e??""}let Co=!1;function la(){Co=!0}function aa(){Co=!1}function ca(e,t,n,o){for(;e<t;){const r=e+(t-e>>1);n(r)<=o?e=r+1:t=r}return e}function ua(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if(e.nodeName==="HEAD"){const l=[];for(let u=0;u<t.length;u++){const f=t[u];f.claim_order!==void 0&&l.push(f)}t=l}const n=new Int32Array(t.length+1),o=new Int32Array(t.length);n[0]=-1;let r=0;for(let l=0;l<t.length;l++){const u=t[l].claim_order,f=(r>0&&t[n[r]].claim_order<=u?r+1:ca(1,r,g=>t[n[g]].claim_order,u))-1;o[l]=n[f]+1;const h=f+1;n[h]=l,r=Math.max(h,r)}const i=[],s=[];let a=t.length-1;for(let l=n[r]+1;l!=0;l=o[l-1]){for(i.push(t[l-1]);a>=l;a--)s.push(t[a]);a--}for(;a>=0;a--)s.push(t[a]);i.reverse(),s.sort((l,u)=>l.claim_order-u.claim_order);for(let l=0,u=0;l<s.length;l++){for(;u<i.length&&s[l].claim_order>=i[u].claim_order;)u++;const f=u<i.length?i[u]:null;e.insertBefore(s[l],f)}}function c(e,t){e.appendChild(t)}function da(e,t){if(Co){for(ua(e),(e.actual_end_child===void 0||e.actual_end_child!==null&&e.actual_end_child.parentNode!==e)&&(e.actual_end_child=e.firstChild);e.actual_end_child!==null&&e.actual_end_child.claim_order===void 0;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?(t.claim_order!==void 0||t.parentNode!==e)&&e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else(t.parentNode!==e||t.nextSibling!==null)&&e.appendChild(t)}function D(e,t,n){e.insertBefore(t,n||null)}function fa(e,t,n){Co&&!n?da(e,t):(t.parentNode!==e||t.nextSibling!=n)&&e.insertBefore(t,n||null)}function M(e){e.parentNode&&e.parentNode.removeChild(e)}function Mn(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function dt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function z(e){return document.createTextNode(e)}function w(){return z(" ")}function lt(){return z("")}function I(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function As(e){return function(t){return t.preventDefault(),e.call(this,t)}}function pt(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function _n(e){return e===""?null:+e}function ha(e){return Array.from(e.childNodes)}function pa(e){e.claim_info===void 0&&(e.claim_info={last_index:0,total_claimed:0})}function ga(e,t,n,o,r=!1){pa(e);const i=(()=>{for(let s=e.claim_info.last_index;s<e.length;s++){const a=e[s];if(t(a)){const l=n(a);return l===void 0?e.splice(s,1):e[s]=l,r||(e.claim_info.last_index=s),a}}for(let s=e.claim_info.last_index-1;s>=0;s--){const a=e[s];if(t(a)){const l=n(a);return l===void 0?e.splice(s,1):e[s]=l,r?l===void 0&&e.claim_info.last_index--:e.claim_info.last_index=s,a}}return o()})();return i.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,i}function ma(e,t){return ga(e,n=>n.nodeType===3,n=>{const o=""+t;if(n.data.startsWith(o)){if(n.data.length!==o.length)return n.splitText(o.length)}else n.data=o},()=>z(t),!0)}function ve(e,t){t=""+t,e.data!==t&&(e.data=t)}function Q(e,t){e.value=t??""}function tr(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function Nt(e,t,n){for(let o=0;o<e.options.length;o+=1){const r=e.options[o];if(r.__value===t){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function ho(e){const t=e.querySelector(":checked");return t&&t.__value}function Fe(e,t,n){e.classList.toggle(t,!!n)}function _a(e,t,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:o})}class va{constructor(t=!1){qt(this,"is_svg",!1);qt(this,"e");qt(this,"n");qt(this,"t");qt(this,"a");this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,o=null){this.e||(this.is_svg?this.e=dt(n.nodeName):this.e=m(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(t)),this.i(o)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)D(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(M)}}function po(e,t){return new e(t)}let wn;function nn(e){wn=e}function yr(){if(!wn)throw new Error("Function called outside component initialization");return wn}function Os(e){yr().$$.on_mount.push(e)}function Er(e){yr().$$.on_destroy.push(e)}function sn(){const e=yr();return(t,n,{cancelable:o=!1}={})=>{const r=e.$$.callbacks[t];if(r){const i=_a(t,n,{cancelable:o});return r.slice().forEach(s=>{s.call(e,i)}),!i.defaultPrevented}return!0}}function wt(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(o=>o.call(this,t))}const mn=[],Jr=[];let vn=[];const Zr=[],ba=Promise.resolve();let nr=!1;function wa(){nr||(nr=!0,ba.then(Is))}function rn(e){vn.push(e)}const Do=new Set;let hn=0;function Is(){if(hn!==0)return;const e=wn;do{try{for(;hn<mn.length;){const t=mn[hn];hn++,nn(t),Ca(t.$$)}}catch(t){throw mn.length=0,hn=0,t}for(nn(null),mn.length=0,hn=0;Jr.length;)Jr.pop()();for(let t=0;t<vn.length;t+=1){const n=vn[t];Do.has(n)||(Do.add(n),n())}vn.length=0}while(mn.length);for(;Zr.length;)Zr.pop()();nr=!1,Do.clear(),nn(e)}function Ca(e){if(e.fragment!==null){e.update(),Ie(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(rn)}}function Sa(e){const t=[],n=[];vn.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),vn=t}const uo=new Set;let tn;function Ne(){tn={r:0,c:[],p:tn}}function Pe(){tn.r||Ie(tn.c),tn=tn.p}function B(e,t){e&&e.i&&(uo.delete(e),e.i(t))}function J(e,t,n,o){if(e&&e.o){if(uo.has(e))return;uo.add(e),tn.c.push(()=>{uo.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function ut(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ms(e,t){e.d(1),t.delete(e.key)}function Ds(e,t,n,o,r,i,s,a,l,u,f,h){let g=e.length,p=i.length,_=g;const v={};for(;_--;)v[e[_].key]=_;const b=[],S=new Map,C=new Map,y=[];for(_=p;_--;){const O=h(r,i,_),H=n(O);let $=s.get(H);$?o&&y.push(()=>$.p(O,t)):($=u(H,O),$.c()),S.set(H,b[_]=$),H in v&&C.set(H,Math.abs(_-v[H]))}const R=new Set,T=new Set;function L(O){B(O,1),O.m(a,f),s.set(O.key,O),f=O.first,p--}for(;g&&p;){const O=b[p-1],H=e[g-1],$=O.key,X=H.key;O===H?(f=O.first,g--,p--):S.has(X)?!s.has($)||R.has($)?L(O):T.has(X)?g--:C.get($)>C.get(X)?(T.add($),L(O)):(R.add(X),g--):(l(H,s),g--)}for(;g--;){const O=e[g];S.has(O.key)||l(O,s)}for(;p;)L(b[p-1]);return Ie(y),b}const ya=/[&"<]/g,Ea=/[&<]/g;function ka(e,t=!1){const n=String(e),o=t?ya:Ea;o.lastIndex=0;let r="",i=0;for(;o.test(n);){const s=o.lastIndex-1,a=n[s];r+=n.substring(i,s)+(a==="&"?"&amp;":a==='"'?"&quot;":"&lt;"),i=s+1}return r+n.substring(i)}function Ra(e,t){if(!e||!e.$$render)throw t==="svelte:component"&&(t+=" this={...}"),new Error(`<${t}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules. Otherwise you may need to fix a <${t}>.`);return e}let No;function Ns(e){function t(n,o,r,i,s){const a=wn,l={on_destroy:No,context:new Map(s||(a?a.$$.context:[])),on_mount:[],before_update:[],after_update:[],callbacks:er()};nn({$$:l});const u=e(n,o,r,i);return nn(a),u}return{render:(n={},{$$slots:o={},context:r=new Map}={})=>{No=[];const i={title:"",head:"",css:new Set},s=t(i,n,{},o,r);return Ie(No),{html:s,css:{code:Array.from(i.css).map(a=>a.code).join(`
`),map:null},head:i.title+i.head}},$$render:t}}function Te(e){e&&e.c()}function Ta(e,t){e&&e.l(t)}function Ee(e,t,n){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),rn(()=>{const i=e.$$.on_mount.map(Ts).filter(bo);e.$$.on_destroy?e.$$.on_destroy.push(...i):Ie(i),e.$$.on_mount=[]}),r.forEach(rn)}function ke(e,t){const n=e.$$;n.fragment!==null&&(Sa(n.after_update),Ie(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Aa(e,t){e.$$.dirty[0]===-1&&(mn.push(e),wa(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Xe(e,t,n,o,r,i,s=null,a=[-1]){const l=wn;nn(e);const u=e.$$={fragment:null,ctx:[],props:i,update:ce,not_equal:r,bound:er(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:er(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};s&&s(u.root);let f=!1;if(u.ctx=n?n(e,t.props||{},(h,g,...p)=>{const _=p.length?p[0]:g;return u.ctx&&r(u.ctx[h],u.ctx[h]=_)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](_),f&&Aa(e,h)),g}):[],u.update(),f=!0,Ie(u.before_update),u.fragment=o?o(u.ctx):!1,t.target){if(t.hydrate){la();const h=ha(t.target);u.fragment&&u.fragment.l(h),h.forEach(M)}else u.fragment&&u.fragment.c();t.intro&&B(e.$$.fragment),Ee(e,t.target,t.anchor),aa(),Is()}nn(l)}class xe{constructor(){qt(this,"$$");qt(this,"$$set")}$destroy(){ke(this,1),this.$destroy=ce}$on(t,n){if(!bo(n))return ce;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!sa(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Oa="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Oa);const pn=[];function or(e,t){return{subscribe:Pt(e,t).subscribe}}function Pt(e,t=ce){let n;const o=new Set;function r(a){if(We(e,a)&&(e=a,n)){const l=!pn.length;for(const u of o)u[1](),pn.push(u,e);if(l){for(let u=0;u<pn.length;u+=2)pn[u][0](pn[u+1]);pn.length=0}}}function i(a){r(a(e))}function s(a,l=ce){const u=[a,l];return o.add(u),o.size===1&&(n=t(r,i)||ce),a(e),()=>{o.delete(u),o.size===0&&n&&(n(),n=null)}}return{set:r,update:i,subscribe:s}}function Ia(e,t,n){const o=!Array.isArray(e),r=o?[e]:e;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return or(n,(s,a)=>{let l=!1;const u=[];let f=0,h=ce;const g=()=>{if(f)return;h();const _=t(o?u[0]:u,s,a);i?s(_):h=bo(_)?_:ce},p=r.map((_,v)=>wo(_,b=>{u[v]=b,f&=~(1<<v),l&&g()},()=>{f|=1<<v}));return l=!0,g(),function(){Ie(p),h(),l=!1}})}function Ma(e){let t,n,o,r,i,s,a,l,u,f,h,g,p,_;return{c(){t=m("nav"),n=m("button"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="svelte-1uj7rv5"><path d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"></path></svg> <span class="nav-text svelte-1uj7rv5">Dashboard</span>',o=w(),r=m("button"),r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="svelte-1uj7rv5"><path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"></path></svg> <span class="nav-text svelte-1uj7rv5">Usuarios</span>',i=w(),s=m("button"),s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="svelte-1uj7rv5"><path d="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M12,2L9.5,4.5L6.4,4L5.5,1L2,3.5L3,6.5L1,7.5L2.5,11L4.5,9.5L5,12.5L1.5,15L4,17.5L6.5,16.5L7.5,19L11,20.5L9.5,22.5L12.5,23L15,20.5L17.6,21L18.5,24L22,21.5L21,18.5L23,17.5L21.5,14L19.5,15.5L19,12.5L22.5,10L20,7.5L17.5,8.5L16.5,6L13,4.5L14.5,2.5L11.5,2H12Z"></path></svg> <span class="nav-text svelte-1uj7rv5">Máquinas</span>',a=w(),l=m("button"),l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="svelte-1uj7rv5"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m0 14h-5v-2h5v2m3-4h-8v-2h8v2m0-4h-8V7h8v2z"></path></svg> <span class="nav-text svelte-1uj7rv5">Órdenes</span>',u=w(),f=m("button"),f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="svelte-1uj7rv5"><path d="M6 2H14L20 8V20C20 21.1 19.1 22 18 22H6C4.9 22 4 21.1 4 20V4C4 2.9 4.9 2 6 2Z" fill="none" stroke="currentColor" stroke-width="2"></path><path d="M18 2C18 2 15 6 15 9A3 3 0 0 0 21 9C21 6 18 2 18 2Z" fill="currentColor"></path><path d="M8 11L12 9L16 11V15L12 17L8 15Z" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"></path><circle cx="12" cy="13" r="1.5" fill="none" stroke="currentColor" stroke-width="1.4"></circle></svg> <span class="nav-text svelte-1uj7rv5">Consolidado</span>',h=w(),g=m("button"),g.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="svelte-1uj7rv5"><path d="M12 2C12 2 7 9 7 13A5 5 0 0 0 17 13C17 9 12 2 12 2Z" fill="currentColor"></path></svg> <span class="nav-text svelte-1uj7rv5">Aceites</span>',d(n,"class","nav-item svelte-1uj7rv5"),d(n,"data-view","dashboard"),d(n,"title","Dashboard"),Fe(n,"active",e[0]==="dashboard"),d(r,"class","nav-item svelte-1uj7rv5"),d(r,"data-view","users"),d(r,"title","Gestionar Usuarios"),Fe(r,"active",e[0]==="users"),d(s,"class","nav-item svelte-1uj7rv5"),d(s,"data-view","machines"),d(s,"title","Gestionar Máquinas"),Fe(s,"active",e[0]==="machines"),d(l,"class","nav-item svelte-1uj7rv5"),d(l,"data-view","work-orders"),d(l,"title","Órdenes de Trabajo"),Fe(l,"active",e[0]==="work-orders"),d(f,"class","nav-item svelte-1uj7rv5"),d(f,"data-view","consolidado"),d(f,"title","Consolidado"),Fe(f,"active",e[0]==="consolidado"),d(g,"class","nav-item svelte-1uj7rv5"),d(g,"title","Gestión de Aceites"),Fe(g,"active",e[0]==="oilManagement"),d(t,"class","sidebar svelte-1uj7rv5")},m(v,b){D(v,t,b),c(t,n),c(t,o),c(t,r),c(t,i),c(t,s),c(t,a),c(t,l),c(t,u),c(t,f),c(t,h),c(t,g),p||(_=[I(n,"click",e[2]),I(r,"click",e[3]),I(s,"click",e[4]),I(l,"click",e[5]),I(f,"click",e[6]),I(g,"click",e[7])],p=!0)},p(v,[b]){b&1&&Fe(n,"active",v[0]==="dashboard"),b&1&&Fe(r,"active",v[0]==="users"),b&1&&Fe(s,"active",v[0]==="machines"),b&1&&Fe(l,"active",v[0]==="work-orders"),b&1&&Fe(f,"active",v[0]==="consolidado"),b&1&&Fe(g,"active",v[0]==="oilManagement")},i:ce,o:ce,d(v){v&&M(t),p=!1,Ie(_)}}}function Da(e,t,n){let{activeView:o="dashboard"}=t;const r=sn();function i(g){r("navigate",g)}const s=()=>i("dashboard"),a=()=>i("users"),l=()=>i("machines"),u=()=>i("work-orders"),f=()=>i("consolidado"),h=()=>i("oilManagement");return e.$$set=g=>{"activeView"in g&&n(0,o=g.activeView)},[o,i,s,a,l,u,f,h]}class Na extends xe{constructor(t){super(),Xe(this,t,Da,Ma,We,{activeView:0})}}function Qr(e){let t,n,o,r,i,s,a,l,u,f,h,g,p,_,v,b,S,C,y,R,T,L,O,H,$,X,te,Z=e[4].asignadoA+"",Y,le,ue,pe,U,N,ne,re;return{c(){t=m("div"),n=m("div"),o=m("h3"),o.textContent="Confirmar Creación",r=w(),i=m("p"),i.textContent="¿Está seguro que desea crear esta orden de trabajo?",s=w(),a=m("div"),l=m("p"),u=m("strong"),u.textContent="Máquina:",f=w(),h=z(e[2]),g=w(),p=m("p"),_=m("strong"),_.textContent="Componente:",v=w(),b=z(e[1]),S=w(),C=m("p"),y=m("strong"),y.textContent="Estado:",R=w(),T=m("span"),L=z(e[3]),H=w(),$=m("p"),X=m("strong"),X.textContent="Asignado a:",te=w(),Y=z(Z),le=w(),ue=m("div"),pe=m("button"),pe.textContent="Cancelar",U=w(),N=m("button"),N.textContent="Aceptar",d(o,"class","svelte-svdcca"),d(l,"class","svelte-svdcca"),d(p,"class","svelte-svdcca"),d(T,"class",O="status-badge "+go(e[3])+" svelte-svdcca"),d(C,"class","svelte-svdcca"),d($,"class","svelte-svdcca"),d(a,"class","confirmation-details svelte-svdcca"),d(pe,"class","btn-cancel svelte-svdcca"),d(N,"class","btn-confirm svelte-svdcca"),d(ue,"class","confirmation-buttons svelte-svdcca"),d(n,"class","confirmation-modal svelte-svdcca"),d(t,"class","confirmation-overlay svelte-svdcca")},m(x,K){D(x,t,K),c(t,n),c(n,o),c(n,r),c(n,i),c(n,s),c(n,a),c(a,l),c(l,u),c(l,f),c(l,h),c(a,g),c(a,p),c(p,_),c(p,v),c(p,b),c(a,S),c(a,C),c(C,y),c(C,R),c(C,T),c(T,L),c(a,H),c(a,$),c($,X),c($,te),c($,Y),c(n,le),c(n,ue),c(ue,pe),c(ue,U),c(ue,N),ne||(re=[I(pe,"click",e[8]),I(N,"click",e[7]),I(n,"click",pt(e[12])),I(t,"click",e[8])],ne=!0)},p(x,K){K&4&&ve(h,x[2]),K&2&&ve(b,x[1]),K&8&&ve(L,x[3]),K&8&&O!==(O="status-badge "+go(x[3])+" svelte-svdcca")&&d(T,"class",O),K&16&&Z!==(Z=x[4].asignadoA+"")&&ve(Y,Z)},d(x){x&&M(t),ne=!1,Ie(re)}}}function Pa(e){let t,n,o,r,i,s,a,l,u,f,h,g,p,_,v,b,S,C,y,R,T,L,O,H,$,X,te,Z,Y,le,ue,pe,U,N,ne,re,x,K,W,A,G,ae,Se,Ae,ye,be,he,fe,ie,Re,we,E,k,F,V=e[5]&&Qr(e);return{c(){t=m("div"),n=m("div"),o=m("div"),r=m("h2"),r.textContent="Crear Orden de Trabajo",i=w(),s=m("button"),s.textContent="×",a=w(),l=m("div"),u=m("div"),f=m("div"),f.textContent="Panel Informativo",h=w(),g=m("div"),p=m("p"),_=m("strong"),_.textContent="Máquina:",v=w(),b=z(e[2]),S=w(),C=m("p"),y=m("strong"),y.textContent="Área afectada:",R=w(),T=z(e[1]),L=w(),O=m("p"),H=m("strong"),H.textContent="Estado del área afectada:",$=w(),X=m("span"),te=z(e[3]),Y=w(),le=m("p"),ue=m("strong"),ue.textContent="Asignado por:",pe=w(),U=z(e[0]),N=w(),ne=m("form"),re=m("div"),x=m("label"),x.textContent="Detalles de la Orden de Trabajo:",K=w(),W=m("textarea"),A=w(),G=m("div"),ae=m("div"),Se=m("label"),Se.textContent="Asignar Tarea A:",Ae=w(),ye=m("input"),be=w(),he=m("div"),fe=m("button"),fe.textContent="Cancelar",ie=w(),Re=m("button"),Re.textContent="Crear Orden de Trabajo",we=w(),V&&V.c(),E=lt(),d(r,"class","svelte-svdcca"),d(s,"class","close-btn svelte-svdcca"),d(o,"class","modal-header svelte-svdcca"),d(f,"class","info-panel-header svelte-svdcca"),d(p,"class","svelte-svdcca"),d(C,"class","svelte-svdcca"),d(X,"class",Z="status-badge "+go(e[3])+" svelte-svdcca"),d(O,"class","svelte-svdcca"),d(le,"class","svelte-svdcca"),d(g,"class","info-panel-body svelte-svdcca"),d(u,"class","info-panel svelte-svdcca"),d(x,"for","detalles"),d(x,"class","svelte-svdcca"),d(W,"id","detalles"),d(W,"rows","6"),d(W,"placeholder","Describa en detalle el trabajo a realizar, los procedimientos y las precauciones necesarias..."),d(W,"class","svelte-svdcca"),d(re,"class","form-group full-width svelte-svdcca"),d(Se,"for","asignadoA"),d(Se,"class","svelte-svdcca"),d(ye,"type","text"),d(ye,"id","asignadoA"),d(ye,"placeholder","Nombre del técnico o equipo"),ye.required=!0,d(ye,"class","svelte-svdcca"),d(ae,"class","form-group svelte-svdcca"),d(G,"class","form-row svelte-svdcca"),d(ne,"class","work-order-form svelte-svdcca"),d(l,"class","modal-body svelte-svdcca"),d(fe,"class","btn-cancel svelte-svdcca"),d(Re,"class","btn-create svelte-svdcca"),d(he,"class","modal-footer svelte-svdcca"),d(n,"class","modal-content svelte-svdcca"),d(t,"class","modal-overlay svelte-svdcca")},m(j,q){D(j,t,q),c(t,n),c(n,o),c(o,r),c(o,i),c(o,s),c(n,a),c(n,l),c(l,u),c(u,f),c(u,h),c(u,g),c(g,p),c(p,_),c(p,v),c(p,b),c(g,S),c(g,C),c(C,y),c(C,R),c(C,T),c(g,L),c(g,O),c(O,H),c(O,$),c(O,X),c(X,te),c(g,Y),c(g,le),c(le,ue),c(le,pe),c(le,U),c(l,N),c(l,ne),c(ne,re),c(re,x),c(re,K),c(re,W),Q(W,e[4].detalles),c(ne,A),c(ne,G),c(G,ae),c(ae,Se),c(ae,Ae),c(ae,ye),Q(ye,e[4].asignadoA),c(n,be),c(n,he),c(he,fe),c(he,ie),c(he,Re),D(j,we,q),V&&V.m(j,q),D(j,E,q),k||(F=[I(s,"click",e[9]),I(W,"input",e[14]),I(ye,"input",e[15]),I(ne,"submit",e[6]),I(fe,"click",e[9]),I(Re,"click",e[6]),I(n,"click",pt(e[13])),I(t,"keydown",e[16])],k=!0)},p(j,[q]){q&4&&ve(b,j[2]),q&2&&ve(T,j[1]),q&8&&ve(te,j[3]),q&8&&Z!==(Z="status-badge "+go(j[3])+" svelte-svdcca")&&d(X,"class",Z),q&1&&ve(U,j[0]),q&16&&Q(W,j[4].detalles),q&16&&ye.value!==j[4].asignadoA&&Q(ye,j[4].asignadoA),j[5]?V?V.p(j,q):(V=Qr(j),V.c(),V.m(E.parentNode,E)):V&&(V.d(1),V=null)},i:ce,o:ce,d(j){j&&(M(t),M(we),M(E)),V&&V.d(j),k=!1,Ie(F)}}}function $a(e){if(!e||typeof e!="string")return"N/A";const t=new Date(e);t.setUTCHours(12);const n=new Date;n.setHours(0,0,0,0);const o=new Date;return o.setMonth(o.getMonth()+2),t<n?"Malo":t<=o?"Regular":"Óptimo"}function go(e){switch(e){case"Óptimo":return"status-optimo";case"Regular":return"status-regular";case"Malo":return"status-malo";default:return"status-unknown"}}function La(e,t,n){let{rowData:o=null}=t,{columnDef:r=null}=t,{currentUser:i=""}=t;const s=sn();let a="",l="",u,f={asignadoA:"",detalles:""},h=!1;function g(T){T.preventDefault(),n(5,h=!0)}function p(){const L=[o.isUnexpected?"Imprevisto":"Inspección",a,u,f.detalles,f.asignadoA].join("|");s("createWorkOrder",{inspectionId:o.id,description:L}),n(5,h=!1)}function _(){n(5,h=!1)}function v(){s("cancel")}function b(T){wt.call(this,e,T)}function S(T){wt.call(this,e,T)}function C(){f.detalles=this.value,n(4,f)}function y(){f.asignadoA=this.value,n(4,f)}const R=T=>T.key==="Escape"&&v();return e.$$set=T=>{"rowData"in T&&n(10,o=T.rowData),"columnDef"in T&&n(11,r=T.columnDef),"currentUser"in T&&n(0,i=T.currentUser)},e.$$.update=()=>{if(e.$$.dirty&2048&&(r&&r.header?n(1,a=String(r.header).replace(/<br>/g," ")):n(1,a="N/A")),e.$$.dirty&1024&&(o&&o.machine?n(2,l=`${o.machine.name||""} ${o.machine.brand||""} ${o.machine.numInterIdentification||""}`.trim()):n(2,l="No especificada")),e.$$.dirty&3072)if(!o||!r)n(3,u="Desconocido");else{const T=r.accessorKey;T==="expirationDateFireExtinguisher"?n(3,u=$a(o.expirationDateFireExtinguisher)):n(3,u=o[T]??"Desconocido")}},[i,a,l,u,f,h,g,p,_,v,o,r,b,S,C,y,R]}class Fa extends xe{constructor(t){super(),Xe(this,t,La,Pa,We,{rowData:10,columnDef:11,currentUser:0})}}class An extends Error{}An.prototype.name="InvalidTokenError";function Ua(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let o=n.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function Ha(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Ua(t)}catch{return atob(t)}}function Po(e,t){if(typeof e!="string")throw new An("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,o=e.split(".")[n];if(typeof o!="string")throw new An(`Invalid token specified: missing part #${n+1}`);let r;try{r=Ha(o)}catch(i){throw new An(`Invalid token specified: invalid base64 for part #${n+1} (${i.message})`)}try{return JSON.parse(r)}catch(i){throw new An(`Invalid token specified: invalid json for part #${n+1} (${i.message})`)}}const Yr="http://localhost:8080";function ei(e,t,n){const o=(n.role||"").replace(/[\[\]']+/g,"").replace("ROLE_","");return localStorage.setItem("accessToken",e),t&&localStorage.setItem("refreshToken",t),localStorage.setItem("userName",n.sub),localStorage.setItem("userRole",o),{name:n.sub,role:o}}function $o(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userName"),localStorage.removeItem("userRole")}function Va(){const{subscribe:e,set:t,update:n}=Pt({isAuthenticated:!1,currentUser:null,isRefreshing:!1});async function o(){console.log("Intentando renovar el token de acceso...");const r=localStorage.getItem("refreshToken");if(!r)return n(i=>({...i,isRefreshing:!1})),!1;try{const i=await fetch(`${Yr}/api/v1/auth/token/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:r})});if(!i.ok){const f=await i.text();throw new Error(`Failed to refresh token, status: ${i.status}, body: ${f}`)}const s=await i.json();if(!s.accessToken)throw new Error('Invalid refresh response: "accessToken" field missing.');const a=s.accessToken,l=Po(a),u=ei(a,r,l);return t({isAuthenticated:!0,currentUser:u,isRefreshing:!1}),!0}catch(i){return console.error("Refresh token failed:",i),$o(),t({isAuthenticated:!1,currentUser:null,isRefreshing:!1}),!1}}return{subscribe:e,login:async(r,i)=>{try{const s=await fetch(`${Yr}/api/v1/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:i})});if(!s.ok)throw console.error("Authentication error, Status:",s.status),new Error("Incorrect username or password.");const a=await s.json();if(!a.status||!a.jwt||!a.refreshToken)throw new Error(a.message||"Login failed.");const l=a.jwt,u=a.refreshToken,f=Po(l),h=(f.role||"").replace(/[\[\]']+/g,"").replace("ROLE_","");if(!["ADMIN","MECANIC"].includes(h))return{success:!1,error:"Acceso denegado"};const p=ei(l,u,f);return t({isAuthenticated:!0,currentUser:p,isRefreshing:!1}),{success:!0,error:null}}catch(s){return{success:!1,error:s.message}}},logout:()=>{$o(),t({isAuthenticated:!1,currentUser:null,isRefreshing:!1})},checkAuth:async()=>{const r=localStorage.getItem("accessToken");if(console.log("checkAuth: token present:",!!r),!r)return t({isAuthenticated:!1,currentUser:null,isRefreshing:!1}),!1;if(r==="mock-token")return console.log("checkAuth: using mock token for testing"),t({isAuthenticated:!0,currentUser:{name:"Test User",role:"ADMIN"},isRefreshing:!1}),!0;try{const i=Po(r),s=i.exp*1e3<Date.now();if(console.log("checkAuth: token expired:",s),s)return n(l=>({...l,isRefreshing:!0})),console.log("Token de acceso expirado, intentando renovar..."),await o();const a=localStorage.getItem("userRole");return t({isAuthenticated:!0,currentUser:{name:i.sub,role:a},isRefreshing:!1}),!0}catch(i){return console.log("checkAuth: error decoding token:",i),console.log("checkAuth: token value:",r),$o(),t({isAuthenticated:!1,currentUser:null,isRefreshing:!1}),!1}},refreshToken:o}}const on=Va();async function Ke(e,t={}){await on.checkAuth();const n=localStorage.getItem("accessToken");if(!n)throw new Error("Sesión no válida. Por favor, inicie sesión de nuevo.");const o={Authorization:`Bearer ${n}`,"Content-Type":"application/json"},r="http://localhost:8080",i=t.version===void 0?"v1":t.version,s=i?`/api/${i}/${e}`:`/api/${e}`,a=await fetch(`${r}${s}`,{...t,headers:{...o,...t.headers}});if(a.status===403)throw new Error("No tiene permisos para realizar esta acción.");const l=await a.text();if(!a.ok)try{const u=JSON.parse(l);throw{status:a.status,message:u.message||l}}catch{throw{status:a.status,message:l||`Error ${a.status}: ${a.statusText}`}}if(a.status===204||!l)return null;try{return JSON.parse(l)}catch{throw new Error("La respuesta del servidor no es un JSON válido.")}}const ja="http://localhost:8080";function Ba(){const{subscribe:e,update:t}=Pt({dashboard:{data:[],totalPages:0,totalElements:0,currentPage:0,pageSize:20},users:[],machines:[],oils:[],workOrders:{data:[],totalPages:0,totalElements:0,currentPage:0,pageSize:20},consolidated:{distrito:[],asociacion:[]},isLoading:!1,error:null}),n=a=>t(l=>({...l,isLoading:a})),o=a=>t(l=>({...l,error:a,isLoading:!1}));async function r(a,l){n(!0);try{const u=await Ke(l),f=(u==null?void 0:u.content)??(u==null?void 0:u.users)??u;return t(h=>({...h,[a]:f,isLoading:!1,error:null})),f}catch(u){throw o(u.message),u}}async function i(a,l,u,f){n(!0);try{const h=await Ke(`${l}?page=${u}&size=${f}`),g={data:h.content,totalPages:h.totalPages,totalElements:h.totalElements,currentPage:h.number,pageSize:h.size};return t(p=>({...p,[a]:g,isLoading:!1,error:null})),g}catch(h){throw o(h.message),h}}const s={fetchDashboardData:(a=0,l=20)=>i("dashboard","inspection",a,l),fetchInspectionImages:async a=>{try{const l=await Ke(`inspection/${a}/images`);return!l||!Array.isArray(l)?[]:l.map(f=>({...f,url:`${ja.replace(/\/$/,"")}/${f.url.replace(/^\//,"")}`}))}catch(l){throw console.error("Error fetching or processing inspection images:",l),l}},fetchUsers:()=>r("users","user"),createUser:async a=>{const l=await Ke("user",{method:"POST",body:JSON.stringify(a)});t(u=>({...u,users:[...u.users,l]}))},updateUser:async(a,l)=>{const u=st({subscribe:e}).users.find(g=>g.id===a);if(!u)throw new Error("Usuario no encontrado");const f={id:a,...u,...l},h=await Ke(`user/${a}`,{method:"PUT",body:JSON.stringify(f)});t(g=>({...g,users:g.users.map(p=>p.id===a?h:p)}))},deleteUser:async a=>{await Ke(`user/${a}`,{method:"DELETE"}),t(l=>({...l,users:l.users.filter(u=>u.id!==a)}))},changeUserPassword:async(a,l)=>{await Ke(`user/${a}/change-password`,{method:"PATCH",body:JSON.stringify({id:a,newPassword:l})})},fetchMachines:()=>r("machines","machine"),createMachine:async a=>{const l=await Ke("machine",{method:"POST",body:JSON.stringify(a)});t(u=>({...u,machines:[...u.machines,l]}))},updateMachine:async a=>{const l=await Ke(`machine/${a.id}`,{method:"PUT",body:JSON.stringify(a)});t(u=>({...u,machines:u.machines.map(f=>f.id===a.id?l:f)}))},deleteMachine:async a=>{await Ke(`machine/${a}`,{method:"DELETE"}),t(l=>({...l,machines:l.machines.filter(u=>u.id!==a)}))},fetchMachineCurriculum:async a=>{n(!0);try{const l=await Ke(`curriculum/${a}`);return n(!1),l}catch(l){throw o(l.message),l}},fetchWorkOrders:(a=0,l=20)=>i("workOrders","order/all",a,l),createWorkOrder:async a=>{await Ke("order",{method:"POST",body:JSON.stringify(a)});const l=st({subscribe:e});s.fetchWorkOrders(l.workOrders.currentPage,l.workOrders.pageSize)},executeWorkOrder:async a=>{await Ke("results/execute",{method:"POST",body:JSON.stringify(a)});const l=st({subscribe:e});s.fetchWorkOrders(l.workOrders.currentPage,l.workOrders.pageSize)},fetchConsolidadoData:async()=>{n(!0);try{const a=await Ke("oil-changes/consolidated",{version:null}),l=(a==null?void 0:a.content)??a,u={distrito:l.filter(f=>f.machine.belongsTo.toLowerCase()==="distrito"),asociacion:l.filter(f=>f.machine.belongsTo.toLowerCase()==="asociacion")};return t(f=>({...f,consolidated:u,isLoading:!1,error:null})),u}catch(a){throw o(a.message),a}},fetchOils:()=>r("oils","oil/brand"),createOil:async a=>{const l=await Ke("oil/brand",{method:"POST",body:JSON.stringify(a)});t(u=>({...u,oils:[...u.oils,l]}))},updateOil:async(a,l)=>{const u=await Ke(`oil/brand/${a}`,{method:"PUT",body:JSON.stringify(l)});t(f=>({...f,oils:f.oils.map(h=>h.id===a?u:h)}))},deleteOil:async a=>{await Ke(`oil/brand/${a}`,{method:"DELETE"}),t(l=>({...l,oils:l.oils.filter(u=>u.id!==a)}))}};return{subscribe:e,...s}}const ge=Ba();function ti(e){let t,n;return{c(){t=m("div"),n=z(e[2]),d(t,"class","error-message svelte-1wt4srt")},m(o,r){D(o,t,r),c(t,n)},p(o,r){r&4&&ve(n,o[2])},d(o){o&&M(t)}}}function za(e){let t,n,o,r,i,s,a,l,u,f,h,g,p,_,v,b,S,C,y,R=e[3]?"Ingresando...":"Ingresar",T,L,O,H=e[2]&&ti(e);return{c(){t=m("div"),n=m("div"),o=m("div"),o.innerHTML="<h2>Panel de Control - Acceso</h2>",r=w(),i=m("form"),s=m("div"),s.innerHTML='<img src="https://usochicamocha.com.co/wp-content/uploads/2024/02/Usochicamocha-v2.png" alt="Logo de Usochicamocha" class="logo-image svelte-1wt4srt"/>',a=w(),l=m("div"),u=m("label"),u.textContent="Usuario:",f=w(),h=m("input"),g=w(),p=m("div"),_=m("label"),_.textContent="Contraseña:",v=w(),b=m("input"),S=w(),H&&H.c(),C=w(),y=m("button"),T=z(R),d(o,"class","header svelte-1wt4srt"),d(s,"class","logo-header svelte-1wt4srt"),d(u,"for","username"),d(u,"class","svelte-1wt4srt"),d(h,"type","text"),d(h,"id","username"),h.required=!0,d(h,"class","svelte-1wt4srt"),d(l,"class","form-group svelte-1wt4srt"),d(_,"for","password"),d(_,"class","svelte-1wt4srt"),d(b,"type","password"),d(b,"id","password"),b.required=!0,d(b,"class","svelte-1wt4srt"),d(p,"class","form-group svelte-1wt4srt"),d(y,"type","submit"),d(y,"class","login-btn svelte-1wt4srt"),y.disabled=e[3],d(i,"class","login-form svelte-1wt4srt"),d(n,"class","login-box svelte-1wt4srt"),d(t,"class","login-container svelte-1wt4srt")},m($,X){D($,t,X),c(t,n),c(n,o),c(n,r),c(n,i),c(i,s),c(i,a),c(i,l),c(l,u),c(l,f),c(l,h),Q(h,e[0]),c(i,g),c(i,p),c(p,_),c(p,v),c(p,b),Q(b,e[1]),c(i,S),H&&H.m(i,null),c(i,C),c(i,y),c(y,T),L||(O=[I(h,"input",e[5]),I(b,"input",e[6]),I(i,"submit",e[4])],L=!0)},p($,[X]){X&1&&h.value!==$[0]&&Q(h,$[0]),X&2&&b.value!==$[1]&&Q(b,$[1]),$[2]?H?H.p($,X):(H=ti($),H.c(),H.m(i,C)):H&&(H.d(1),H=null),X&8&&R!==(R=$[3]?"Ingresando...":"Ingresar")&&ve(T,R),X&8&&(y.disabled=$[3])},i:ce,o:ce,d($){$&&M(t),H&&H.d(),L=!1,Ie(O)}}}function qa(e,t,n){let o="",r="",i="",s=!1;async function a(f){f.preventDefault(),n(3,s=!0),n(2,i="");try{const h=await on.login(o,r);h.success?ge.fetchDashboardData():n(2,i=h.error)}catch(h){n(2,i=h.message)}finally{n(3,s=!1)}}function l(){o=this.value,n(0,o)}function u(){r=this.value,n(1,r)}return[o,r,i,s,a,l,u]}class Wa extends xe{constructor(t){super(),Xe(this,t,qa,za,We,{})}}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Kt(e,t){return typeof e=="function"?e(t):e}function ft(e,t){return n=>{t.setState(o=>({...o,[e]:Kt(n,o[e])}))}}function So(e){return e instanceof Function}function xa(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function Ga(e,t){const n=[],o=r=>{r.forEach(i=>{n.push(i);const s=t(i);s!=null&&s.length&&o(s)})};return o(e),n}function me(e,t,n){let o=[],r;return i=>{let s;n.key&&n.debug&&(s=Date.now());const a=e(i);if(!(a.length!==o.length||a.some((f,h)=>o[h]!==f)))return r;o=a;let u;if(n.key&&n.debug&&(u=Date.now()),r=t(...a),n==null||n.onChange==null||n.onChange(r),n.key&&n.debug&&n!=null&&n.debug()){const f=Math.round((Date.now()-s)*100)/100,h=Math.round((Date.now()-u)*100)/100,g=h/16,p=(_,v)=>{for(_=String(_);_.length<v;)_=" "+_;return _};console.info(`%c⏱ ${p(h,5)} /${p(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,n==null?void 0:n.key)}return r}}function _e(e,t,n,o){return{debug:()=>{var r;return(r=e==null?void 0:e.debugAll)!=null?r:e[t]},key:!1,onChange:o}}function Ka(e,t,n,o){const r=()=>{var s;return(s=i.getValue())!=null?s:e.options.renderFallbackValue},i={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(o),renderValue:r,getContext:me(()=>[e,n,t,i],(s,a,l,u)=>({table:s,column:a,row:l,cell:u,getValue:u.getValue,renderValue:u.renderValue}),_e(e.options,"debugCells"))};return e._features.forEach(s=>{s.createCell==null||s.createCell(i,n,t,e)},{}),i}function Xa(e,t,n,o){var r,i;const a={...e._getDefaultColumnDef(),...t},l=a.accessorKey;let u=(r=(i=a.id)!=null?i:l?typeof String.prototype.replaceAll=="function"?l.replaceAll(".","_"):l.replace(/\./g,"_"):void 0)!=null?r:typeof a.header=="string"?a.header:void 0,f;if(a.accessorFn?f=a.accessorFn:l&&(l.includes(".")?f=g=>{let p=g;for(const v of l.split(".")){var _;p=(_=p)==null?void 0:_[v]}return p}:f=g=>g[a.accessorKey]),!u)throw new Error;let h={id:`${String(u)}`,accessorFn:f,parent:o,depth:n,columnDef:a,columns:[],getFlatColumns:me(()=>[!0],()=>{var g;return[h,...(g=h.columns)==null?void 0:g.flatMap(p=>p.getFlatColumns())]},_e(e.options,"debugColumns")),getLeafColumns:me(()=>[e._getOrderColumnsFn()],g=>{var p;if((p=h.columns)!=null&&p.length){let _=h.columns.flatMap(v=>v.getLeafColumns());return g(_)}return[h]},_e(e.options,"debugColumns"))};for(const g of e._features)g.createColumn==null||g.createColumn(h,e);return h}const Ye="debugHeaders";function ni(e,t,n){var o;let i={id:(o=n.id)!=null?o:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const s=[],a=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(a),s.push(l)};return a(i),s},getContext:()=>({table:e,header:i,column:t})};return e._features.forEach(s=>{s.createHeader==null||s.createHeader(i,e)}),i}const Ja={createTable:e=>{e.getHeaderGroups=me(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,o,r)=>{var i,s;const a=(i=o==null?void 0:o.map(h=>n.find(g=>g.id===h)).filter(Boolean))!=null?i:[],l=(s=r==null?void 0:r.map(h=>n.find(g=>g.id===h)).filter(Boolean))!=null?s:[],u=n.filter(h=>!(o!=null&&o.includes(h.id))&&!(r!=null&&r.includes(h.id)));return eo(t,[...a,...u,...l],e)},_e(e.options,Ye)),e.getCenterHeaderGroups=me(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,o,r)=>(n=n.filter(i=>!(o!=null&&o.includes(i.id))&&!(r!=null&&r.includes(i.id))),eo(t,n,e,"center")),_e(e.options,Ye)),e.getLeftHeaderGroups=me(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,o)=>{var r;const i=(r=o==null?void 0:o.map(s=>n.find(a=>a.id===s)).filter(Boolean))!=null?r:[];return eo(t,i,e,"left")},_e(e.options,Ye)),e.getRightHeaderGroups=me(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,o)=>{var r;const i=(r=o==null?void 0:o.map(s=>n.find(a=>a.id===s)).filter(Boolean))!=null?r:[];return eo(t,i,e,"right")},_e(e.options,Ye)),e.getFooterGroups=me(()=>[e.getHeaderGroups()],t=>[...t].reverse(),_e(e.options,Ye)),e.getLeftFooterGroups=me(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),_e(e.options,Ye)),e.getCenterFooterGroups=me(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),_e(e.options,Ye)),e.getRightFooterGroups=me(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),_e(e.options,Ye)),e.getFlatHeaders=me(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),_e(e.options,Ye)),e.getLeftFlatHeaders=me(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),_e(e.options,Ye)),e.getCenterFlatHeaders=me(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),_e(e.options,Ye)),e.getRightFlatHeaders=me(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),_e(e.options,Ye)),e.getCenterLeafHeaders=me(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var o;return!((o=n.subHeaders)!=null&&o.length)}),_e(e.options,Ye)),e.getLeftLeafHeaders=me(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var o;return!((o=n.subHeaders)!=null&&o.length)}),_e(e.options,Ye)),e.getRightLeafHeaders=me(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var o;return!((o=n.subHeaders)!=null&&o.length)}),_e(e.options,Ye)),e.getLeafHeaders=me(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,o)=>{var r,i,s,a,l,u;return[...(r=(i=t[0])==null?void 0:i.headers)!=null?r:[],...(s=(a=n[0])==null?void 0:a.headers)!=null?s:[],...(l=(u=o[0])==null?void 0:u.headers)!=null?l:[]].map(f=>f.getLeafHeaders()).flat()},_e(e.options,Ye))}};function eo(e,t,n,o){var r,i;let s=0;const a=function(g,p){p===void 0&&(p=1),s=Math.max(s,p),g.filter(_=>_.getIsVisible()).forEach(_=>{var v;(v=_.columns)!=null&&v.length&&a(_.columns,p+1)},0)};a(e);let l=[];const u=(g,p)=>{const _={depth:p,id:[o,`${p}`].filter(Boolean).join("_"),headers:[]},v=[];g.forEach(b=>{const S=[...v].reverse()[0],C=b.column.depth===_.depth;let y,R=!1;if(C&&b.column.parent?y=b.column.parent:(y=b.column,R=!0),S&&(S==null?void 0:S.column)===y)S.subHeaders.push(b);else{const T=ni(n,y,{id:[o,p,y.id,b==null?void 0:b.id].filter(Boolean).join("_"),isPlaceholder:R,placeholderId:R?`${v.filter(L=>L.column===y).length}`:void 0,depth:p,index:v.length});T.subHeaders.push(b),v.push(T)}_.headers.push(b),b.headerGroup=_}),l.push(_),p>0&&u(v,p-1)},f=t.map((g,p)=>ni(n,g,{depth:s,index:p}));u(f,s-1),l.reverse();const h=g=>g.filter(_=>_.column.getIsVisible()).map(_=>{let v=0,b=0,S=[0];_.subHeaders&&_.subHeaders.length?(S=[],h(_.subHeaders).forEach(y=>{let{colSpan:R,rowSpan:T}=y;v+=R,S.push(T)})):v=1;const C=Math.min(...S);return b=b+C,_.colSpan=v,_.rowSpan=b,{colSpan:v,rowSpan:b}});return h((r=(i=l[0])==null?void 0:i.headers)!=null?r:[]),l}const kr=(e,t,n,o,r,i,s)=>{let a={id:t,index:o,original:n,depth:r,parentId:s,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(a._valuesCache.hasOwnProperty(l))return a._valuesCache[l];const u=e.getColumn(l);if(u!=null&&u.accessorFn)return a._valuesCache[l]=u.accessorFn(a.original,o),a._valuesCache[l]},getUniqueValues:l=>{if(a._uniqueValuesCache.hasOwnProperty(l))return a._uniqueValuesCache[l];const u=e.getColumn(l);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(a._uniqueValuesCache[l]=u.columnDef.getUniqueValues(a.original,o),a._uniqueValuesCache[l]):(a._uniqueValuesCache[l]=[a.getValue(l)],a._uniqueValuesCache[l])},renderValue:l=>{var u;return(u=a.getValue(l))!=null?u:e.options.renderFallbackValue},subRows:i??[],getLeafRows:()=>Ga(a.subRows,l=>l.subRows),getParentRow:()=>a.parentId?e.getRow(a.parentId,!0):void 0,getParentRows:()=>{let l=[],u=a;for(;;){const f=u.getParentRow();if(!f)break;l.push(f),u=f}return l.reverse()},getAllCells:me(()=>[e.getAllLeafColumns()],l=>l.map(u=>Ka(e,a,u,u.id)),_e(e.options,"debugRows")),_getAllCellsByColumnId:me(()=>[a.getAllCells()],l=>l.reduce((u,f)=>(u[f.column.id]=f,u),{}),_e(e.options,"debugRows"))};for(let l=0;l<e._features.length;l++){const u=e._features[l];u==null||u.createRow==null||u.createRow(a,e)}return a},Za={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},Ps=(e,t,n)=>{var o,r;const i=n==null||(o=n.toString())==null?void 0:o.toLowerCase();return!!(!((r=e.getValue(t))==null||(r=r.toString())==null||(r=r.toLowerCase())==null)&&r.includes(i))};Ps.autoRemove=e=>Tt(e);const $s=(e,t,n)=>{var o;return!!(!((o=e.getValue(t))==null||(o=o.toString())==null)&&o.includes(n))};$s.autoRemove=e=>Tt(e);const Ls=(e,t,n)=>{var o;return((o=e.getValue(t))==null||(o=o.toString())==null?void 0:o.toLowerCase())===(n==null?void 0:n.toLowerCase())};Ls.autoRemove=e=>Tt(e);const Fs=(e,t,n)=>{var o;return(o=e.getValue(t))==null?void 0:o.includes(n)};Fs.autoRemove=e=>Tt(e);const Us=(e,t,n)=>!n.some(o=>{var r;return!((r=e.getValue(t))!=null&&r.includes(o))});Us.autoRemove=e=>Tt(e)||!(e!=null&&e.length);const Hs=(e,t,n)=>n.some(o=>{var r;return(r=e.getValue(t))==null?void 0:r.includes(o)});Hs.autoRemove=e=>Tt(e)||!(e!=null&&e.length);const Vs=(e,t,n)=>e.getValue(t)===n;Vs.autoRemove=e=>Tt(e);const js=(e,t,n)=>e.getValue(t)==n;js.autoRemove=e=>Tt(e);const Rr=(e,t,n)=>{let[o,r]=n;const i=e.getValue(t);return i>=o&&i<=r};Rr.resolveFilterValue=e=>{let[t,n]=e,o=typeof t!="number"?parseFloat(t):t,r=typeof n!="number"?parseFloat(n):n,i=t===null||Number.isNaN(o)?-1/0:o,s=n===null||Number.isNaN(r)?1/0:r;if(i>s){const a=i;i=s,s=a}return[i,s]};Rr.autoRemove=e=>Tt(e)||Tt(e[0])&&Tt(e[1]);const Vt={includesString:Ps,includesStringSensitive:$s,equalsString:Ls,arrIncludes:Fs,arrIncludesAll:Us,arrIncludesSome:Hs,equals:Vs,weakEquals:js,inNumberRange:Rr};function Tt(e){return e==null||e===""}const Qa={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:ft("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],o=n==null?void 0:n.getValue(e.id);return typeof o=="string"?Vt.includesString:typeof o=="number"?Vt.inNumberRange:typeof o=="boolean"||o!==null&&typeof o=="object"?Vt.equals:Array.isArray(o)?Vt.arrIncludes:Vt.weakEquals},e.getFilterFn=()=>{var n,o;return So(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(o=t.options.filterFns)==null?void 0:o[e.columnDef.filterFn])!=null?n:Vt[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,o,r;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((o=t.options.enableColumnFilters)!=null?o:!0)&&((r=t.options.enableFilters)!=null?r:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(o=>o.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,o;return(n=(o=t.getState().columnFilters)==null?void 0:o.findIndex(r=>r.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(o=>{const r=e.getFilterFn(),i=o==null?void 0:o.find(f=>f.id===e.id),s=Kt(n,i?i.value:void 0);if(oi(r,s,e)){var a;return(a=o==null?void 0:o.filter(f=>f.id!==e.id))!=null?a:[]}const l={id:e.id,value:s};if(i){var u;return(u=o==null?void 0:o.map(f=>f.id===e.id?l:f))!=null?u:[]}return o!=null&&o.length?[...o,l]:[l]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),o=r=>{var i;return(i=Kt(t,r))==null?void 0:i.filter(s=>{const a=n.find(l=>l.id===s.id);if(a){const l=a.getFilterFn();if(oi(l,s.value,a))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(o)},e.resetColumnFilters=t=>{var n,o;e.setColumnFilters(t?[]:(n=(o=e.initialState)==null?void 0:o.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function oi(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const Ya=(e,t,n)=>n.reduce((o,r)=>{const i=r.getValue(e);return o+(typeof i=="number"?i:0)},0),ec=(e,t,n)=>{let o;return n.forEach(r=>{const i=r.getValue(e);i!=null&&(o>i||o===void 0&&i>=i)&&(o=i)}),o},tc=(e,t,n)=>{let o;return n.forEach(r=>{const i=r.getValue(e);i!=null&&(o<i||o===void 0&&i>=i)&&(o=i)}),o},nc=(e,t,n)=>{let o,r;return n.forEach(i=>{const s=i.getValue(e);s!=null&&(o===void 0?s>=s&&(o=r=s):(o>s&&(o=s),r<s&&(r=s)))}),[o,r]},oc=(e,t)=>{let n=0,o=0;if(t.forEach(r=>{let i=r.getValue(e);i!=null&&(i=+i)>=i&&(++n,o+=i)}),n)return o/n},rc=(e,t)=>{if(!t.length)return;const n=t.map(i=>i.getValue(e));if(!xa(n))return;if(n.length===1)return n[0];const o=Math.floor(n.length/2),r=n.sort((i,s)=>i-s);return n.length%2!==0?r[o]:(r[o-1]+r[o])/2},ic=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),sc=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,lc=(e,t)=>t.length,Lo={sum:Ya,min:ec,max:tc,extent:nc,mean:oc,median:rc,unique:ic,uniqueCount:sc,count:lc},ac={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:ft("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(o=>o!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,o;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((o=t.options.enableGrouping)!=null?o:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],o=n==null?void 0:n.getValue(e.id);if(typeof o=="number")return Lo.sum;if(Object.prototype.toString.call(o)==="[object Date]")return Lo.extent},e.getAggregationFn=()=>{var n,o;if(!e)throw new Error;return So(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(o=t.options.aggregationFns)==null?void 0:o[e.columnDef.aggregationFn])!=null?n:Lo[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,o;e.setGrouping(t?[]:(n=(o=e.initialState)==null?void 0:o.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const o=t.getColumn(n);return o!=null&&o.columnDef.getGroupingValue?(e._groupingValuesCache[n]=o.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,o)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var r;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((r=n.subRows)!=null&&r.length)}}};function cc(e,t,n){if(!(t!=null&&t.length)||!n)return e;const o=e.filter(i=>!t.includes(i.id));return n==="remove"?o:[...t.map(i=>e.find(s=>s.id===i)).filter(Boolean),...o]}const uc={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:ft("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=me(n=>[Dn(t,n)],n=>n.findIndex(o=>o.id===e.id),_e(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var o;return((o=Dn(t,n)[0])==null?void 0:o.id)===e.id},e.getIsLastColumn=n=>{var o;const r=Dn(t,n);return((o=r[r.length-1])==null?void 0:o.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=me(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,o)=>r=>{let i=[];if(!(t!=null&&t.length))i=r;else{const s=[...t],a=[...r];for(;a.length&&s.length;){const l=s.shift(),u=a.findIndex(f=>f.id===l);u>-1&&i.push(a.splice(u,1)[0])}i=[...i,...a]}return cc(i,n,o)},_e(e.options,"debugTable"))}},Fo=()=>({left:[],right:[]}),dc={getInitialState:e=>({columnPinning:Fo(),...e}),getDefaultOptions:e=>({onColumnPinningChange:ft("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const o=e.getLeafColumns().map(r=>r.id).filter(Boolean);t.setColumnPinning(r=>{var i,s;if(n==="right"){var a,l;return{left:((a=r==null?void 0:r.left)!=null?a:[]).filter(h=>!(o!=null&&o.includes(h))),right:[...((l=r==null?void 0:r.right)!=null?l:[]).filter(h=>!(o!=null&&o.includes(h))),...o]}}if(n==="left"){var u,f;return{left:[...((u=r==null?void 0:r.left)!=null?u:[]).filter(h=>!(o!=null&&o.includes(h))),...o],right:((f=r==null?void 0:r.right)!=null?f:[]).filter(h=>!(o!=null&&o.includes(h)))}}return{left:((i=r==null?void 0:r.left)!=null?i:[]).filter(h=>!(o!=null&&o.includes(h))),right:((s=r==null?void 0:r.right)!=null?s:[]).filter(h=>!(o!=null&&o.includes(h)))}})},e.getCanPin=()=>e.getLeafColumns().some(o=>{var r,i,s;return((r=o.columnDef.enablePinning)!=null?r:!0)&&((i=(s=t.options.enableColumnPinning)!=null?s:t.options.enablePinning)!=null?i:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(a=>a.id),{left:o,right:r}=t.getState().columnPinning,i=n.some(a=>o==null?void 0:o.includes(a)),s=n.some(a=>r==null?void 0:r.includes(a));return i?"left":s?"right":!1},e.getPinnedIndex=()=>{var n,o;const r=e.getIsPinned();return r?(n=(o=t.getState().columnPinning)==null||(o=o[r])==null?void 0:o.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=me(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,o,r)=>{const i=[...o??[],...r??[]];return n.filter(s=>!i.includes(s.column.id))},_e(t.options,"debugRows")),e.getLeftVisibleCells=me(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,o)=>(o??[]).map(i=>n.find(s=>s.column.id===i)).filter(Boolean).map(i=>({...i,position:"left"})),_e(t.options,"debugRows")),e.getRightVisibleCells=me(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,o)=>(o??[]).map(i=>n.find(s=>s.column.id===i)).filter(Boolean).map(i=>({...i,position:"right"})),_e(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,o;return e.setColumnPinning(t?Fo():(n=(o=e.initialState)==null?void 0:o.columnPinning)!=null?n:Fo())},e.getIsSomeColumnsPinned=t=>{var n;const o=e.getState().columnPinning;if(!t){var r,i;return!!((r=o.left)!=null&&r.length||(i=o.right)!=null&&i.length)}return!!((n=o[t])!=null&&n.length)},e.getLeftLeafColumns=me(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(o=>t.find(r=>r.id===o)).filter(Boolean),_e(e.options,"debugColumns")),e.getRightLeafColumns=me(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(o=>t.find(r=>r.id===o)).filter(Boolean),_e(e.options,"debugColumns")),e.getCenterLeafColumns=me(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,o)=>{const r=[...n??[],...o??[]];return t.filter(i=>!r.includes(i.id))},_e(e.options,"debugColumns"))}};function fc(e){return e||(typeof document<"u"?document:null)}const to={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Uo=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),hc={getDefaultColumnDef:()=>to,getInitialState:e=>({columnSizing:{},columnSizingInfo:Uo(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:ft("columnSizing",e),onColumnSizingInfoChange:ft("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,o,r;const i=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:to.minSize,(o=i??e.columnDef.size)!=null?o:to.size),(r=e.columnDef.maxSize)!=null?r:to.maxSize)},e.getStart=me(n=>[n,Dn(t,n),t.getState().columnSizing],(n,o)=>o.slice(0,e.getIndex(n)).reduce((r,i)=>r+i.getSize(),0),_e(t.options,"debugColumns")),e.getAfter=me(n=>[n,Dn(t,n),t.getState().columnSizing],(n,o)=>o.slice(e.getIndex(n)+1).reduce((r,i)=>r+i.getSize(),0),_e(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:o,...r}=n;return r})},e.getCanResize=()=>{var n,o;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((o=t.options.enableColumnResizing)!=null?o:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const o=r=>{if(r.subHeaders.length)r.subHeaders.forEach(o);else{var i;n+=(i=r.column.getSize())!=null?i:0}};return o(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const o=t.getColumn(e.column.id),r=o==null?void 0:o.getCanResize();return i=>{if(!o||!r||(i.persist==null||i.persist(),Ho(i)&&i.touches&&i.touches.length>1))return;const s=e.getSize(),a=e?e.getLeafHeaders().map(S=>[S.column.id,S.column.getSize()]):[[o.id,o.getSize()]],l=Ho(i)?Math.round(i.touches[0].clientX):i.clientX,u={},f=(S,C)=>{typeof C=="number"&&(t.setColumnSizingInfo(y=>{var R,T;const L=t.options.columnResizeDirection==="rtl"?-1:1,O=(C-((R=y==null?void 0:y.startOffset)!=null?R:0))*L,H=Math.max(O/((T=y==null?void 0:y.startSize)!=null?T:0),-.999999);return y.columnSizingStart.forEach($=>{let[X,te]=$;u[X]=Math.round(Math.max(te+te*H,0)*100)/100}),{...y,deltaOffset:O,deltaPercentage:H}}),(t.options.columnResizeMode==="onChange"||S==="end")&&t.setColumnSizing(y=>({...y,...u})))},h=S=>f("move",S),g=S=>{f("end",S),t.setColumnSizingInfo(C=>({...C,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=fc(n),_={moveHandler:S=>h(S.clientX),upHandler:S=>{p==null||p.removeEventListener("mousemove",_.moveHandler),p==null||p.removeEventListener("mouseup",_.upHandler),g(S.clientX)}},v={moveHandler:S=>(S.cancelable&&(S.preventDefault(),S.stopPropagation()),h(S.touches[0].clientX),!1),upHandler:S=>{var C;p==null||p.removeEventListener("touchmove",v.moveHandler),p==null||p.removeEventListener("touchend",v.upHandler),S.cancelable&&(S.preventDefault(),S.stopPropagation()),g((C=S.touches[0])==null?void 0:C.clientX)}},b=pc()?{passive:!1}:!1;Ho(i)?(p==null||p.addEventListener("touchmove",v.moveHandler,b),p==null||p.addEventListener("touchend",v.upHandler,b)):(p==null||p.addEventListener("mousemove",_.moveHandler,b),p==null||p.addEventListener("mouseup",_.upHandler,b)),t.setColumnSizingInfo(S=>({...S,startOffset:l,startSize:s,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:o.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?Uo():(n=e.initialState.columnSizingInfo)!=null?n:Uo())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((o,r)=>o+r.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((o,r)=>o+r.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((o,r)=>o+r.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((o,r)=>o+r.getSize(),0))!=null?t:0}}};let no=null;function pc(){if(typeof no=="boolean")return no;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return no=e,no}function Ho(e){return e.type==="touchstart"}const gc={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:ft("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(o=>({...o,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,o;const r=e.columns;return(n=r.length?r.some(i=>i.getIsVisible()):(o=t.getState().columnVisibility)==null?void 0:o[e.id])!=null?n:!0},e.getCanHide=()=>{var n,o;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((o=t.options.enableHiding)!=null?o:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=me(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(o=>o.column.getIsVisible()),_e(t.options,"debugRows")),e.getVisibleCells=me(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,o,r)=>[...n,...o,...r],_e(t.options,"debugRows"))},createTable:e=>{const t=(n,o)=>me(()=>[o(),o().filter(r=>r.getIsVisible()).map(r=>r.id).join("_")],r=>r.filter(i=>i.getIsVisible==null?void 0:i.getIsVisible()),_e(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var o;e.setColumnVisibility(n?{}:(o=e.initialState.columnVisibility)!=null?o:{})},e.toggleAllColumnsVisible=n=>{var o;n=(o=n)!=null?o:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((r,i)=>({...r,[i.id]:n||!(i.getCanHide!=null&&i.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var o;e.toggleAllColumnsVisible((o=n.target)==null?void 0:o.checked)}}};function Dn(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const mc={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},_c={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:ft("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const o=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof o=="string"||typeof o=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,o,r,i;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((o=t.options.enableGlobalFilter)!=null?o:!0)&&((r=t.options.enableFilters)!=null?r:!0)&&((i=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?i:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Vt.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:o}=e.options;return So(o)?o:o==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[o])!=null?t:Vt[o]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},vc={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:ft("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var o,r;if(!t){e._queue(()=>{t=!0});return}if((o=(r=e.options.autoResetAll)!=null?r:e.options.autoResetExpanded)!=null?o:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=o=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(o),e.toggleAllRowsExpanded=o=>{o??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=o=>{var r,i;e.setExpanded(o?{}:(r=(i=e.initialState)==null?void 0:i.expanded)!=null?r:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(o=>o.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>o=>{o.persist==null||o.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const o=e.getState().expanded;return o===!0||Object.values(o).some(Boolean)},e.getIsAllRowsExpanded=()=>{const o=e.getState().expanded;return typeof o=="boolean"?o===!0:!(!Object.keys(o).length||e.getRowModel().flatRows.some(r=>!r.getIsExpanded()))},e.getExpandedDepth=()=>{let o=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(i=>{const s=i.split(".");o=Math.max(o,s.length)}),o},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(o=>{var r;const i=o===!0?!0:!!(o!=null&&o[e.id]);let s={};if(o===!0?Object.keys(t.getRowModel().rowsById).forEach(a=>{s[a]=!0}):s=o,n=(r=n)!=null?r:!i,!i&&n)return{...s,[e.id]:!0};if(i&&!n){const{[e.id]:a,...l}=s;return l}return o})},e.getIsExpanded=()=>{var n;const o=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:o===!0||o!=null&&o[e.id])},e.getCanExpand=()=>{var n,o,r;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((o=t.options.enableExpanding)!=null?o:!0)&&!!((r=e.subRows)!=null&&r.length)},e.getIsAllParentsExpanded=()=>{let n=!0,o=e;for(;n&&o.parentId;)o=t.getRow(o.parentId,!0),n=o.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},rr=0,ir=10,Vo=()=>({pageIndex:rr,pageSize:ir}),bc={getInitialState:e=>({...e,pagination:{...Vo(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:ft("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var o,r;if(!t){e._queue(()=>{t=!0});return}if((o=(r=e.options.autoResetAll)!=null?r:e.options.autoResetPageIndex)!=null?o:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=o=>{const r=i=>Kt(o,i);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(r)},e.resetPagination=o=>{var r;e.setPagination(o?Vo():(r=e.initialState.pagination)!=null?r:Vo())},e.setPageIndex=o=>{e.setPagination(r=>{let i=Kt(o,r.pageIndex);const s=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return i=Math.max(0,Math.min(i,s)),{...r,pageIndex:i}})},e.resetPageIndex=o=>{var r,i;e.setPageIndex(o?rr:(r=(i=e.initialState)==null||(i=i.pagination)==null?void 0:i.pageIndex)!=null?r:rr)},e.resetPageSize=o=>{var r,i;e.setPageSize(o?ir:(r=(i=e.initialState)==null||(i=i.pagination)==null?void 0:i.pageSize)!=null?r:ir)},e.setPageSize=o=>{e.setPagination(r=>{const i=Math.max(1,Kt(o,r.pageSize)),s=r.pageSize*r.pageIndex,a=Math.floor(s/i);return{...r,pageIndex:a,pageSize:i}})},e.setPageCount=o=>e.setPagination(r=>{var i;let s=Kt(o,(i=e.options.pageCount)!=null?i:-1);return typeof s=="number"&&(s=Math.max(-1,s)),{...r,pageCount:s}}),e.getPageOptions=me(()=>[e.getPageCount()],o=>{let r=[];return o&&o>0&&(r=[...new Array(o)].fill(null).map((i,s)=>s)),r},_e(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:o}=e.getState().pagination,r=e.getPageCount();return r===-1?!0:r===0?!1:o<r-1},e.previousPage=()=>e.setPageIndex(o=>o-1),e.nextPage=()=>e.setPageIndex(o=>o+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var o;return(o=e.options.pageCount)!=null?o:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var o;return(o=e.options.rowCount)!=null?o:e.getPrePaginationRowModel().rows.length}}},jo=()=>({top:[],bottom:[]}),wc={getInitialState:e=>({rowPinning:jo(),...e}),getDefaultOptions:e=>({onRowPinningChange:ft("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,o,r)=>{const i=o?e.getLeafRows().map(l=>{let{id:u}=l;return u}):[],s=r?e.getParentRows().map(l=>{let{id:u}=l;return u}):[],a=new Set([...s,e.id,...i]);t.setRowPinning(l=>{var u,f;if(n==="bottom"){var h,g;return{top:((h=l==null?void 0:l.top)!=null?h:[]).filter(v=>!(a!=null&&a.has(v))),bottom:[...((g=l==null?void 0:l.bottom)!=null?g:[]).filter(v=>!(a!=null&&a.has(v))),...Array.from(a)]}}if(n==="top"){var p,_;return{top:[...((p=l==null?void 0:l.top)!=null?p:[]).filter(v=>!(a!=null&&a.has(v))),...Array.from(a)],bottom:((_=l==null?void 0:l.bottom)!=null?_:[]).filter(v=>!(a!=null&&a.has(v)))}}return{top:((u=l==null?void 0:l.top)!=null?u:[]).filter(v=>!(a!=null&&a.has(v))),bottom:((f=l==null?void 0:l.bottom)!=null?f:[]).filter(v=>!(a!=null&&a.has(v)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:o,enablePinning:r}=t.options;return typeof o=="function"?o(e):(n=o??r)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:o,bottom:r}=t.getState().rowPinning,i=n.some(a=>o==null?void 0:o.includes(a)),s=n.some(a=>r==null?void 0:r.includes(a));return i?"top":s?"bottom":!1},e.getPinnedIndex=()=>{var n,o;const r=e.getIsPinned();if(!r)return-1;const i=(n=r==="top"?t.getTopRows():t.getBottomRows())==null?void 0:n.map(s=>{let{id:a}=s;return a});return(o=i==null?void 0:i.indexOf(e.id))!=null?o:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,o;return e.setRowPinning(t?jo():(n=(o=e.initialState)==null?void 0:o.rowPinning)!=null?n:jo())},e.getIsSomeRowsPinned=t=>{var n;const o=e.getState().rowPinning;if(!t){var r,i;return!!((r=o.top)!=null&&r.length||(i=o.bottom)!=null&&i.length)}return!!((n=o[t])!=null&&n.length)},e._getPinnedRows=(t,n,o)=>{var r;return((r=e.options.keepPinnedRows)==null||r?(n??[]).map(s=>{const a=e.getRow(s,!0);return a.getIsAllParentsExpanded()?a:null}):(n??[]).map(s=>t.find(a=>a.id===s))).filter(Boolean).map(s=>({...s,position:o}))},e.getTopRows=me(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),_e(e.options,"debugRows")),e.getBottomRows=me(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),_e(e.options,"debugRows")),e.getCenterRows=me(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,o)=>{const r=new Set([...n??[],...o??[]]);return t.filter(i=>!r.has(i.id))},_e(e.options,"debugRows"))}},Cc={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:ft("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const o={...n},r=e.getPreGroupedRowModel().flatRows;return t?r.forEach(i=>{i.getCanSelect()&&(o[i.id]=!0)}):r.forEach(i=>{delete o[i.id]}),o})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const o=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),r={...n};return e.getRowModel().rows.forEach(i=>{sr(r,i.id,o,!0,e)}),r}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=me(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?Bo(e,n):{rows:[],flatRows:[],rowsById:{}},_e(e.options,"debugTable")),e.getFilteredSelectedRowModel=me(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?Bo(e,n):{rows:[],flatRows:[],rowsById:{}},_e(e.options,"debugTable")),e.getGroupedSelectedRowModel=me(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?Bo(e,n):{rows:[],flatRows:[],rowsById:{}},_e(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let o=!!(t.length&&Object.keys(n).length);return o&&t.some(r=>r.getCanSelect()&&!n[r.id])&&(o=!1),o},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(r=>r.getCanSelect()),{rowSelection:n}=e.getState();let o=!!t.length;return o&&t.some(r=>!n[r.id])&&(o=!1),o},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,o)=>{const r=e.getIsSelected();t.setRowSelection(i=>{var s;if(n=typeof n<"u"?n:!r,e.getCanSelect()&&r===n)return i;const a={...i};return sr(a,e.id,n,(s=o==null?void 0:o.selectChildren)!=null?s:!0,t),a})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return Tr(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return lr(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return lr(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return o=>{var r;n&&e.toggleSelected((r=o.target)==null?void 0:r.checked)}}}},sr=(e,t,n,o,r)=>{var i;const s=r.getRow(t,!0);n?(s.getCanMultiSelect()||Object.keys(e).forEach(a=>delete e[a]),s.getCanSelect()&&(e[t]=!0)):delete e[t],o&&(i=s.subRows)!=null&&i.length&&s.getCanSelectSubRows()&&s.subRows.forEach(a=>sr(e,a.id,n,o,r))};function Bo(e,t){const n=e.getState().rowSelection,o=[],r={},i=function(s,a){return s.map(l=>{var u;const f=Tr(l,n);if(f&&(o.push(l),r[l.id]=l),(u=l.subRows)!=null&&u.length&&(l={...l,subRows:i(l.subRows)}),f)return l}).filter(Boolean)};return{rows:i(t.rows),flatRows:o,rowsById:r}}function Tr(e,t){var n;return(n=t[e.id])!=null?n:!1}function lr(e,t,n){var o;if(!((o=e.subRows)!=null&&o.length))return!1;let r=!0,i=!1;return e.subRows.forEach(s=>{if(!(i&&!r)&&(s.getCanSelect()&&(Tr(s,t)?i=!0:r=!1),s.subRows&&s.subRows.length)){const a=lr(s,t);a==="all"?i=!0:(a==="some"&&(i=!0),r=!1)}}),r?"all":i?"some":!1}const ar=/([0-9]+)/gm,Sc=(e,t,n)=>Bs(Xt(e.getValue(n)).toLowerCase(),Xt(t.getValue(n)).toLowerCase()),yc=(e,t,n)=>Bs(Xt(e.getValue(n)),Xt(t.getValue(n))),Ec=(e,t,n)=>Ar(Xt(e.getValue(n)).toLowerCase(),Xt(t.getValue(n)).toLowerCase()),kc=(e,t,n)=>Ar(Xt(e.getValue(n)),Xt(t.getValue(n))),Rc=(e,t,n)=>{const o=e.getValue(n),r=t.getValue(n);return o>r?1:o<r?-1:0},Tc=(e,t,n)=>Ar(e.getValue(n),t.getValue(n));function Ar(e,t){return e===t?0:e>t?1:-1}function Xt(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function Bs(e,t){const n=e.split(ar).filter(Boolean),o=t.split(ar).filter(Boolean);for(;n.length&&o.length;){const r=n.shift(),i=o.shift(),s=parseInt(r,10),a=parseInt(i,10),l=[s,a].sort();if(isNaN(l[0])){if(r>i)return 1;if(i>r)return-1;continue}if(isNaN(l[1]))return isNaN(s)?-1:1;if(s>a)return 1;if(a>s)return-1}return n.length-o.length}const kn={alphanumeric:Sc,alphanumericCaseSensitive:yc,text:Ec,textCaseSensitive:kc,datetime:Rc,basic:Tc},Ac={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:ft("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let o=!1;for(const r of n){const i=r==null?void 0:r.getValue(e.id);if(Object.prototype.toString.call(i)==="[object Date]")return kn.datetime;if(typeof i=="string"&&(o=!0,i.split(ar).length>1))return kn.alphanumeric}return o?kn.text:kn.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,o;if(!e)throw new Error;return So(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(o=t.options.sortingFns)==null?void 0:o[e.columnDef.sortingFn])!=null?n:kn[e.columnDef.sortingFn]},e.toggleSorting=(n,o)=>{const r=e.getNextSortingOrder(),i=typeof n<"u"&&n!==null;t.setSorting(s=>{const a=s==null?void 0:s.find(p=>p.id===e.id),l=s==null?void 0:s.findIndex(p=>p.id===e.id);let u=[],f,h=i?n:r==="desc";if(s!=null&&s.length&&e.getCanMultiSort()&&o?a?f="toggle":f="add":s!=null&&s.length&&l!==s.length-1?f="replace":a?f="toggle":f="replace",f==="toggle"&&(i||r||(f="remove")),f==="add"){var g;u=[...s,{id:e.id,desc:h}],u.splice(0,u.length-((g=t.options.maxMultiSortColCount)!=null?g:Number.MAX_SAFE_INTEGER))}else f==="toggle"?u=s.map(p=>p.id===e.id?{...p,desc:h}:p):f==="remove"?u=s.filter(p=>p.id!==e.id):u=[{id:e.id,desc:h}];return u})},e.getFirstSortDir=()=>{var n,o;return((n=(o=e.columnDef.sortDescFirst)!=null?o:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var o,r;const i=e.getFirstSortDir(),s=e.getIsSorted();return s?s!==i&&((o=t.options.enableSortingRemoval)==null||o)&&(!(n&&(r=t.options.enableMultiRemove)!=null)||r)?!1:s==="desc"?"asc":"desc":i},e.getCanSort=()=>{var n,o;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((o=t.options.enableSorting)!=null?o:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,o;return(n=(o=e.columnDef.enableMultiSort)!=null?o:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const o=(n=t.getState().sorting)==null?void 0:n.find(r=>r.id===e.id);return o?o.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,o;return(n=(o=t.getState().sorting)==null?void 0:o.findIndex(r=>r.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(o=>o.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return o=>{n&&(o.persist==null||o.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(o):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,o;e.setSorting(t?[]:(n=(o=e.initialState)==null?void 0:o.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},Oc=[Ja,gc,uc,dc,Za,Qa,mc,_c,Ac,ac,vc,bc,wc,Cc,hc];function Ic(e){var t,n;const o=[...Oc,...(t=e._features)!=null?t:[]];let r={_features:o};const i=r._features.reduce((g,p)=>Object.assign(g,p.getDefaultOptions==null?void 0:p.getDefaultOptions(r)),{}),s=g=>r.options.mergeOptions?r.options.mergeOptions(i,g):{...i,...g};let l={...{},...(n=e.initialState)!=null?n:{}};r._features.forEach(g=>{var p;l=(p=g.getInitialState==null?void 0:g.getInitialState(l))!=null?p:l});const u=[];let f=!1;const h={_features:o,options:{...i,...e},initialState:l,_queue:g=>{u.push(g),f||(f=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();f=!1}).catch(p=>setTimeout(()=>{throw p})))},reset:()=>{r.setState(r.initialState)},setOptions:g=>{const p=Kt(g,r.options);r.options=s(p)},getState:()=>r.options.state,setState:g=>{r.options.onStateChange==null||r.options.onStateChange(g)},_getRowId:(g,p,_)=>{var v;return(v=r.options.getRowId==null?void 0:r.options.getRowId(g,p,_))!=null?v:`${_?[_.id,p].join("."):p}`},getCoreRowModel:()=>(r._getCoreRowModel||(r._getCoreRowModel=r.options.getCoreRowModel(r)),r._getCoreRowModel()),getRowModel:()=>r.getPaginationRowModel(),getRow:(g,p)=>{let _=(p?r.getPrePaginationRowModel():r.getRowModel()).rowsById[g];if(!_&&(_=r.getCoreRowModel().rowsById[g],!_))throw new Error;return _},_getDefaultColumnDef:me(()=>[r.options.defaultColumn],g=>{var p;return g=(p=g)!=null?p:{},{header:_=>{const v=_.header.column.columnDef;return v.accessorKey?v.accessorKey:v.accessorFn?v.id:null},cell:_=>{var v,b;return(v=(b=_.renderValue())==null||b.toString==null?void 0:b.toString())!=null?v:null},...r._features.reduce((_,v)=>Object.assign(_,v.getDefaultColumnDef==null?void 0:v.getDefaultColumnDef()),{}),...g}},_e(e,"debugColumns")),_getColumnDefs:()=>r.options.columns,getAllColumns:me(()=>[r._getColumnDefs()],g=>{const p=function(_,v,b){return b===void 0&&(b=0),_.map(S=>{const C=Xa(r,S,b,v),y=S;return C.columns=y.columns?p(y.columns,C,b+1):[],C})};return p(g)},_e(e,"debugColumns")),getAllFlatColumns:me(()=>[r.getAllColumns()],g=>g.flatMap(p=>p.getFlatColumns()),_e(e,"debugColumns")),_getAllFlatColumnsById:me(()=>[r.getAllFlatColumns()],g=>g.reduce((p,_)=>(p[_.id]=_,p),{}),_e(e,"debugColumns")),getAllLeafColumns:me(()=>[r.getAllColumns(),r._getOrderColumnsFn()],(g,p)=>{let _=g.flatMap(v=>v.getLeafColumns());return p(_)},_e(e,"debugColumns")),getColumn:g=>r._getAllFlatColumnsById()[g]};Object.assign(r,h);for(let g=0;g<r._features.length;g++){const p=r._features[g];p==null||p.createTable==null||p.createTable(r)}return r}function Mc(){return e=>me(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},o=function(r,i,s){i===void 0&&(i=0);const a=[];for(let u=0;u<r.length;u++){const f=kr(e,e._getRowId(r[u],u,s),r[u],u,i,void 0,s==null?void 0:s.id);if(n.flatRows.push(f),n.rowsById[f.id]=f,a.push(f),e.options.getSubRows){var l;f.originalSubRows=e.options.getSubRows(r[u],u),(l=f.originalSubRows)!=null&&l.length&&(f.subRows=o(f.originalSubRows,i+1,f))}}return a};return n.rows=o(t),n},_e(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function Dc(e,t,n){return n.options.filterFromLeafRows?Nc(e,t,n):Pc(e,t,n)}function Nc(e,t,n){var o;const r=[],i={},s=(o=n.options.maxLeafRowFilterDepth)!=null?o:100,a=function(l,u){u===void 0&&(u=0);const f=[];for(let g=0;g<l.length;g++){var h;let p=l[g];const _=kr(n,p.id,p.original,p.index,p.depth,void 0,p.parentId);if(_.columnFilters=p.columnFilters,(h=p.subRows)!=null&&h.length&&u<s){if(_.subRows=a(p.subRows,u+1),p=_,t(p)&&!_.subRows.length){f.push(p),i[p.id]=p,r.push(p);continue}if(t(p)||_.subRows.length){f.push(p),i[p.id]=p,r.push(p);continue}}else p=_,t(p)&&(f.push(p),i[p.id]=p,r.push(p))}return f};return{rows:a(e),flatRows:r,rowsById:i}}function Pc(e,t,n){var o;const r=[],i={},s=(o=n.options.maxLeafRowFilterDepth)!=null?o:100,a=function(l,u){u===void 0&&(u=0);const f=[];for(let g=0;g<l.length;g++){let p=l[g];if(t(p)){var h;if((h=p.subRows)!=null&&h.length&&u<s){const v=kr(n,p.id,p.original,p.index,p.depth,void 0,p.parentId);v.subRows=a(p.subRows,u+1),p=v}f.push(p),r.push(p),i[p.id]=p}}return f};return{rows:a(e),flatRows:r,rowsById:i}}function $c(){return e=>me(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,o)=>{if(!t.rows.length||!(n!=null&&n.length)&&!o){for(let g=0;g<t.flatRows.length;g++)t.flatRows[g].columnFilters={},t.flatRows[g].columnFiltersMeta={};return t}const r=[],i=[];(n??[]).forEach(g=>{var p;const _=e.getColumn(g.id);if(!_)return;const v=_.getFilterFn();v&&r.push({id:g.id,filterFn:v,resolvedValue:(p=v.resolveFilterValue==null?void 0:v.resolveFilterValue(g.value))!=null?p:g.value})});const s=(n??[]).map(g=>g.id),a=e.getGlobalFilterFn(),l=e.getAllLeafColumns().filter(g=>g.getCanGlobalFilter());o&&a&&l.length&&(s.push("__global__"),l.forEach(g=>{var p;i.push({id:g.id,filterFn:a,resolvedValue:(p=a.resolveFilterValue==null?void 0:a.resolveFilterValue(o))!=null?p:o})}));let u,f;for(let g=0;g<t.flatRows.length;g++){const p=t.flatRows[g];if(p.columnFilters={},r.length)for(let _=0;_<r.length;_++){u=r[_];const v=u.id;p.columnFilters[v]=u.filterFn(p,v,u.resolvedValue,b=>{p.columnFiltersMeta[v]=b})}if(i.length){for(let _=0;_<i.length;_++){f=i[_];const v=f.id;if(f.filterFn(p,v,f.resolvedValue,b=>{p.columnFiltersMeta[v]=b})){p.columnFilters.__global__=!0;break}}p.columnFilters.__global__!==!0&&(p.columnFilters.__global__=!1)}}const h=g=>{for(let p=0;p<s.length;p++)if(g.columnFilters[s[p]]===!1)return!1;return!0};return Dc(t.rows,h,e)},_e(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function Lc(){return e=>me(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const o=e.getState().sorting,r=[],i=o.filter(l=>{var u;return(u=e.getColumn(l.id))==null?void 0:u.getCanSort()}),s={};i.forEach(l=>{const u=e.getColumn(l.id);u&&(s[l.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});const a=l=>{const u=l.map(f=>({...f}));return u.sort((f,h)=>{for(let p=0;p<i.length;p+=1){var g;const _=i[p],v=s[_.id],b=v.sortUndefined,S=(g=_==null?void 0:_.desc)!=null?g:!1;let C=0;if(b){const y=f.getValue(_.id),R=h.getValue(_.id),T=y===void 0,L=R===void 0;if(T||L){if(b==="first")return T?-1:1;if(b==="last")return T?1:-1;C=T&&L?0:T?b:-b}}if(C===0&&(C=v.sortingFn(f,h,_.id)),C!==0)return S&&(C*=-1),v.invertSorting&&(C*=-1),C}return f.index-h.index}),u.forEach(f=>{var h;r.push(f),(h=f.subRows)!=null&&h.length&&(f.subRows=a(f.subRows))}),u};return{rows:a(n.rows),flatRows:r,rowsById:n.rowsById}},_e(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * svelte-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Fc(e){let t;return{c(){t=z(e[0])},l(n){t=ma(n,e[0])},m(n,o){fa(n,t,o)},p(n,[o]){o&1&&ve(t,n[0])},i:ce,o:ce,d(n){n&&M(t)}}}function Uc(e,t,n){let{content:o}=t;return e.$$set=r=>{"content"in r&&n(0,o=r.content)},[o]}let Hc=class extends xe{constructor(t){super(),Xe(this,t,Uc,Fc,We,{content:0})}};const Vc=Ns((e,t,n,o)=>`${ka(t.content)}`);var jc=typeof document>"u"?Vc:Hc;function Bc(e,t,n){let o,r;return o=new t({props:n,$$inline:!0}),{c(){Te(o.$$.fragment)},l(i){Ta(o.$$.fragment,i)},m(i,s){Ee(o,i,s),r=!0},p:ce,i(i){r||(B(o.$$.fragment,i),r=!0)},o(i){J(o.$$.fragment,i),r=!1},d(i){ke(o,i)}}}function zc(e,t){return class extends xe{constructor(o){super(),Xe(this,o,null,r=>Bc(r,e,t),We,{},void 0)}}}function qc(e,t){return Ns((o,r,i,s)=>`${Ra(e,"TableComponent").$$render(o,t,{},{})}`)}const cr=typeof window>"u"?qc:zc;function Wc(e){return typeof e=="object"&&typeof e.$$render=="function"&&typeof e.render=="function"}function xc(e){var t,n;let o="__SVELTE_HMR"in window;return e.prototype instanceof xe||o&&((t=e.name)==null?void 0:t.startsWith("Proxy<"))&&((n=e.name)==null?void 0:n.endsWith(">"))}function ri(e){return typeof document>"u"?Wc(e):xc(e)}function ii(e){return cr(jc,{content:e})}function ur(e,t){if(!e)return null;if(ri(e))return cr(e,t);if(typeof e=="function"){const n=e(t);return n==null?null:ri(n)?cr(n,t):ii(n)}return ii(e)}function Gc(e){let t;"subscribe"in e?t=e:t=or(e);let n={state:{},onStateChange:()=>{},renderFallbackValue:null,...st(t)},o=Ic(n),r=Pt(o.initialState),i=Ia([r,t],a=>a);return or(o,function(l){const u=i.subscribe(f=>{let[h,g]=f;o.setOptions(p=>({...p,...g,state:{...h,...g.state},onStateChange:_=>{_ instanceof Function?r.update(_):r.set(_),n.onStateChange==null||n.onStateChange(_)}})),l(o)});return function(){u()}})}function Kc(e,t,n){const o=e.slice();return o[28]=t[n],o}function si(e,t,n){const o=e.slice();return o[31]=t[n],o}function li(e,t,n){const o=e.slice();return o[34]=t[n],o}function Xc(e){const t=e.slice(),n=t[34].getContext().getValue();t[37]=n;const o=t[34].column.columnDef.meta.isDateStatus?cu(t[37]):au(t[37]);return t[38]=o,t}function Jc(e){const t=e.slice(),n=t[34].getContext().getValue();return t[37]=n,t}function ai(e,t,n){const o=e.slice();return o[39]=t[n],o}function ci(e,t,n){const o=e.slice();return o[42]=t[n],o}function zo(e){const t=e.slice(),n=ur(t[42].column.columnDef.header,t[42].getContext());return t[45]=n,t}function ui(e){let t,n,o,r,i,s=({asc:" ▲",desc:" ▼"}[e[42].column.getIsSorted()]??"")+"",a,l;const u=[Qc,Zc],f=[];function h(g,p){return typeof g[45]=="string"?0:1}return n=h(e),o=f[n]=u[n](e),{c(){t=m("div"),o.c(),r=w(),i=m("span"),a=z(s),d(i,"class","sort-indicator svelte-180pvw6"),d(t,"class","header-content svelte-180pvw6")},m(g,p){D(g,t,p),f[n].m(t,null),c(t,r),c(t,i),c(i,a),l=!0},p(g,p){let _=n;n=h(g),n===_?f[n].p(g,p):(Ne(),J(f[_],1,1,()=>{f[_]=null}),Pe(),o=f[n],o?o.p(g,p):(o=f[n]=u[n](g),o.c()),B(o,1),o.m(t,r)),(!l||p[0]&128)&&s!==(s=({asc:" ▲",desc:" ▼"}[g[42].column.getIsSorted()]??"")+"")&&ve(a,s)},i(g){l||(B(o),l=!0)},o(g){J(o),l=!1},d(g){g&&M(t),f[n].d()}}}function Zc(e){let t,n,o;var r=e[45];function i(s,a){return{}}return r&&(t=po(r,i())),{c(){t&&Te(t.$$.fragment),n=lt()},m(s,a){t&&Ee(t,s,a),D(s,n,a),o=!0},p(s,a){if(a[0]&128&&r!==(r=s[45])){if(t){Ne();const l=t;J(l.$$.fragment,1,0,()=>{ke(l,1)}),Pe()}r?(t=po(r,i()),Te(t.$$.fragment),B(t.$$.fragment,1),Ee(t,n.parentNode,n)):t=null}},i(s){o||(t&&B(t.$$.fragment,s),o=!0)},o(s){t&&J(t.$$.fragment,s),o=!1},d(s){s&&M(n),t&&ke(t,s)}}}function Qc(e){let t,n=e[45]+"",o;return{c(){t=new va(!1),o=lt(),t.a=o},m(r,i){t.m(n,r,i),D(r,o,i)},p(r,i){i[0]&128&&n!==(n=r[45]+"")&&t.p(n)},i:ce,o:ce,d(r){r&&(M(o),t.d())}}}function di(e){let t,n,o,r,i,s,a,l=!e[42].isPlaceholder&&ui(zo(e));return{c(){var u;t=m("th"),l&&l.c(),d(t,"key",n=e[42].id),d(t,"colspan",o=e[42].colSpan),d(t,"class",r=bn(((u=e[42].column.columnDef.meta)==null?void 0:u.cellClass)||"")+" svelte-180pvw6"),Fe(t,"sortable",e[42].column.getCanSort()),tr(t,"width",e[4]?`${e[42].column.getSize()}px`:"auto")},m(u,f){D(u,t,f),l&&l.m(t,null),i=!0,s||(a=I(t,"click",function(){bo(e[42].column.getToggleSortingHandler())&&e[42].column.getToggleSortingHandler().apply(this,arguments)}),s=!0)},p(u,f){var h;e=u,e[42].isPlaceholder?l&&(Ne(),J(l,1,1,()=>{l=null}),Pe()):l?(l.p(zo(e),f),f[0]&128&&B(l,1)):(l=ui(zo(e)),l.c(),B(l,1),l.m(t,null)),(!i||f[0]&128&&n!==(n=e[42].id))&&d(t,"key",n),(!i||f[0]&128&&o!==(o=e[42].colSpan))&&d(t,"colspan",o),(!i||f[0]&128&&r!==(r=bn(((h=e[42].column.columnDef.meta)==null?void 0:h.cellClass)||"")+" svelte-180pvw6"))&&d(t,"class",r),(!i||f[0]&128)&&Fe(t,"sortable",e[42].column.getCanSort()),f[0]&144&&tr(t,"width",e[4]?`${e[42].column.getSize()}px`:"auto")},i(u){i||(B(l),i=!0)},o(u){J(l),i=!1},d(u){u&&M(t),l&&l.d(),s=!1,a()}}}function fi(e){let t,n,o,r,i=ut(e[39].headers),s=[];for(let l=0;l<i.length;l+=1)s[l]=di(ci(e,i,l));const a=l=>J(s[l],1,1,()=>{s[l]=null});return{c(){t=m("tr");for(let l=0;l<s.length;l+=1)s[l].c();n=w(),d(t,"key",o=e[39].id)},m(l,u){D(l,t,u);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(t,null);c(t,n),r=!0},p(l,u){if(u[0]&144){i=ut(l[39].headers);let f;for(f=0;f<i.length;f+=1){const h=ci(l,i,f);s[f]?(s[f].p(h,u),B(s[f],1)):(s[f]=di(h),s[f].c(),B(s[f],1),s[f].m(t,n))}for(Ne(),f=i.length;f<s.length;f+=1)a(f);Pe()}(!r||u[0]&128&&o!==(o=l[39].id))&&d(t,"key",o)},i(l){if(!r){for(let u=0;u<i.length;u+=1)B(s[u]);r=!0}},o(l){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)J(s[u]);r=!1},d(l){l&&M(t),Mn(s,l)}}}function Yc(e){let t,n,o;var r=ur(e[34].column.columnDef.cell,e[34].getContext());function i(s,a){return{}}return r&&(t=po(r,i())),{c(){t&&Te(t.$$.fragment),n=lt()},m(s,a){t&&Ee(t,s,a),D(s,n,a),o=!0},p(s,a){if(a[0]&128&&r!==(r=ur(s[34].column.columnDef.cell,s[34].getContext()))){if(t){Ne();const l=t;J(l.$$.fragment,1,0,()=>{ke(l,1)}),Pe()}r?(t=po(r,i()),Te(t.$$.fragment),B(t.$$.fragment,1),Ee(t,n.parentNode,n)):t=null}},i(s){o||(t&&B(t.$$.fragment,s),o=!0)},o(s){t&&J(t.$$.fragment,s),o=!1},d(s){s&&M(n),t&&ke(t,s)}}}function eu(e){let t,n=e[37]+"",o,r,i,s;function a(){return e[22](e[31],e[34])}return{c(){t=m("button"),o=z(n),d(t,"class",r="status-btn "+e[38]+" svelte-180pvw6")},m(l,u){D(l,t,u),c(t,o),i||(s=I(t,"click",a),i=!0)},p(l,u){e=l,u[0]&128&&n!==(n=e[37]+"")&&ve(o,n),u[0]&128&&r!==(r="status-btn "+e[38]+" svelte-180pvw6")&&d(t,"class",r)},i:ce,o:ce,d(l){l&&M(t),i=!1,s()}}}function tu(e){let t,n=e[37]+"",o,r;return{c(){t=m("span"),o=z(n),d(t,"class",r=bn(gi(e[34]))+" svelte-180pvw6")},m(i,s){D(i,t,s),c(t,o)},p(i,s){s[0]&128&&n!==(n=i[37]+"")&&ve(o,n),s[0]&128&&r!==(r=bn(gi(i[34]))+" svelte-180pvw6")&&d(t,"class",r)},i:ce,o:ce,d(i){i&&M(t)}}}function nu(e){let t,n,o,r;function i(){return e[21](e[31])}return{c(){t=m("div"),n=m("button"),n.textContent="Ver",d(n,"class","btn-action btn-view-images svelte-180pvw6"),d(t,"class","actions-cell svelte-180pvw6")},m(s,a){D(s,t,a),c(t,n),o||(r=I(n,"click",i),o=!0)},p(s,a){e=s},i:ce,o:ce,d(s){s&&M(t),o=!1,r()}}}function ou(e){let t,n,o,r;function i(){return e[20](e[31])}return{c(){t=m("div"),n=m("button"),n.textContent="Ver Hoja de Vida",d(n,"class","btn-action btn-cv svelte-180pvw6"),d(t,"class","actions-cell svelte-180pvw6")},m(s,a){D(s,t,a),c(t,n),o||(r=I(n,"click",i),o=!0)},p(s,a){e=s},i:ce,o:ce,d(s){s&&M(t),o=!1,r()}}}function ru(e){let t,n,o,r;function i(){return e[19](e[31])}return{c(){t=m("div"),n=m("button"),n.textContent="Ejecutar",d(n,"class","btn-action btn-execute svelte-180pvw6"),d(t,"class","actions-cell svelte-180pvw6")},m(s,a){D(s,t,a),c(t,n),o||(r=I(n,"click",i),o=!0)},p(s,a){e=s},i:ce,o:ce,d(s){s&&M(t),o=!1,r()}}}function iu(e){let t,n,o,r,i,s;function a(){return e[17](e[31])}function l(){return e[18](e[31])}return{c(){t=m("div"),n=m("button"),n.textContent="Editar",o=w(),r=m("button"),r.textContent="Eliminar",d(n,"class","btn-action btn-edit svelte-180pvw6"),d(r,"class","btn-action btn-delete svelte-180pvw6"),d(t,"class","actions-cell svelte-180pvw6")},m(u,f){D(u,t,f),c(t,n),c(t,o),c(t,r),i||(s=[I(n,"click",a),I(r,"click",l)],i=!0)},p(u,f){e=u},i:ce,o:ce,d(u){u&&M(t),i=!1,Ie(s)}}}function hi(e){let t,n,o,r,i,s;const a=[iu,ru,ou,nu,tu,eu,Yc],l=[];function u(h,g){var p,_,v,b,S,C,y,R;return(p=h[34].column.columnDef.meta)!=null&&p.isAction?0:(_=h[34].column.columnDef.meta)!=null&&_.isExecuteAction?1:(v=h[34].column.columnDef.meta)!=null&&v.isCvAction?2:(b=h[34].column.columnDef.meta)!=null&&b.isImageAction?3:(S=h[34].column.columnDef.meta)!=null&&S.isOrigin||(C=h[34].column.columnDef.meta)!=null&&C.isCondition?4:(y=h[34].column.columnDef.meta)!=null&&y.isStatus||(R=h[34].column.columnDef.meta)!=null&&R.isDateStatus?5:6}function f(h,g){return g===4?Jc(h):g===5?Xc(h):h}return n=u(e),o=l[n]=a[n](f(e,n)),{c(){var h,g,p,_;t=m("td"),o.c(),d(t,"key",r=e[34].id),d(t,"class",i=bn(((h=e[34].column.columnDef.meta)==null?void 0:h.cellClass)||"")+" svelte-180pvw6"),Fe(t,"multiline",(g=e[34].column.columnDef.meta)==null?void 0:g.isMultiline),Fe(t,"status-cell",((p=e[34].column.columnDef.meta)==null?void 0:p.isStatus)||((_=e[34].column.columnDef.meta)==null?void 0:_.isDateStatus))},m(h,g){D(h,t,g),l[n].m(t,null),s=!0},p(h,g){var _,v,b,S;let p=n;n=u(h),n===p?l[n].p(f(h,n),g):(Ne(),J(l[p],1,1,()=>{l[p]=null}),Pe(),o=l[n],o?o.p(f(h,n),g):(o=l[n]=a[n](f(h,n)),o.c()),B(o,1),o.m(t,null)),(!s||g[0]&128&&r!==(r=h[34].id))&&d(t,"key",r),(!s||g[0]&128&&i!==(i=bn(((_=h[34].column.columnDef.meta)==null?void 0:_.cellClass)||"")+" svelte-180pvw6"))&&d(t,"class",i),(!s||g[0]&128)&&Fe(t,"multiline",(v=h[34].column.columnDef.meta)==null?void 0:v.isMultiline),(!s||g[0]&128)&&Fe(t,"status-cell",((b=h[34].column.columnDef.meta)==null?void 0:b.isStatus)||((S=h[34].column.columnDef.meta)==null?void 0:S.isDateStatus))},i(h){s||(B(o),s=!0)},o(h){J(o),s=!1},d(h){h&&M(t),l[n].d()}}}function pi(e){let t,n,o,r,i=ut(e[31].getVisibleCells()),s=[];for(let l=0;l<i.length;l+=1)s[l]=hi(li(e,i,l));const a=l=>J(s[l],1,1,()=>{s[l]=null});return{c(){var l,u;t=m("tr");for(let f=0;f<s.length;f+=1)s[f].c();n=w(),d(t,"key",o=e[31].id),d(t,"class","svelte-180pvw6"),Fe(t,"unexpected-row",e[31].original.isUnexpected),Fe(t,"pending-row",((u=(l=e[31].original.order)==null?void 0:l.status)==null?void 0:u.toLowerCase())==="pending")},m(l,u){D(l,t,u);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(t,null);c(t,n),r=!0},p(l,u){var f,h;if(u[0]&1664){i=ut(l[31].getVisibleCells());let g;for(g=0;g<i.length;g+=1){const p=li(l,i,g);s[g]?(s[g].p(p,u),B(s[g],1)):(s[g]=hi(p),s[g].c(),B(s[g],1),s[g].m(t,n))}for(Ne(),g=i.length;g<s.length;g+=1)a(g);Pe()}(!r||u[0]&128&&o!==(o=l[31].id))&&d(t,"key",o),(!r||u[0]&128)&&Fe(t,"unexpected-row",l[31].original.isUnexpected),(!r||u[0]&128)&&Fe(t,"pending-row",((h=(f=l[31].original.order)==null?void 0:f.status)==null?void 0:h.toLowerCase())==="pending")},i(l){if(!r){for(let u=0;u<i.length;u+=1)B(s[u]);r=!0}},o(l){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)J(s[u]);r=!1},d(l){l&&M(t),Mn(s,l)}}}function su(e){let t;return{c(){t=m("option"),t.textContent=`Mostrar ${e[28]}`,t.__value=e[28],Q(t,t.__value)},m(n,o){D(n,t,o)},p:ce,d(n){n&&M(t)}}}function lu(e){let t,n,o,r,i,s,a,l,u,f,h,g,p,_,v,b,S=e[7].getRowModel().rows.length+"",C,y,R,T,L,O,H,$,X,te,Z,Y,le,ue,pe,U,N,ne,re,x=(e[0]>0?e[1]+1:0)+"",K,W,A,G,ae,Se,Ae,ye,be,he,fe,ie,Re,we,E=ut(e[7].getHeaderGroups()),k=[];for(let P=0;P<E.length;P+=1)k[P]=fi(ai(e,E,P));const F=P=>J(k[P],1,1,()=>{k[P]=null});let V=ut(e[7].getRowModel().rows),j=[];for(let P=0;P<V.length;P+=1)j[P]=pi(si(e,V,P));const q=P=>J(j[P],1,1,()=>{j[P]=null});let Ce=ut([10,20,30,50,100,250]),ee=[];for(let P=0;P<6;P+=1)ee[P]=su(Kc(e,Ce,P));return{c(){t=m("div"),n=m("div"),o=m("div"),r=m("label"),r.textContent="Filtrar:",i=w(),s=m("input"),a=w(),l=m("div"),u=m("table"),f=m("thead");for(let P=0;P<k.length;P+=1)k[P].c();h=w(),g=m("tbody");for(let P=0;P<j.length;P+=1)j[P].c();p=w(),_=m("div"),v=m("span"),b=z("Mostrando "),C=z(S),y=z(" de "),R=z(e[3]),T=z(" registros"),L=w(),O=m("div"),H=m("select");for(let P=0;P<6;P+=1)ee[P].c();$=w(),X=m("button"),te=z("« Primero"),Y=w(),le=m("button"),ue=z("‹ Anterior"),U=w(),N=m("span"),ne=z(`Página
        `),re=m("strong"),K=z(x),W=z(" de "),A=z(e[0]),G=w(),ae=m("button"),Se=z("Siguiente ›"),ye=w(),be=m("button"),he=z("Último »"),d(r,"for","search-input"),d(s,"id","search-input"),d(s,"type","text"),d(s,"placeholder","Buscar en toda la tabla..."),d(s,"class","search-input svelte-180pvw6"),d(o,"class","filter-group svelte-180pvw6"),d(n,"class","controls-container svelte-180pvw6"),d(u,"class","data-grid svelte-180pvw6"),Fe(u,"fixed",e[4]),d(l,"class","table-container svelte-180pvw6"),d(v,"class","record-count svelte-180pvw6"),d(H,"class","svelte-180pvw6"),X.disabled=Z=e[1]===0,d(X,"class","svelte-180pvw6"),le.disabled=pe=e[1]===0,d(le,"class","svelte-180pvw6"),ae.disabled=Ae=e[1]>=e[0]-1,d(ae,"class","svelte-180pvw6"),be.disabled=fe=e[1]>=e[0]-1,d(be,"class","svelte-180pvw6"),d(O,"class","pagination-controls svelte-180pvw6"),d(_,"class","footer-controls svelte-180pvw6"),d(t,"class","data-grid-wrapper svelte-180pvw6")},m(P,se){D(P,t,se),c(t,n),c(n,o),c(o,r),c(o,i),c(o,s),Q(s,e[5]),c(t,a),c(t,l),c(l,u),c(u,f);for(let oe=0;oe<k.length;oe+=1)k[oe]&&k[oe].m(f,null);c(u,h),c(u,g);for(let oe=0;oe<j.length;oe+=1)j[oe]&&j[oe].m(g,null);c(t,p),c(t,_),c(_,v),c(v,b),c(v,C),c(v,y),c(v,R),c(v,T),c(_,L),c(_,O),c(O,H);for(let oe=0;oe<6;oe+=1)ee[oe]&&ee[oe].m(H,null);Nt(H,e[2]),c(O,$),c(O,X),c(X,te),c(O,Y),c(O,le),c(le,ue),c(O,U),c(O,N),c(N,ne),c(N,re),c(re,K),c(re,W),c(re,A),c(O,G),c(O,ae),c(ae,Se),c(O,ye),c(O,be),c(be,he),ie=!0,Re||(we=[I(s,"input",e[16]),I(H,"change",e[12]),I(X,"click",e[23]),I(le,"click",e[24]),I(ae,"click",e[25]),I(be,"click",e[26])],Re=!0)},p(P,se){if(se[0]&32&&s.value!==P[5]&&Q(s,P[5]),se[0]&144){E=ut(P[7].getHeaderGroups());let oe;for(oe=0;oe<E.length;oe+=1){const de=ai(P,E,oe);k[oe]?(k[oe].p(de,se),B(k[oe],1)):(k[oe]=fi(de),k[oe].c(),B(k[oe],1),k[oe].m(f,null))}for(Ne(),oe=E.length;oe<k.length;oe+=1)F(oe);Pe()}if(se[0]&1664){V=ut(P[7].getRowModel().rows);let oe;for(oe=0;oe<V.length;oe+=1){const de=si(P,V,oe);j[oe]?(j[oe].p(de,se),B(j[oe],1)):(j[oe]=pi(de),j[oe].c(),B(j[oe],1),j[oe].m(g,null))}for(Ne(),oe=V.length;oe<j.length;oe+=1)q(oe);Pe()}(!ie||se[0]&16)&&Fe(u,"fixed",P[4]),(!ie||se[0]&128)&&S!==(S=P[7].getRowModel().rows.length+"")&&ve(C,S),(!ie||se[0]&8)&&ve(R,P[3]),(!ie||se[0]&4)&&Nt(H,P[2]),(!ie||se[0]&2&&Z!==(Z=P[1]===0))&&(X.disabled=Z),(!ie||se[0]&2&&pe!==(pe=P[1]===0))&&(le.disabled=pe),(!ie||se[0]&3)&&x!==(x=(P[0]>0?P[1]+1:0)+"")&&ve(K,x),(!ie||se[0]&1)&&ve(A,P[0]),(!ie||se[0]&3&&Ae!==(Ae=P[1]>=P[0]-1))&&(ae.disabled=Ae),(!ie||se[0]&3&&fe!==(fe=P[1]>=P[0]-1))&&(be.disabled=fe)},i(P){if(!ie){for(let se=0;se<E.length;se+=1)B(k[se]);for(let se=0;se<V.length;se+=1)B(j[se]);ie=!0}},o(P){k=k.filter(Boolean);for(let se=0;se<k.length;se+=1)J(k[se]);j=j.filter(Boolean);for(let se=0;se<j.length;se+=1)J(j[se]);ie=!1},d(P){P&&M(t),Mn(k,P),Mn(j,P),Mn(ee,P),Re=!1,Ie(we)}}}function au(e){const t=String(e||"").toLowerCase();return t.includes("óptimo")||t.includes("optimo")?"status-optimo":t.includes("regular")?"status-regular":t.includes("malo")?"status-malo":"status-unknown"}function cu(e){if(!e||typeof e!="string")return"status-unknown";const t=e.split("-");let n;if(t.length===2){const i=parseInt(t[0],10),s=parseInt(t[1],10);n=new Date(i,s,0)}else n=new Date(e);n.setHours(23,59,59,999);const o=new Date;o.setHours(0,0,0,0);const r=new Date;return r.setMonth(r.getMonth()+2),n<o?"status-malo":n<=r?"status-regular":"status-optimo"}function gi(e){const t=String(e.getContext().getValue()||"").toLowerCase(),n=e.column.columnDef.meta;if(n!=null&&n.isOrigin){if(t.includes("inspección"))return"origin-inspeccion";if(t.includes("imprevisto"))return"origin-imprevisto"}if(n!=null&&n.isCondition){if(t.includes("malo"))return"condition-malo";if(t.includes("regular"))return"condition-regular";if(t.includes("óptimo")||t.includes("optimo"))return"condition-optimo"}return""}function uu(e,t,n){let o,r,i,s=ce,a=()=>(s(),s=wo(o,U=>n(7,i=U)),o);e.$$.on_destroy.push(()=>s());let{columns:l=[]}=t,{data:u=[]}=t,{totalPages:f=0}=t,{currentPage:h=0}=t,{pageSize:g=20}=t,{totalElements:p=0}=t,{fixedLayout:_=!1}=t;const v=sn(),b=Pt("");bt(e,b,U=>n(5,r=U));let S=[];function C(U,N){v("action",{type:U,data:N})}function y(U,N){v("cellContextMenu",{row:U,columnDef:N})}function R(U){U>=0&&U<f&&v("pageChange",U)}function T(U){v("sizeChange",Number(U.target.value))}function L(){r=this.value,b.set(r)}const O=U=>C("edit",U.original),H=U=>C("delete",U.original),$=U=>C("execute",U.original),X=U=>C("cv",U.original),te=U=>C("view_images",U.original),Z=(U,N)=>y(U.original,N.column.columnDef),Y=()=>R(0),le=()=>R(h-1),ue=()=>R(h+1),pe=()=>R(f-1);return e.$$set=U=>{"columns"in U&&n(13,l=U.columns),"data"in U&&n(14,u=U.data),"totalPages"in U&&n(0,f=U.totalPages),"currentPage"in U&&n(1,h=U.currentPage),"pageSize"in U&&n(2,g=U.pageSize),"totalElements"in U&&n(3,p=U.totalElements),"fixedLayout"in U&&n(4,_=U.fixedLayout)},e.$$.update=()=>{e.$$.dirty[0]&57376&&a(n(6,o=Gc({data:u,columns:l,state:{get globalFilter(){return r},sorting:S},onGlobalFilterChange:b.set,onSortingChange:U=>{n(15,S=typeof U=="function"?U(S):U)},getCoreRowModel:Mc(),getFilteredRowModel:$c(),getSortedRowModel:Lc()})))},[f,h,g,p,_,r,o,i,b,C,y,R,T,l,u,S,L,O,H,$,X,te,Z,Y,le,ue,pe]}class Bt extends xe{constructor(t){super(),Xe(this,t,uu,lu,We,{columns:13,data:14,totalPages:0,currentPage:1,pageSize:2,totalElements:3,fixedLayout:4},null,[-1,-1])}}function du(e){let t;return{c(){t=m("div"),d(t,"class","spinner svelte-qudc1k")},m(n,o){D(n,t,o)},p:ce,i:ce,o:ce,d(n){n&&M(t)}}}class Ft extends xe{constructor(t){super(),Xe(this,t,null,du,We,{})}}const fu=[{accessorFn:e=>e.order.date?new Date(e.order.date).toLocaleDateString("es-CO"):"N/A",id:"fecha",header:"Fecha"},{accessorFn:e=>e.machine?`${e.machine.name} - ${e.machine.model} - ${e.machine.numInterIdentification}`:"N/A",id:"maquina",header:"Máquina"},{accessorFn:e=>e.order.description?e.order.description.split("|")[0]:"",id:"origen",header:"Origen",meta:{isOrigin:!0}},{accessorFn:e=>e.order.description?e.order.description.split("|")[1]:"",id:"sector",header:"Sector"},{accessorFn:e=>e.order.description?e.order.description.split("|")[2]:"",id:"condicion",header:"Condición",meta:{isCondition:!0}},{accessorFn:e=>e.order.description?e.order.description.split("|")[3]:"",id:"detalle",header:"Detalle",meta:{isMultiline:!0}},{accessorFn:e=>e.order.description?e.order.description.split("|")[4]:"",id:"tarea_asignada_a",header:"Tarea Asignada a"},{accessorFn:e=>e.order.status,id:"status",header:"Estado"},{accessorFn:e=>e.order.assignerUser?e.order.assignerUser.fullName:"N/A",id:"asignado_por",header:"Asignado por"},{id:"execute",header:"Ejecutar Orden",meta:{isExecuteAction:!0}}],hu=[{accessorKey:"name",header:"Nombre",size:150},{accessorKey:"brand",header:"Marca",size:100},{accessorKey:"model",header:"Modelo",size:100},{accessorKey:"numInterIdentification",header:"Núm. Identificación",size:150},{accessorKey:"numEngine",header:"Núm. Motor",size:120},{accessorFn:e=>e.belongsTo==="distrito"?"Distrito":"Asociación",id:"belongsTo",header:"Pertenece a",size:100},{accessorFn:e=>e.soat?new Date(e.soat+"T00:00:00").toLocaleDateString("es-CO"):"N/A",id:"soat",header:"SOAT",size:100},{accessorFn:e=>e.runt?new Date(e.runt+"T00:00:00").toLocaleDateString("es-CO"):"N/A",id:"runt",header:"RUNT",size:100},{id:"curriculum",header:"Hoja de Vida",size:120,meta:{isCvAction:!0}},{id:"actions",header:"Acciones",size:120,meta:{isAction:!0}}],pu=[{accessorFn:e=>new Date(e.dateStamp+"Z").toLocaleDateString("es-CO",{timeZone:"America/Bogota"}),id:"fecha",header:"Fecha"},{accessorFn:e=>new Date(e.dateStamp+"Z").toLocaleTimeString("en-GB",{timeZone:"America/Bogota"}),id:"hora",header:"Hora"},{accessorFn:e=>`${e.machine.name} ${e.machine.model} ${e.machine.numInterIdentification}`,id:"maquina",header:"MÁQUINA"},{accessorKey:"hourMeter",header:"Horómetro",size:80},{accessorKey:"leakStatus",header:"Fugas Sistema",meta:{isStatus:!0}},{accessorKey:"brakeStatus",header:"Sistema Frenos",meta:{isStatus:!0}},{accessorKey:"beltsPulleysStatus",header:"Correas y Poleas",meta:{isStatus:!0}},{accessorKey:"tireLanesStatus",header:"Llantas/ Carriles",meta:{isStatus:!0}},{accessorKey:"carIgnitionStatus",header:"Sistema Encendido",meta:{isStatus:!0}},{accessorKey:"electricalStatus",header:"Sistema Eléctrico",meta:{isStatus:!0}},{accessorKey:"mechanicalStatus",header:"Sistema Mecánico",meta:{isStatus:!0}},{accessorKey:"temperatureStatus",header:"Nivel Temperatura",meta:{isStatus:!0}},{accessorKey:"oilStatus",header:"Nivel Aceite",meta:{isStatus:!0}},{accessorKey:"hydraulicStatus",header:"Nivel Hidráulico",meta:{isStatus:!0}},{accessorKey:"coolantStatus",header:"Nivel Refrigerante",meta:{isStatus:!0}},{accessorKey:"structuralStatus",header:"Estado Estructural",meta:{isStatus:!0}},{accessorKey:"expirationDateFireExtinguisher",header:"Vigencia Extintor",meta:{isDateStatus:!0}},{accessorKey:"observations",header:"Observaciones/Detalles/Comentarios ",size:200,meta:{isMultiline:!0}},{accessorKey:"greasingAction",header:"Acción de Engrase"},{accessorKey:"greasingObservations",header:"Observaciones/Detalles/Comentarios de Engrase ",size:350,meta:{isMultiline:!0}},{accessorFn:e=>e.user.fullName,id:"responsable",header:"Responsable"},{id:"view_images",header:"Imágenes",meta:{isImageAction:!0}}];function gu(e){if(!e)return"N/A";const t=new Date(e+"Z"),n=t.toLocaleDateString("es-CO",{timeZone:"America/Bogota"}),o=t.toLocaleTimeString("en-GB",{timeZone:"America/Bogota"});return`${n} ${o}`}function mi(e){return e?new Date(e+"Z").toLocaleDateString("es-CO",{timeZone:"America/Bogota"}):"N/A"}const _i=e=>[{header:`Propiedad de ${e}`,columns:[{header:"Máquina",accessorFn:t=>t.machine.name,size:200},{header:"Horómetro Actual",accessorFn:t=>{var n;return((n=t.currentData)==null?void 0:n.currentHourMeter)??"N/A"},id:"horometro_actual",size:120},{header:"Última Actualización",accessorFn:t=>{var n;return gu((n=t.currentData)==null?void 0:n.lastUpdate)},id:"ultima_actualizacion",size:150}]},{header:"Aceite de Motor",columns:[{header:"Marca",size:60,accessorFn:t=>{var n,o;return((o=(n=t.consolidateMotorOil)==null?void 0:n.brand)==null?void 0:o.name)??"N/A"},id:"motor_marca",meta:{cellClass:"motor-oil-cell"}},{header:"Cant.",size:60,accessorFn:t=>{var n;return((n=t.consolidateMotorOil)==null?void 0:n.quantity)??"N/A"},id:"motor_cantidad",meta:{cellClass:"motor-oil-cell"}},{header:"Prom. Cambio",size:80,accessorFn:t=>{var n;return((n=t.consolidateMotorOil)==null?void 0:n.averageChangeHours)??"N/A"},id:"motor_promedio_cambio",meta:{cellClass:"motor-oil-cell"}},{header:"Fecha Últ. Cambio",size:100,accessorFn:t=>{var n;return mi((n=t.consolidateMotorOil)==null?void 0:n.dateLastUpdate)},id:"motor_fecha_ultimo_cambio",meta:{cellClass:"motor-oil-cell"}},{header:"Horómetro Últ. Cambio",size:100,accessorFn:t=>{var n;return((n=t.consolidateMotorOil)==null?void 0:n.hourMeterLastUpdate)??"N/A"},id:"motor_horometro_ultimo_cambio",meta:{cellClass:"motor-oil-cell"}},{header:"Próximo Cambio",size:80,accessorFn:t=>{var n;return((n=t.consolidateMotorOil)==null?void 0:n.hourMeterNextUpdate)??"N/A"},id:"motor_proximo_cambio",meta:{cellClass:"motor-oil-cell"}},{header:"Tiempo Últ. Cambio",size:100,accessorFn:t=>{var n;return((n=t.consolidateMotorOil)==null?void 0:n.timeLastUpdateMouths)??"N/A"},id:"motor_tiempo_ultimo_cambio",meta:{cellClass:"motor-oil-cell"}},{header:"Horas Restantes",size:80,accessorFn:t=>{var n;return((n=t.consolidateMotorOil)==null?void 0:n.remainingHoursNextUpdateMouths)??"N/A"},id:"motor_horas_restantes",meta:{cellClass:"motor-oil-cell"}}]},{header:"Aceite Hidráulico",columns:[{header:"Marca",size:60,accessorFn:t=>{var n,o;return((o=(n=t.consolidateHydraulicOil)==null?void 0:n.brand)==null?void 0:o.name)??"N/A"},id:"hidraulico_marca",meta:{cellClass:"hydraulic-oil-cell"}},{header:"Cant.",size:60,accessorFn:t=>{var n;return((n=t.consolidateHydraulicOil)==null?void 0:n.quantity)??"N/A"},id:"hidraulico_cantidad",meta:{cellClass:"hydraulic-oil-cell"}},{header:"Prom. Cambio",size:80,accessorFn:t=>{var n;return((n=t.consolidateHydraulicOil)==null?void 0:n.averageChangeHours)??"N/A"},id:"hidraulico_promedio_cambio",meta:{cellClass:"hydraulic-oil-cell"}},{header:"Fecha Últ. Cambio",size:100,accessorFn:t=>{var n;return mi((n=t.consolidateHydraulicOil)==null?void 0:n.dateLastUpdate)},id:"hidraulico_fecha_ultimo_cambio",meta:{cellClass:"hydraulic-oil-cell"}},{header:"Horómetro Últ. Cambio",size:100,accessorFn:t=>{var n;return((n=t.consolidateHydraulicOil)==null?void 0:n.hourMeterLastUpdate)??"N/A"},id:"hidraulico_horometro_ultimo_cambio",meta:{cellClass:"hydraulic-oil-cell"}},{header:"Próximo Cambio",size:80,accessorFn:t=>{var n;return((n=t.consolidateHydraulicOil)==null?void 0:n.hourMeterNextUpdate)??"N/A"},id:"hidraulico_proximo_cambio",meta:{cellClass:"hydraulic-oil-cell"}},{header:"Tiempo Últ. Cambio",size:100,accessorFn:t=>{var n;return((n=t.consolidateHydraulicOil)==null?void 0:n.timeLastUpdateMouths)??"N/A"},id:"hidraulico_tiempo_ultimo_cambio",meta:{cellClass:"hydraulic-oil-cell"}},{header:"Horas Restantes",size:80,accessorFn:t=>{var n;return((n=t.consolidateHydraulicOil)==null?void 0:n.remainingHoursNextUpdateMouths)??"N/A"},id:"hidraulico_horas_restantes",meta:{cellClass:"hydraulic-oil-cell"}}]}],mu=[{accessorKey:"id",header:"ID",size:40},{accessorKey:"username",header:"Usuario",size:100},{accessorKey:"email",header:"Gmail",size:150},{accessorKey:"fullName",header:"Nombre Completo",size:150},{accessorKey:"role",header:"Rol",size:80},{id:"actions",header:"Acciones",size:120,meta:{isAction:!0}}],qo=e=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e||0),_u=[{accessorFn:e=>e.date?new Date(e.date).toLocaleDateString("es-CO"):"N/A",id:"fecha",header:"FECHA"},{header:"MANTENIMIENTO",columns:[{accessorKey:"description",header:"Descripción",size:300,meta:{isMultiline:!0}},{header:"REPUESTOS",columns:[{accessorFn:e=>{var t;return((t=e.sparePart)==null?void 0:t.ref)||"N/A"},id:"repuesto_ref",header:"REF. (#)",size:150},{accessorFn:e=>{var t;return((t=e.sparePart)==null?void 0:t.name)||"N/A"},id:"repuesto_nombre",header:"NOMBRE",size:200},{accessorFn:e=>{var t;return((t=e.sparePart)==null?void 0:t.quantity)||0},id:"repuesto_cantidad",header:"CANTIDAD",size:80},{accessorFn:e=>{var t;return qo((t=e.sparePart)==null?void 0:t.price)},id:"repuesto_valor",header:"VALOR ($)",size:120}]}]},{header:"MANO DE OBRA",columns:[{accessorFn:e=>{var t;return(t=e.labor)!=null&&t.user?e.labor.user.fullName:"N/A"},id:"mecanico_planta",header:"MECÁNICO DE PLANTA",size:150},{accessorFn:e=>{var t;return((t=e.labor)==null?void 0:t.contractor)||"N/A"},id:"mecanico_contratado",header:"CONTRATADA",size:150},{accessorKey:"timeSpent",header:"TIEMPO EMPLEADO",size:100},{accessorFn:e=>{var t;return qo((t=e.labor)==null?void 0:t.price)},id:"mano_obra_valor",header:"VALOR ($)",size:120}]},{accessorFn:e=>qo(e.totalPrice),id:"valor_total",header:"VALOR TOTAL (Repuestos + M. de O)",size:150}];function vu(e){let t,n,o,r,i,s,a,l,u,f,h,g,p,_,v,b,S,C,y,R,T,L,O,H=e[10]?"Creando...":"Crear",$,X,te,Z,Y,le,ue,pe;function U(A,G){return A[8]?Cu:wu}let N=U(e),ne=N(e);function re(A,G){return A[8]?yu:Su}let x=re(e),K=x(e),W=e[11]&&vi(e);return Y=new Bt({props:{columns:mu,data:e[0]}}),Y.$on("action",e[16]),{c(){t=m("div"),n=m("div"),o=m("button"),o.textContent="Refrescar información",r=w(),i=m("div"),s=m("h3"),s.textContent="Crear Nuevo Usuario",a=w(),l=m("form"),u=m("input"),f=w(),h=m("input"),g=w(),p=m("input"),_=w(),v=m("div"),ne.c(),b=w(),S=m("button"),K.c(),C=w(),y=m("select"),R=m("option"),R.textContent="ADMIN",T=m("option"),T.textContent="MECANIC",L=w(),O=m("button"),$=z(H),X=w(),W&&W.c(),te=w(),Z=m("div"),Te(Y.$$.fragment),d(o,"class","btn-refresh svelte-1acdicn"),d(n,"class","refresh-container svelte-1acdicn"),d(s,"class","svelte-1acdicn"),d(u,"type","text"),d(u,"placeholder","Nombre de usuario"),u.required=!0,u.disabled=e[10],d(u,"class","svelte-1acdicn"),d(h,"type","email"),d(h,"placeholder","Gmail"),h.disabled=e[10],d(h,"class","svelte-1acdicn"),d(p,"type","text"),d(p,"placeholder","Nombre completo"),p.required=!0,p.disabled=e[10],d(p,"class","svelte-1acdicn"),d(S,"type","button"),d(S,"class","toggle-password svelte-1acdicn"),d(v,"class","password-wrapper svelte-1acdicn"),R.__value="ADMIN",Q(R,R.__value),T.__value="MECANIC",Q(T,T.__value),y.required=!0,y.disabled=e[10],d(y,"class","svelte-1acdicn"),e[12].role===void 0&&rn(()=>e[28].call(y)),d(O,"type","submit"),d(O,"class","btn-create svelte-1acdicn"),O.disabled=e[10],d(l,"class","create-form svelte-1acdicn"),d(i,"class","form-container svelte-1acdicn"),d(Z,"class","table-wrapper svelte-1acdicn"),d(t,"class","management-container svelte-1acdicn")},m(A,G){D(A,t,G),c(t,n),c(n,o),c(t,r),c(t,i),c(i,s),c(i,a),c(i,l),c(l,u),Q(u,e[12].username),c(l,f),c(l,h),Q(h,e[12].email),c(l,g),c(l,p),Q(p,e[12].fullName),c(l,_),c(l,v),ne.m(v,null),c(v,b),c(v,S),K.m(S,null),c(l,C),c(l,y),c(y,R),c(y,T),Nt(y,e[12].role,!0),c(l,L),c(l,O),c(O,$),c(i,X),W&&W.m(i,null),c(t,te),c(t,Z),Ee(Y,Z,null),le=!0,ue||(pe=[I(o,"click",e[21]),I(u,"input",e[22]),I(h,"input",e[23]),I(p,"input",e[24]),I(S,"click",e[27]),I(y,"change",e[28]),I(l,"submit",e[13])],ue=!0)},p(A,G){(!le||G[0]&1024)&&(u.disabled=A[10]),G[0]&4096&&u.value!==A[12].username&&Q(u,A[12].username),(!le||G[0]&1024)&&(h.disabled=A[10]),G[0]&4096&&h.value!==A[12].email&&Q(h,A[12].email),(!le||G[0]&1024)&&(p.disabled=A[10]),G[0]&4096&&p.value!==A[12].fullName&&Q(p,A[12].fullName),N===(N=U(A))&&ne?ne.p(A,G):(ne.d(1),ne=N(A),ne&&(ne.c(),ne.m(v,b))),x!==(x=re(A))&&(K.d(1),K=x(A),K&&(K.c(),K.m(S,null))),(!le||G[0]&1024)&&(y.disabled=A[10]),G[0]&4096&&Nt(y,A[12].role),(!le||G[0]&1024)&&H!==(H=A[10]?"Creando...":"Crear")&&ve($,H),(!le||G[0]&1024)&&(O.disabled=A[10]),A[11]?W?W.p(A,G):(W=vi(A),W.c(),W.m(i,null)):W&&(W.d(1),W=null);const ae={};G[0]&1&&(ae.data=A[0]),Y.$set(ae)},i(A){le||(B(Y.$$.fragment,A),le=!0)},o(A){J(Y.$$.fragment,A),le=!1},d(A){A&&M(t),ne.d(),K.d(),W&&W.d(),ke(Y),ue=!1,Ie(pe)}}}function bu(e){let t,n,o,r,i;return n=new Ft({}),{c(){t=m("div"),Te(n.$$.fragment),o=w(),r=m("p"),r.textContent="Cargando usuarios...",d(t,"class","loader-container svelte-1acdicn")},m(s,a){D(s,t,a),Ee(n,t,null),c(t,o),c(t,r),i=!0},p:ce,i(s){i||(B(n.$$.fragment,s),i=!0)},o(s){J(n.$$.fragment,s),i=!1},d(s){s&&M(t),ke(n)}}}function wu(e){let t,n,o;return{c(){t=m("input"),d(t,"type","password"),d(t,"placeholder","Contraseña"),t.required=!0,t.disabled=e[10],d(t,"class","svelte-1acdicn")},m(r,i){D(r,t,i),Q(t,e[12].password),n||(o=I(t,"input",e[26]),n=!0)},p(r,i){i[0]&1024&&(t.disabled=r[10]),i[0]&4096&&t.value!==r[12].password&&Q(t,r[12].password)},d(r){r&&M(t),n=!1,o()}}}function Cu(e){let t,n,o;return{c(){t=m("input"),d(t,"type","text"),d(t,"placeholder","Contraseña"),t.required=!0,t.disabled=e[10],d(t,"class","svelte-1acdicn")},m(r,i){D(r,t,i),Q(t,e[12].password),n||(o=I(t,"input",e[25]),n=!0)},p(r,i){i[0]&1024&&(t.disabled=r[10]),i[0]&4096&&t.value!==r[12].password&&Q(t,r[12].password)},d(r){r&&M(t),n=!1,o()}}}function Su(e){let t,n;return{c(){t=dt("svg"),n=dt("path"),d(n,"d","M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"viewBox","0 0 24 24"),d(t,"class","svelte-1acdicn")},m(o,r){D(o,t,r),c(t,n)},d(o){o&&M(t)}}}function yu(e){let t,n;return{c(){t=dt("svg"),n=dt("path"),d(n,"d","M2,5.27L3.28,4L20,20.72L18.73,22L15.65,18.92C14.5,19.3 13.28,19.5 12,19.5C7,19.5 2.73,16.39 1,12C1.69,10.24 2.79,8.69 4.19,7.45L2,5.27M12,9A3,3 0 0,1 15,12C15,12.35 14.94,12.69 14.83,13L11,9.17C11.31,9.06 11.65,9 12,9M12,4.5C17,4.5 21.27,7.61 23,12C22.18,14.08 20.79,15.88 19,17.19L17.58,15.77C18.91,14.82 19.96,13.53 20.58,12C19.27,9.11 15.9,7 12,7C10.91,7 9.89,7.16 8.94,7.45L7.33,5.82C8.75,5.06 10.32,4.5 12,4.5M3.42,9.08L5.61,11.27C5.58,11.5 5.56,11.75 5.56,12A3.04,3.04 0 0,0 8.6,15.04L10.05,16.5C8.38,17.21 6.36,17.5 4.42,17.29C5.53,15.86 6.32,14.11 6.63,12.57L3.42,9.08Z"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"viewBox","0 0 24 24"),d(t,"class","svelte-1acdicn")},m(o,r){D(o,t,r),c(t,n)},d(o){o&&M(t)}}}function vi(e){let t,n;return{c(){t=m("p"),n=z(e[11]),d(t,"class","error-message svelte-1acdicn")},m(o,r){D(o,t,r),c(t,n)},p(o,r){r[0]&2048&&ve(n,o[11])},d(o){o&&M(t)}}}function bi(e){let t,n,o,r,i,s,a,l,u,f,h,g,p,_,v,b,S,C,y,R,T,L,O,H,$,X,te,Z=e[10]?"Guardando...":"Guardar Cambios",Y,le,ue;function pe(W,A){return W[9]?ku:Eu}let U=pe(e),N=U(e);function ne(W,A){return W[9]?Tu:Ru}let re=ne(e),x=re(e),K=e[11]&&wi(e);return{c(){t=m("div"),n=m("div"),o=m("div"),r=m("h3"),r.textContent="Editar Usuario",i=w(),s=m("button"),s.textContent="×",a=w(),l=m("form"),u=m("label"),f=z("Usuario: "),h=m("input"),g=w(),p=m("label"),_=z("Gmail: "),v=m("input"),b=w(),S=m("label"),C=z(`Nueva Contraseña:
            `),y=m("div"),N.c(),R=w(),T=m("button"),x.c(),L=w(),K&&K.c(),O=w(),H=m("div"),$=m("button"),$.textContent="Cancelar",X=w(),te=m("button"),Y=z(Z),d(r,"class","svelte-1acdicn"),d(s,"class","close-btn svelte-1acdicn"),d(o,"class","modal-header svelte-1acdicn"),d(h,"type","text"),h.required=!0,d(h,"class","svelte-1acdicn"),d(u,"class","svelte-1acdicn"),d(v,"type","email"),d(v,"class","svelte-1acdicn"),d(p,"class","svelte-1acdicn"),d(T,"type","button"),d(T,"class","toggle-password svelte-1acdicn"),d(y,"class","password-wrapper svelte-1acdicn"),d(S,"class","svelte-1acdicn"),d($,"type","button"),d($,"class","btn-cancel svelte-1acdicn"),d(te,"type","submit"),d(te,"class","btn-save svelte-1acdicn"),te.disabled=e[10],d(H,"class","modal-actions svelte-1acdicn"),d(l,"class","modal-form svelte-1acdicn"),d(n,"class","modal-content svelte-1acdicn"),d(t,"class","modal-overlay svelte-1acdicn")},m(W,A){D(W,t,A),c(t,n),c(n,o),c(o,r),c(o,i),c(o,s),c(n,a),c(n,l),c(l,u),c(u,f),c(u,h),Q(h,e[5].username),c(l,g),c(l,p),c(p,_),c(p,v),Q(v,e[5].email),c(l,b),c(l,S),c(S,C),c(S,y),N.m(y,null),c(y,R),c(y,T),x.m(T,null),c(l,L),K&&K.m(l,null),c(l,O),c(l,H),c(H,$),c(H,X),c(H,te),c(te,Y),le||(ue=[I(s,"click",e[18]),I(h,"input",e[29]),I(v,"input",e[30]),I(T,"click",e[33]),I($,"click",e[18]),I(l,"submit",e[14]),I(n,"click",pt(e[20]))],le=!0)},p(W,A){A[0]&32&&h.value!==W[5].username&&Q(h,W[5].username),A[0]&32&&v.value!==W[5].email&&Q(v,W[5].email),U===(U=pe(W))&&N?N.p(W,A):(N.d(1),N=U(W),N&&(N.c(),N.m(y,R))),re!==(re=ne(W))&&(x.d(1),x=re(W),x&&(x.c(),x.m(T,null))),W[11]?K?K.p(W,A):(K=wi(W),K.c(),K.m(l,O)):K&&(K.d(1),K=null),A[0]&1024&&Z!==(Z=W[10]?"Guardando...":"Guardar Cambios")&&ve(Y,Z),A[0]&1024&&(te.disabled=W[10])},d(W){W&&M(t),N.d(),x.d(),K&&K.d(),le=!1,Ie(ue)}}}function Eu(e){let t,n,o;return{c(){t=m("input"),d(t,"type","password"),d(t,"placeholder","Dejar en blanco para no cambiar"),d(t,"class","svelte-1acdicn")},m(r,i){D(r,t,i),Q(t,e[7]),n||(o=I(t,"input",e[32]),n=!0)},p(r,i){i[0]&128&&t.value!==r[7]&&Q(t,r[7])},d(r){r&&M(t),n=!1,o()}}}function ku(e){let t,n,o;return{c(){t=m("input"),d(t,"type","text"),d(t,"placeholder","Dejar en blanco para no cambiar"),d(t,"class","svelte-1acdicn")},m(r,i){D(r,t,i),Q(t,e[7]),n||(o=I(t,"input",e[31]),n=!0)},p(r,i){i[0]&128&&t.value!==r[7]&&Q(t,r[7])},d(r){r&&M(t),n=!1,o()}}}function Ru(e){let t,n;return{c(){t=dt("svg"),n=dt("path"),d(n,"d","M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"viewBox","0 0 24 24"),d(t,"class","svelte-1acdicn")},m(o,r){D(o,t,r),c(t,n)},d(o){o&&M(t)}}}function Tu(e){let t,n;return{c(){t=dt("svg"),n=dt("path"),d(n,"d","M2,5.27L3.28,4L20,20.72L18.73,22L15.65,18.92C14.5,19.3 13.28,19.5 12,19.5C7,19.5 2.73,16.39 1,12C1.69,10.24 2.79,8.69 4.19,7.45L2,5.27M12,9A3,3 0 0,1 15,12C15,12.35 14.94,12.69 14.83,13L11,9.17C11.31,9.06 11.65,9 12,9M12,4.5C17,4.5 21.27,7.61 23,12C22.18,14.08 20.79,15.88 19,17.19L17.58,15.77C18.91,14.82 19.96,13.53 20.58,12C19.27,9.11 15.9,7 12,7C10.91,7 9.89,7.16 8.94,7.45L7.33,5.82C8.75,5.06 10.32,4.5 12,4.5M3.42,9.08L5.61,11.27C5.58,11.5 5.56,11.75 5.56,12A3.04,3.04 0 0,0 8.6,15.04L10.05,16.5C8.38,17.21 6.36,17.5 4.42,17.29C5.53,15.86 6.32,14.11 6.63,12.57L3.42,9.08Z"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"viewBox","0 0 24 24"),d(t,"class","svelte-1acdicn")},m(o,r){D(o,t,r),c(t,n)},d(o){o&&M(t)}}}function wi(e){let t,n;return{c(){t=m("p"),n=z(e[11]),d(t,"class","error-message svelte-1acdicn")},m(o,r){D(o,t,r),c(t,n)},p(o,r){r[0]&2048&&ve(n,o[11])},d(o){o&&M(t)}}}function Ci(e){let t,n,o,r,i,s,a=e[2].fullName+"",l,u,f,h,g,p,_,v,b=e[4]?"Sí, Eliminar":"Espere 3 segundos",S,C,y,R,T=e[11]&&Si(e);return{c(){t=m("div"),n=m("div"),o=m("h3"),o.textContent="Confirmar Eliminación",r=w(),i=m("p"),s=z('¿Está seguro que desea eliminar al usuario "'),l=z(a),u=z('"?'),f=w(),T&&T.c(),h=w(),g=m("div"),p=m("button"),p.textContent="Cancelar",_=w(),v=m("button"),S=z(b),d(o,"class","svelte-1acdicn"),d(p,"type","button"),d(p,"class","btn-cancel svelte-1acdicn"),d(v,"type","button"),d(v,"class","btn-delete svelte-1acdicn"),v.disabled=C=!e[4],d(g,"class","modal-actions svelte-1acdicn"),d(n,"class","modal-content confirmation svelte-1acdicn"),d(t,"class","modal-overlay svelte-1acdicn")},m(L,O){D(L,t,O),c(t,n),c(n,o),c(n,r),c(n,i),c(i,s),c(i,l),c(i,u),c(n,f),T&&T.m(n,null),c(n,h),c(n,g),c(g,p),c(g,_),c(g,v),c(v,S),y||(R=[I(p,"click",e[17]),I(v,"click",e[15]),I(n,"click",pt(e[19]))],y=!0)},p(L,O){O[0]&4&&a!==(a=L[2].fullName+"")&&ve(l,a),L[11]?T?T.p(L,O):(T=Si(L),T.c(),T.m(n,h)):T&&(T.d(1),T=null),O[0]&16&&b!==(b=L[4]?"Sí, Eliminar":"Espere 3 segundos")&&ve(S,b),O[0]&16&&C!==(C=!L[4])&&(v.disabled=C)},d(L){L&&M(t),T&&T.d(),y=!1,Ie(R)}}}function Si(e){let t,n;return{c(){t=m("p"),n=z(e[11]),d(t,"class","error-message svelte-1acdicn")},m(o,r){D(o,t,r),c(t,n)},p(o,r){r[0]&2048&&ve(n,o[11])},d(o){o&&M(t)}}}function Au(e){let t,n,o,r,i,s;const a=[bu,vu],l=[];function u(g,p){return g[1]?0:1}t=u(e),n=l[t]=a[t](e);let f=e[6]&&bi(e),h=e[3]&&Ci(e);return{c(){n.c(),o=w(),f&&f.c(),r=w(),h&&h.c(),i=lt()},m(g,p){l[t].m(g,p),D(g,o,p),f&&f.m(g,p),D(g,r,p),h&&h.m(g,p),D(g,i,p),s=!0},p(g,p){let _=t;t=u(g),t===_?l[t].p(g,p):(Ne(),J(l[_],1,1,()=>{l[_]=null}),Pe(),n=l[t],n?n.p(g,p):(n=l[t]=a[t](g),n.c()),B(n,1),n.m(o.parentNode,o)),g[6]?f?f.p(g,p):(f=bi(g),f.c(),f.m(r.parentNode,r)):f&&(f.d(1),f=null),g[3]?h?h.p(g,p):(h=Ci(g),h.c(),h.m(i.parentNode,i)):h&&(h.d(1),h=null)},i(g){s||(B(n),s=!0)},o(g){J(n),s=!1},d(g){g&&(M(o),M(r),M(i)),l[t].d(g),f&&f.d(g),h&&h.d(g)}}}function Ou(e,t,n){let o=[],r=!0;const i=ge.subscribe(ae=>{n(0,o=ae.users||[]),n(1,r=ae.isLoading),ae.error});let s=null,a=!1,l=!1,u=null,f=null,h=!1,g="",p=!1,_=!1,v=!1,b="";const S={username:"",email:"",fullName:"",password:"",role:"MECANIC"};let C={...S};Os(()=>{o.length===0&&ge.fetchUsers()}),Er(()=>{u&&clearTimeout(u),i()});async function y(ae){ae.preventDefault(),n(10,v=!0),n(11,b="");try{await ge.createUser(C),n(12,C={...S})}catch(Se){Se.status===500?n(11,b="Algo salió mal. Pruebe usando un nombre de usuario diferente. Recuerde que los nombres de usuario no pueden repetirse por seguridad en toda la historia de la app"):n(11,b=Se.message||"Error al crear usuario.")}finally{n(10,v=!1)}}async function R(ae){if(ae.preventDefault(),!!f){n(10,v=!0),n(11,b="");try{const Se=[],Ae=o.find(ye=>ye.id===f.id);(Ae.username!==f.username||Ae.email!==f.email)&&Se.push(ge.updateUser(f.id,{username:f.username,email:f.email})),g&&Se.push(ge.changeUserPassword(f.id,g)),Se.length>0&&await Promise.all(Se),X()}catch(Se){n(11,b=Se.message||"Error al actualizar usuario.")}finally{n(10,v=!1)}}}async function T(){if(s){n(11,b="");try{await ge.deleteUser(s.id),H()}catch(ae){n(11,b=ae.message||"Error al eliminar usuario.")}}}function L(ae){const{type:Se,data:Ae}=ae.detail;Se==="edit"?$(Ae):Se==="delete"&&O(Ae)}function O(ae){n(2,s=ae),n(3,a=!0),n(4,l=!1),u=setTimeout(()=>{n(4,l=!0)},3e3)}function H(){u&&clearTimeout(u),n(3,a=!1),n(2,s=null)}function $(ae){n(5,f={...ae}),n(7,g=""),n(11,b=""),n(6,h=!0)}function X(){n(6,h=!1),n(5,f=null)}function te(ae){wt.call(this,e,ae)}function Z(ae){wt.call(this,e,ae)}const Y=()=>ge.fetchUsers();function le(){C.username=this.value,n(12,C)}function ue(){C.email=this.value,n(12,C)}function pe(){C.fullName=this.value,n(12,C)}function U(){C.password=this.value,n(12,C)}function N(){C.password=this.value,n(12,C)}const ne=()=>n(8,p=!p);function re(){C.role=ho(this),n(12,C)}function x(){f.username=this.value,n(5,f)}function K(){f.email=this.value,n(5,f)}function W(){g=this.value,n(7,g)}function A(){g=this.value,n(7,g)}return[o,r,s,a,l,f,h,g,p,_,v,b,C,y,R,T,L,H,X,te,Z,Y,le,ue,pe,U,N,ne,re,x,K,W,A,()=>n(9,_=!_)]}class Iu extends xe{constructor(t){super(),Xe(this,t,Ou,Au,We,{},null,[-1,-1])}}function zs(e,t){if(!(typeof window<"u"))return Pt(t);const o=sessionStorage.getItem(e),r=o?JSON.parse(o):t,i=Pt(r);return i.subscribe(s=>{sessionStorage.setItem(e,JSON.stringify(s))}),i}const Or=zs("notificationCount",0),mo=zs("notificationMessages",[]);function ht(e){if(st(mo).some(o=>o.id===e.id)){console.log(`Notificación duplicada ignorada: ${e.id}`);return}mo.update(o=>[e,...o]),Or.update(o=>o+1)}function Mu(e){mo.update(t=>t.filter(n=>n.id!==e)),Or.update(t=>t>0?t-1:0)}function Du(){const{subscribe:e,update:t}=Pt({currentView:typeof localStorage<"u"&&localStorage.getItem("currentView")||"dashboard",showWorkOrderModal:!1,selectedRowData:null,selectedColumnDef:null,isSaving:!1});return{subscribe:e,setCurrentView:n=>{t(o=>({...o,currentView:n})),typeof localStorage<"u"&&localStorage.setItem("currentView",n)},openWorkOrderModal:(n,o)=>t(r=>({...r,showWorkOrderModal:!0,selectedRowData:n,selectedColumnDef:o})),closeWorkOrderModal:()=>t(n=>({...n,showWorkOrderModal:!1,selectedRowData:null,selectedColumnDef:null})),setSaving:n=>t(o=>({...o,isSaving:n}))}}const kt=Du();function Nu(e){let t,n,o,r,i,s,a=e[4]?"Descargando...":"Exportar Excel",l,u,f,h,g,p,_,v,b,S,C,y,R,T,L,O,H,$,X,te,Z,Y,le,ue,pe,U,N,ne,re,x,K,W,A,G,ae=e[2]?"Creando...":"Crear",Se,Ae,ye,be,he,fe,ie,Re,we=e[4]&&yi(),E=e[3]&&Ei(e);return he=new Bt({props:{columns:hu,data:e[12]}}),he.$on("action",e[17]),{c(){t=m("div"),n=m("div"),o=m("button"),o.textContent="Refrescar información",r=w(),i=m("button"),we&&we.c(),s=w(),l=z(a),u=w(),f=m("div"),h=m("h3"),h.textContent="Crear Nueva Máquina",g=w(),p=m("form"),_=m("input"),v=w(),b=m("input"),S=w(),C=m("input"),y=w(),R=m("input"),T=w(),L=m("input"),O=w(),H=m("div"),$=m("label"),$.textContent="Pertenece a:",X=w(),te=m("select"),Z=m("option"),Z.textContent="Distrito",Y=m("option"),Y.textContent="Asociación",le=w(),ue=m("div"),pe=m("label"),pe.textContent="SOAT:",U=w(),N=m("input"),ne=w(),re=m("div"),x=m("label"),x.textContent="RUNT:",K=w(),W=m("input"),A=w(),G=m("button"),Se=z(ae),Ae=w(),E&&E.c(),ye=w(),be=m("div"),Te(he.$$.fragment),d(o,"class","btn-refresh svelte-1bxwos3"),d(i,"class","btn-export svelte-1bxwos3"),i.disabled=e[4],d(n,"class","refresh-container svelte-1bxwos3"),d(h,"class","svelte-1bxwos3"),d(_,"type","text"),d(_,"placeholder","Nombre"),_.required=!0,_.disabled=e[2],d(_,"class","svelte-1bxwos3"),d(b,"type","text"),d(b,"placeholder","Marca"),b.disabled=e[2],d(b,"class","svelte-1bxwos3"),d(C,"type","text"),d(C,"placeholder","Modelo"),C.required=!0,C.disabled=e[2],d(C,"class","svelte-1bxwos3"),d(R,"type","text"),d(R,"placeholder","Núm. Motor"),R.disabled=e[2],d(R,"class","svelte-1bxwos3"),d(L,"type","text"),d(L,"placeholder","Núm. Identificación"),L.disabled=e[2],d(L,"class","svelte-1bxwos3"),d($,"for","belongsTo"),Z.__value="distrito",Q(Z,Z.__value),Y.__value="asociacion",Q(Y,Y.__value),d(te,"id","belongsTo"),te.disabled=e[2],d(te,"class","svelte-1bxwos3"),e[5].belongsTo===void 0&&rn(()=>e[32].call(te)),d(H,"class","form-group"),d(pe,"for","newSoat"),d(N,"type","date"),d(N,"id","newSoat"),N.disabled=e[2],d(N,"class","svelte-1bxwos3"),d(ue,"class","form-group"),d(x,"for","newRunt"),d(W,"type","date"),d(W,"id","newRunt"),W.disabled=e[2],d(W,"class","svelte-1bxwos3"),d(re,"class","form-group"),d(G,"type","submit"),d(G,"class","btn-create svelte-1bxwos3"),G.disabled=e[2],d(p,"class","create-form svelte-1bxwos3"),d(f,"class","form-container svelte-1bxwos3"),d(be,"class","table-wrapper svelte-1bxwos3"),d(t,"class","management-container svelte-1bxwos3")},m(k,F){D(k,t,F),c(t,n),c(n,o),c(n,r),c(n,i),we&&we.m(i,null),c(i,s),c(i,l),c(t,u),c(t,f),c(f,h),c(f,g),c(f,p),c(p,_),Q(_,e[5].name),c(p,v),c(p,b),Q(b,e[5].brand),c(p,S),c(p,C),Q(C,e[5].model),c(p,y),c(p,R),Q(R,e[5].numEngine),c(p,T),c(p,L),Q(L,e[5].numInterIdentification),c(p,O),c(p,H),c(H,$),c(H,X),c(H,te),c(te,Z),c(te,Y),Nt(te,e[5].belongsTo,!0),c(p,le),c(p,ue),c(ue,pe),c(ue,U),c(ue,N),Q(N,e[5].soat),c(p,ne),c(p,re),c(re,x),c(re,K),c(re,W),Q(W,e[5].runt),c(p,A),c(p,G),c(G,Se),c(f,Ae),E&&E.m(f,null),c(t,ye),c(t,be),Ee(he,be,null),fe=!0,ie||(Re=[I(o,"click",e[26]),I(i,"click",e[20]),I(_,"input",e[27]),I(b,"input",e[28]),I(C,"input",e[29]),I(R,"input",e[30]),I(L,"input",e[31]),I(te,"change",e[32]),I(N,"input",e[33]),I(W,"input",e[34]),I(p,"submit",e[13])],ie=!0)},p(k,F){k[4]?we||(we=yi(),we.c(),we.m(i,s)):we&&(we.d(1),we=null),(!fe||F[0]&16)&&a!==(a=k[4]?"Descargando...":"Exportar Excel")&&ve(l,a),(!fe||F[0]&16)&&(i.disabled=k[4]),(!fe||F[0]&4)&&(_.disabled=k[2]),F[0]&32&&_.value!==k[5].name&&Q(_,k[5].name),(!fe||F[0]&4)&&(b.disabled=k[2]),F[0]&32&&b.value!==k[5].brand&&Q(b,k[5].brand),(!fe||F[0]&4)&&(C.disabled=k[2]),F[0]&32&&C.value!==k[5].model&&Q(C,k[5].model),(!fe||F[0]&4)&&(R.disabled=k[2]),F[0]&32&&R.value!==k[5].numEngine&&Q(R,k[5].numEngine),(!fe||F[0]&4)&&(L.disabled=k[2]),F[0]&32&&L.value!==k[5].numInterIdentification&&Q(L,k[5].numInterIdentification),(!fe||F[0]&4)&&(te.disabled=k[2]),F[0]&32&&Nt(te,k[5].belongsTo),(!fe||F[0]&4)&&(N.disabled=k[2]),F[0]&32&&Q(N,k[5].soat),(!fe||F[0]&4)&&(W.disabled=k[2]),F[0]&32&&Q(W,k[5].runt),(!fe||F[0]&4)&&ae!==(ae=k[2]?"Creando...":"Crear")&&ve(Se,ae),(!fe||F[0]&4)&&(G.disabled=k[2]),k[3]?E?E.p(k,F):(E=Ei(k),E.c(),E.m(f,null)):E&&(E.d(1),E=null);const V={};F[0]&4096&&(V.data=k[12]),he.$set(V)},i(k){fe||(B(he.$$.fragment,k),fe=!0)},o(k){J(he.$$.fragment,k),fe=!1},d(k){k&&M(t),we&&we.d(),E&&E.d(),ke(he),ie=!1,Ie(Re)}}}function Pu(e){let t,n,o,r,i;return n=new Ft({}),{c(){t=m("div"),Te(n.$$.fragment),o=w(),r=m("p"),r.textContent="Cargando máquinas...",d(t,"class","loader-container svelte-1bxwos3")},m(s,a){D(s,t,a),Ee(n,t,null),c(t,o),c(t,r),i=!0},p:ce,i(s){i||(B(n.$$.fragment,s),i=!0)},o(s){J(n.$$.fragment,s),i=!1},d(s){s&&M(t),ke(n)}}}function yi(e){let t;return{c(){t=m("span"),t.textContent="⟳",d(t,"class","loading-icon svelte-1bxwos3")},m(n,o){D(n,t,o)},d(n){n&&M(t)}}}function Ei(e){let t,n;return{c(){t=m("p"),n=z(e[3]),d(t,"class","error-message svelte-1bxwos3")},m(o,r){D(o,t,r),c(t,n)},p(o,r){r[0]&8&&ve(n,o[3])},d(o){o&&M(t)}}}function ki(e){let t,n,o,r,i,s,a,l,u,f,h,g,p,_,v,b,S,C,y,R,T,L,O,H,$,X,te,Z,Y,le,ue,pe,U,N,ne,re,x,K,W,A,G,ae,Se,Ae,ye,be,he=e[2]?"Guardando...":"Guardar Cambios",fe,ie,Re,we,E=e[3]&&Ri(e);return{c(){t=m("div"),n=m("div"),o=m("div"),r=m("h3"),r.textContent="Editar Máquina",i=w(),s=m("button"),s.textContent="×",a=w(),l=m("form"),u=m("label"),f=z("Nombre: "),h=m("input"),g=w(),p=m("label"),_=z("Marca: "),v=m("input"),b=w(),S=m("label"),C=z("Modelo: "),y=m("input"),R=w(),T=m("label"),L=z(`Pertenece a:
          `),O=m("select"),H=m("option"),H.textContent="Distrito",$=m("option"),$.textContent="Asociación",X=w(),te=m("label"),Z=z("Núm. Motor: "),Y=m("input"),le=w(),ue=m("label"),pe=z("Núm. Identificación: "),U=m("input"),N=w(),ne=m("label"),re=z("SOAT: "),x=m("input"),K=w(),W=m("label"),A=z("RUNT: "),G=m("input"),ae=w(),Se=m("div"),Ae=m("button"),Ae.textContent="Cancelar",ye=w(),be=m("button"),fe=z(he),ie=w(),E&&E.c(),d(r,"class","svelte-1bxwos3"),d(s,"class","close-btn svelte-1bxwos3"),d(o,"class","modal-header svelte-1bxwos3"),d(h,"type","text"),h.required=!0,d(h,"class","svelte-1bxwos3"),d(u,"class","svelte-1bxwos3"),d(v,"type","text"),d(v,"class","svelte-1bxwos3"),d(p,"class","svelte-1bxwos3"),d(y,"type","text"),y.required=!0,d(y,"class","svelte-1bxwos3"),d(S,"class","svelte-1bxwos3"),H.__value="distrito",Q(H,H.__value),$.__value="asociacion",Q($,$.__value),d(O,"class","svelte-1bxwos3"),e[6].belongsTo===void 0&&rn(()=>e[38].call(O)),d(T,"class","svelte-1bxwos3"),d(Y,"type","text"),d(Y,"class","svelte-1bxwos3"),d(te,"class","svelte-1bxwos3"),d(U,"type","text"),d(U,"class","svelte-1bxwos3"),d(ue,"class","svelte-1bxwos3"),d(x,"type","date"),d(x,"class","svelte-1bxwos3"),d(ne,"class","svelte-1bxwos3"),d(G,"type","date"),d(G,"class","svelte-1bxwos3"),d(W,"class","svelte-1bxwos3"),d(Ae,"type","button"),d(Ae,"class","btn-cancel svelte-1bxwos3"),d(be,"type","submit"),d(be,"class","btn-save svelte-1bxwos3"),be.disabled=e[2],d(Se,"class","modal-actions svelte-1bxwos3"),d(l,"class","modal-form svelte-1bxwos3"),d(n,"class","modal-content svelte-1bxwos3"),d(t,"class","modal-overlay svelte-1bxwos3")},m(k,F){D(k,t,F),c(t,n),c(n,o),c(o,r),c(o,i),c(o,s),c(n,a),c(n,l),c(l,u),c(u,f),c(u,h),Q(h,e[6].name),c(l,g),c(l,p),c(p,_),c(p,v),Q(v,e[6].brand),c(l,b),c(l,S),c(S,C),c(S,y),Q(y,e[6].model),c(l,R),c(l,T),c(T,L),c(T,O),c(O,H),c(O,$),Nt(O,e[6].belongsTo,!0),c(l,X),c(l,te),c(te,Z),c(te,Y),Q(Y,e[6].numEngine),c(l,le),c(l,ue),c(ue,pe),c(ue,U),Q(U,e[6].numInterIdentification),c(l,N),c(l,ne),c(ne,re),c(ne,x),Q(x,e[6].soat),c(l,K),c(l,W),c(W,A),c(W,G),Q(G,e[6].runt),c(l,ae),c(l,Se),c(Se,Ae),c(Se,ye),c(Se,be),c(be,fe),c(l,ie),E&&E.m(l,null),Re||(we=[I(s,"click",e[18]),I(h,"input",e[35]),I(v,"input",e[36]),I(y,"input",e[37]),I(O,"change",e[38]),I(Y,"input",e[39]),I(U,"input",e[40]),I(x,"input",e[41]),I(G,"input",e[42]),I(Ae,"click",e[18]),I(l,"submit",e[14]),I(n,"click",pt(e[25]))],Re=!0)},p(k,F){F[0]&64&&h.value!==k[6].name&&Q(h,k[6].name),F[0]&64&&v.value!==k[6].brand&&Q(v,k[6].brand),F[0]&64&&y.value!==k[6].model&&Q(y,k[6].model),F[0]&64&&Nt(O,k[6].belongsTo),F[0]&64&&Y.value!==k[6].numEngine&&Q(Y,k[6].numEngine),F[0]&64&&U.value!==k[6].numInterIdentification&&Q(U,k[6].numInterIdentification),F[0]&64&&Q(x,k[6].soat),F[0]&64&&Q(G,k[6].runt),F[0]&4&&he!==(he=k[2]?"Guardando...":"Guardar Cambios")&&ve(fe,he),F[0]&4&&(be.disabled=k[2]),k[3]?E?E.p(k,F):(E=Ri(k),E.c(),E.m(l,null)):E&&(E.d(1),E=null)},d(k){k&&M(t),E&&E.d(),Re=!1,Ie(we)}}}function Ri(e){let t,n;return{c(){t=m("p"),n=z(e[3]),d(t,"class","error-message svelte-1bxwos3")},m(o,r){D(o,t,r),c(t,n)},p(o,r){r[0]&8&&ve(n,o[3])},d(o){o&&M(t)}}}function Ti(e){let t,n,o,r,i,s,a,l,u,f=e[0].name+"",h,g,p=e[0].model+"",_,v,b,S,C,y,R,T,L,O=e[1]?"Sí, Eliminar":"Espere 10 segundos",H,$,X,te;return{c(){t=m("div"),n=m("div"),o=m("h3"),o.textContent="Confirmar Eliminación",r=w(),i=m("p"),s=m("b"),s.textContent="NO RECOMENDADO",a=w(),l=m("br"),u=z(`
        ¿Está seguro que desea eliminar la máquina "`),h=z(f),g=w(),_=z(p),v=z('"? '),b=m("br"),S=z(`
        Los registros relacionados no se borran pero no podrá acceder a la hoja de vida`),C=w(),y=m("div"),R=m("button"),R.textContent="Cancelar",T=w(),L=m("button"),H=z(O),d(o,"class","svelte-1bxwos3"),d(R,"type","button"),d(R,"class","btn-cancel svelte-1bxwos3"),d(L,"type","button"),d(L,"class","btn-delete"),L.disabled=$=!e[1],d(y,"class","modal-actions svelte-1bxwos3"),d(n,"class","modal-content confirmation svelte-1bxwos3"),d(t,"class","modal-overlay svelte-1bxwos3")},m(Z,Y){D(Z,t,Y),c(t,n),c(n,o),c(n,r),c(n,i),c(i,s),c(i,a),c(i,l),c(i,u),c(i,h),c(i,g),c(i,_),c(i,v),c(i,b),c(i,S),c(n,C),c(n,y),c(y,R),c(y,T),c(y,L),c(L,H),X||(te=[I(R,"click",e[19]),I(L,"click",e[15]),I(n,"click",pt(e[24])),I(t,"click",e[19])],X=!0)},p(Z,Y){Y[0]&1&&f!==(f=Z[0].name+"")&&ve(h,f),Y[0]&1&&p!==(p=Z[0].model+"")&&ve(_,p),Y[0]&2&&O!==(O=Z[1]?"Sí, Eliminar":"Espere 10 segundos")&&ve(H,O),Y[0]&2&&$!==($=!Z[1])&&(L.disabled=$)},d(Z){Z&&M(t),X=!1,Ie(te)}}}function Ai(e){var L;let t,n,o,r,i,s=(((L=e[10])==null?void 0:L.machine.name)||"Cargando...")+"",a,l,u,f,h,g,p,_,v,b,S,C;const y=[Lu,$u],R=[];function T(O,H){return O[9]?0:O[10]&&O[10].results?1:-1}return~(h=T(e))&&(g=R[h]=y[h](e)),{c(){t=m("div"),n=m("div"),o=m("div"),r=m("h3"),i=z("Hoja de Vida de: "),a=z(s),l=w(),u=m("button"),u.textContent="×",f=w(),g&&g.c(),p=w(),_=m("div"),v=m("button"),v.textContent="Cerrar",d(r,"class","svelte-1bxwos3"),d(u,"class","close-btn svelte-1bxwos3"),d(o,"class","modal-header svelte-1bxwos3"),d(v,"type","button"),d(v,"class","btn-cancel svelte-1bxwos3"),d(_,"class","modal-actions svelte-1bxwos3"),d(n,"class","modal-content large svelte-1bxwos3"),d(t,"class","modal-overlay svelte-1bxwos3")},m(O,H){D(O,t,H),c(t,n),c(n,o),c(o,r),c(r,i),c(r,a),c(o,l),c(o,u),c(n,f),~h&&R[h].m(n,null),c(n,p),c(n,_),c(_,v),b=!0,S||(C=[I(u,"click",e[16]),I(v,"click",e[16]),I(n,"click",pt(e[23]))],S=!0)},p(O,H){var X;(!b||H[0]&1024)&&s!==(s=(((X=O[10])==null?void 0:X.machine.name)||"Cargando...")+"")&&ve(a,s);let $=h;h=T(O),h===$?~h&&R[h].p(O,H):(g&&(Ne(),J(R[$],1,1,()=>{R[$]=null}),Pe()),~h?(g=R[h],g?g.p(O,H):(g=R[h]=y[h](O),g.c()),B(g,1),g.m(n,p)):g=null)},i(O){b||(B(g),b=!0)},o(O){J(g),b=!1},d(O){O&&M(t),~h&&R[h].d(),S=!1,Ie(C)}}}function $u(e){let t,n,o,r;const i=[Uu,Fu],s=[];function a(l,u){return l[10].results.length>0?0:1}return t=a(e),n=s[t]=i[t](e),{c(){n.c(),o=lt()},m(l,u){s[t].m(l,u),D(l,o,u),r=!0},p(l,u){let f=t;t=a(l),t===f?s[t].p(l,u):(Ne(),J(s[f],1,1,()=>{s[f]=null}),Pe(),n=s[t],n?n.p(l,u):(n=s[t]=i[t](l),n.c()),B(n,1),n.m(o.parentNode,o))},i(l){r||(B(n),r=!0)},o(l){J(n),r=!1},d(l){l&&M(o),s[t].d(l)}}}function Lu(e){let t,n,o;return n=new Ft({}),{c(){t=m("div"),Te(n.$$.fragment),d(t,"class","loader-container svelte-1bxwos3")},m(r,i){D(r,t,i),Ee(n,t,null),o=!0},p:ce,i(r){o||(B(n.$$.fragment,r),o=!0)},o(r){J(n.$$.fragment,r),o=!1},d(r){r&&M(t),ke(n)}}}function Fu(e){let t;return{c(){t=m("p"),t.textContent="No hay registros en la hoja de vida para esta máquina."},m(n,o){D(n,t,o)},p:ce,i:ce,o:ce,d(n){n&&M(t)}}}function Uu(e){let t,n,o;return n=new Bt({props:{columns:_u,data:e[10].results}}),{c(){t=m("div"),Te(n.$$.fragment),d(t,"class","table-wrapper modal-table svelte-1bxwos3")},m(r,i){D(r,t,i),Ee(n,t,null),o=!0},p(r,i){const s={};i[0]&1024&&(s.data=r[10].results),n.$set(s)},i(r){o||(B(n.$$.fragment,r),o=!0)},o(r){J(n.$$.fragment,r),o=!1},d(r){r&&M(t),ke(n)}}}function Hu(e){let t,n,o,r,i,s,a;const l=[Pu,Nu],u=[];function f(_,v){return _[11]?0:1}t=f(e),n=u[t]=l[t](e);let h=e[7]&&ki(e),g=e[0]&&Ti(e),p=e[8]&&Ai(e);return{c(){n.c(),o=w(),h&&h.c(),r=w(),g&&g.c(),i=w(),p&&p.c(),s=lt()},m(_,v){u[t].m(_,v),D(_,o,v),h&&h.m(_,v),D(_,r,v),g&&g.m(_,v),D(_,i,v),p&&p.m(_,v),D(_,s,v),a=!0},p(_,v){let b=t;t=f(_),t===b?u[t].p(_,v):(Ne(),J(u[b],1,1,()=>{u[b]=null}),Pe(),n=u[t],n?n.p(_,v):(n=u[t]=l[t](_),n.c()),B(n,1),n.m(o.parentNode,o)),_[7]?h?h.p(_,v):(h=ki(_),h.c(),h.m(r.parentNode,r)):h&&(h.d(1),h=null),_[0]?g?g.p(_,v):(g=Ti(_),g.c(),g.m(i.parentNode,i)):g&&(g.d(1),g=null),_[8]?p?(p.p(_,v),v[0]&256&&B(p,1)):(p=Ai(_),p.c(),B(p,1),p.m(s.parentNode,s)):p&&(Ne(),J(p,1,1,()=>{p=null}),Pe())},i(_){a||(B(n),B(p),a=!0)},o(_){J(n),J(p),a=!1},d(_){_&&(M(o),M(r),M(i),M(s)),u[t].d(_),h&&h.d(_),g&&g.d(_),p&&p.d(_)}}}function Vu(e,t,n){let o,r,i;bt(e,ge,ie=>n(22,i=ie));let s=!1,a,l=!1,u="",f=!1;const h={name:"",model:"",numEngine:"",numInterIdentification:"",brand:"",soat:"",runt:"",belongsTo:"distrito"};let g={...h},p=null,_=!1,v=null,b=!1,S=!1,C=null;Er(()=>{clearTimeout(a)});async function y(ie){ie.preventDefault(),n(2,l=!0),n(3,u="");try{await ge.createMachine(g),n(5,g={...h})}catch(Re){n(3,u=Re.message||"Error al crear máquina.")}finally{n(2,l=!1)}}async function R(ie){if(ie.preventDefault(),!!p){n(2,l=!0),n(3,u="");try{await ge.updateMachine(p),X()}catch(Re){n(3,u=Re.message||"Error al actualizar máquina.")}finally{n(2,l=!1)}}}async function T(){if(!(!v||!s)){n(3,u="");try{await ge.deleteMachine(v.id),n(0,v=null)}catch(ie){n(3,u=ie.message||"Error al eliminar máquina.")}}}async function L(ie){n(8,b=!0),n(9,S=!0),n(3,u="");try{n(10,C=await ge.fetchMachineCurriculum(ie.id))}catch(Re){n(3,u=`Error al cargar la hoja de vida: ${Re.message}`),n(8,b=!1)}finally{n(9,S=!1)}}function O(){n(8,b=!1),n(10,C=null),n(3,u="")}function H(ie){const{type:Re,data:we}=ie.detail;Re==="edit"?$(we):Re==="delete"?n(0,v=we):Re==="cv"&&L(we)}function $(ie){n(6,p={...ie}),n(7,_=!0)}function X(){n(7,_=!1),n(6,p=null),n(3,u="")}function te(){n(0,v=null),clearTimeout(a)}async function Z(){n(4,f=!0);try{const ie=await fetch("http://localhost:8080/api/v1/curriculum/export",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!ie.ok)throw new Error("Error al descargar el archivo");const Re=await ie.blob(),we=window.URL.createObjectURL(Re),E=document.createElement("a");E.href=we,E.download="curriculum.xlsx",document.body.appendChild(E),E.click(),window.URL.revokeObjectURL(we),document.body.removeChild(E),ht({id:Date.now(),text:"Archivo de curriculum descargado con éxito."})}catch(ie){ht({id:Date.now(),text:`Error al descargar el archivo: ${ie.message}`})}finally{n(4,f=!1)}}function Y(ie){wt.call(this,e,ie)}function le(ie){wt.call(this,e,ie)}function ue(ie){wt.call(this,e,ie)}const pe=()=>ge.fetchMachines();function U(){g.name=this.value,n(5,g)}function N(){g.brand=this.value,n(5,g)}function ne(){g.model=this.value,n(5,g)}function re(){g.numEngine=this.value,n(5,g)}function x(){g.numInterIdentification=this.value,n(5,g)}function K(){g.belongsTo=ho(this),n(5,g)}function W(){g.soat=this.value,n(5,g)}function A(){g.runt=this.value,n(5,g)}function G(){p.name=this.value,n(6,p)}function ae(){p.brand=this.value,n(6,p)}function Se(){p.model=this.value,n(6,p)}function Ae(){p.belongsTo=ho(this),n(6,p)}function ye(){p.numEngine=this.value,n(6,p)}function be(){p.numInterIdentification=this.value,n(6,p)}function he(){p.soat=this.value,n(6,p)}function fe(){p.runt=this.value,n(6,p)}return e.$$.update=()=>{e.$$.dirty[0]&4194304&&n(12,o=i.machines),e.$$.dirty[0]&4194304&&n(11,r=i.isLoading),e.$$.dirty[0]&2097153&&v&&(n(1,s=!1),clearTimeout(a),n(21,a=setTimeout(()=>{n(1,s=!0)},1e4)))},[v,s,l,u,f,g,p,_,b,S,C,r,o,y,R,T,O,H,X,te,Z,a,i,Y,le,ue,pe,U,N,ne,re,x,K,W,A,G,ae,Se,Ae,ye,be,he,fe]}class ju extends xe{constructor(t){super(),Xe(this,t,Vu,Hu,We,{},null,[-1,-1])}}function Oi(e,t,n){const o=e.slice();return o[32]=t[n],o[33]=t,o[34]=n,o}function Ii(e){let t,n,o;function r(){return e[24](e[32])}return{c(){t=m("button"),t.textContent="×",d(t,"type","button"),d(t,"class","btn-remove svelte-l7oe3k")},m(i,s){D(i,t,s),n||(o=I(t,"click",r),n=!0)},p(i,s){e=i},d(i){i&&M(t),n=!1,o()}}}function Mi(e,t){let n,o,r,i,s,a,l,u,f,h,g,p,_,v,b,S,C,y,R,T,L,O,H,$=t[4].length>1&&Ii(t);function X(){t[25].call(f,t[33],t[34])}function te(){t[26].call(_,t[33],t[34])}function Z(){t[27].call(C,t[33],t[34])}function Y(){t[28].call(L,t[33],t[34])}return{key:e,first:null,c(){n=m("div"),o=m("div"),r=m("span"),r.textContent="Repuesto",i=w(),$&&$.c(),s=w(),a=m("div"),l=m("label"),u=z("Referencia: "),f=m("input"),h=w(),g=m("label"),p=z("Nombre: "),_=m("input"),v=w(),b=m("label"),S=z("Cantidad: "),C=m("input"),y=w(),R=m("label"),T=z("Precio total: "),L=m("input"),d(o,"class","card-header svelte-l7oe3k"),d(f,"type","text"),f.required=!0,d(f,"class","svelte-l7oe3k"),d(l,"class","svelte-l7oe3k"),d(_,"type","text"),_.required=!0,d(_,"class","svelte-l7oe3k"),d(g,"class","svelte-l7oe3k"),d(C,"type","number"),d(C,"min","1"),C.required=!0,d(C,"class","svelte-l7oe3k"),d(b,"class","svelte-l7oe3k"),d(L,"type","number"),d(L,"min","0"),L.required=!0,d(L,"class","svelte-l7oe3k"),d(R,"class","svelte-l7oe3k"),d(a,"class","form-grid svelte-l7oe3k"),d(n,"class","spare-part-card svelte-l7oe3k"),this.first=n},m(le,ue){D(le,n,ue),c(n,o),c(o,r),c(o,i),$&&$.m(o,null),c(n,s),c(n,a),c(a,l),c(l,u),c(l,f),Q(f,t[32].ref),c(a,h),c(a,g),c(g,p),c(g,_),Q(_,t[32].name),c(a,v),c(a,b),c(b,S),c(b,C),Q(C,t[32].quantity),c(a,y),c(a,R),c(R,T),c(R,L),Q(L,t[32].price),O||(H=[I(f,"input",X),I(_,"input",te),I(C,"input",Z),I(L,"input",Y)],O=!0)},p(le,ue){t=le,t[4].length>1?$?$.p(t,ue):($=Ii(t),$.c(),$.m(o,null)):$&&($.d(1),$=null),ue[0]&16&&f.value!==t[32].ref&&Q(f,t[32].ref),ue[0]&16&&_.value!==t[32].name&&Q(_,t[32].name),ue[0]&16&&_n(C.value)!==t[32].quantity&&Q(C,t[32].quantity),ue[0]&16&&_n(L.value)!==t[32].price&&Q(L,t[32].price)},d(le){le&&M(n),$&&$.d(),O=!1,Ie(H)}}}function Bu(e){var xr,Gr;let t,n,o,r,i,s,a,l,u,f,h,g,p,_,v,b=((xr=e[0].machine)==null?void 0:xr.name)+"",S,C,y=((Gr=e[0].machine)==null?void 0:Gr.model)+"",R,T,L,O,H,$,X,te,Z,Y,le,ue,pe,U,N,ne,re,x,K,W,A,G,ae,Se,Ae,ye,be,he,fe,ie,Re,we,E,k,F,V,j,q,Ce,ee,P,se,oe,de,$e,gt,yt,Je,Le,it,mt,at,_t,Qt,ze,dn,tt,Jn,Et,Yt,fn,Ze=[],je=new Map,Ue,qe,Qe,Ve,He,vt,Ge,Ht,Zn,Mo,qr,Qn=ut(e[4]);const Wr=De=>De[32].id;for(let De=0;De<Qn.length;De+=1){let Be=Oi(e,Qn,De),Ot=Wr(Be);je.set(Ot,Ze[De]=Mi(Ot,Be))}return{c(){t=m("div"),n=m("div"),o=m("div"),r=m("h2"),r.textContent="Ejecutar Orden de Trabajo",i=w(),s=m("button"),s.textContent="×",a=w(),l=m("div"),u=m("div"),f=m("div"),f.textContent="Detalles de la Orden Original",h=w(),g=m("div"),p=m("p"),_=m("strong"),_.textContent="Máquina:",v=w(),S=z(b),C=z(" - "),R=z(y),T=w(),L=m("p"),O=m("strong"),O.textContent="Tipo:",H=w(),$=z(e[10]),X=w(),te=m("p"),Z=m("strong"),Z.textContent="Sector:",Y=w(),le=z(e[11]),ue=w(),pe=m("p"),U=m("strong"),U.textContent="Estado:",N=w(),ne=m("span"),ne.textContent=`${e[12]}`,re=w(),x=m("p"),K=m("strong"),K.textContent="Descripción orden:",W=w(),A=z(e[13]),G=w(),ae=m("p"),Se=m("strong"),Se.textContent="Asignado a:",Ae=w(),ye=z(e[14]),be=w(),he=m("form"),fe=m("div"),ie=m("label"),ie.textContent="Tiempo Empleado (ej. 2 horas, 30 mins):",Re=w(),we=m("input"),E=w(),k=m("label"),k.textContent="Descripción / Detalles del Trabajo Realizado:",F=w(),V=m("textarea"),j=w(),q=m("fieldset"),Ce=m("legend"),Ce.textContent="Mano de Obra",ee=w(),P=m("div"),se=m("label"),oe=z("Contratista: "),de=m("input"),gt=w(),yt=m("label"),Je=z("Precio: "),Le=m("input"),it=w(),mt=m("label"),at=m("input"),_t=z(`\r
      El arreglo fue realizado por el mismo mecánico que reportó`),Qt=w(),ze=m("label"),ze.textContent="Observaciones de Mano de Obra:",dn=w(),tt=m("textarea"),Jn=w(),Et=m("fieldset"),Yt=m("legend"),Yt.textContent="Partes y Repuestos",fn=w();for(let De=0;De<Ze.length;De+=1)Ze[De].c();Ue=w(),qe=m("button"),qe.textContent="+ Agregar Repuesto",Qe=w(),Ve=m("div"),He=m("button"),He.textContent="Cancelar",vt=w(),Ge=m("button"),Ht=z("Ejecutar y Completar Orden"),d(r,"class","svelte-l7oe3k"),d(s,"class","close-btn svelte-l7oe3k"),d(o,"class","modal-header svelte-l7oe3k"),d(f,"class","info-panel-header svelte-l7oe3k"),d(p,"class","svelte-l7oe3k"),d(L,"class","svelte-l7oe3k"),d(te,"class","svelte-l7oe3k"),tr(ne,"font-weight","bold"),d(pe,"class","svelte-l7oe3k"),d(x,"class","svelte-l7oe3k"),d(ae,"class","svelte-l7oe3k"),d(g,"class","info-panel-body svelte-l7oe3k"),d(u,"class","info-panel svelte-l7oe3k"),d(ie,"class","svelte-l7oe3k"),d(we,"type","text"),we.required=!0,d(we,"class","svelte-l7oe3k"),d(k,"class","svelte-l7oe3k"),d(V,"rows","4"),V.required=!0,d(V,"class","svelte-l7oe3k"),d(fe,"class","form-section svelte-l7oe3k"),d(Ce,"class","svelte-l7oe3k"),d(de,"type","text"),de.disabled=$e=e[3].sameMecanic,d(de,"class","svelte-l7oe3k"),d(se,"class","svelte-l7oe3k"),d(Le,"type","number"),d(Le,"min","0"),Le.required=!0,d(Le,"class","svelte-l7oe3k"),d(yt,"class","svelte-l7oe3k"),d(P,"class","form-grid svelte-l7oe3k"),d(at,"type","checkbox"),d(at,"class","svelte-l7oe3k"),d(mt,"class","checkbox-label svelte-l7oe3k"),d(ze,"class","svelte-l7oe3k"),d(tt,"rows","2"),d(tt,"class","svelte-l7oe3k"),d(q,"class","form-section svelte-l7oe3k"),d(Yt,"class","svelte-l7oe3k"),d(qe,"type","button"),d(qe,"class","btn-add svelte-l7oe3k"),d(Et,"class","form-section svelte-l7oe3k"),d(l,"class","modal-body svelte-l7oe3k"),d(He,"class","btn-cancel svelte-l7oe3k"),d(Ge,"class","btn-create svelte-l7oe3k"),Ge.disabled=Zn=!e[5],d(Ve,"class","modal-footer svelte-l7oe3k"),d(n,"class","modal-content svelte-l7oe3k"),d(t,"class","modal-overlay svelte-l7oe3k")},m(De,Be){D(De,t,Be),c(t,n),c(n,o),c(o,r),c(o,i),c(o,s),c(n,a),c(n,l),c(l,u),c(u,f),c(u,h),c(u,g),c(g,p),c(p,_),c(p,v),c(p,S),c(p,C),c(p,R),c(g,T),c(g,L),c(L,O),c(L,H),c(L,$),c(g,X),c(g,te),c(te,Z),c(te,Y),c(te,le),c(g,ue),c(g,pe),c(pe,U),c(pe,N),c(pe,ne),c(g,re),c(g,x),c(x,K),c(x,W),c(x,A),c(g,G),c(g,ae),c(ae,Se),c(ae,Ae),c(ae,ye),c(l,be),c(l,he),c(he,fe),c(fe,ie),c(fe,Re),c(fe,we),Q(we,e[1]),c(fe,E),c(fe,k),c(fe,F),c(fe,V),Q(V,e[2]),c(he,j),c(he,q),c(q,Ce),c(q,ee),c(q,P),c(P,se),c(se,oe),c(se,de),Q(de,e[3].contractor),c(P,gt),c(P,yt),c(yt,Je),c(yt,Le),Q(Le,e[3].price),c(q,it),c(q,mt),c(mt,at),at.checked=e[3].sameMecanic,c(mt,_t),c(q,Qt),c(q,ze),c(q,dn),c(q,tt),Q(tt,e[3].observations),c(he,Jn),c(he,Et),c(Et,Yt),c(Et,fn);for(let Ot=0;Ot<Ze.length;Ot+=1)Ze[Ot]&&Ze[Ot].m(Et,null);c(Et,Ue),c(Et,qe),c(n,Qe),c(n,Ve),c(Ve,He),c(Ve,vt),c(Ve,Ge),c(Ge,Ht),Mo||(qr=[I(s,"click",e[9]),I(we,"input",e[17]),I(V,"input",e[18]),I(de,"input",e[19]),I(Le,"input",e[20]),I(at,"change",e[21]),I(at,"change",e[22]),I(tt,"input",e[23]),I(qe,"click",e[6]),I(he,"submit",As(e[8])),I(He,"click",e[9]),I(Ge,"click",e[8]),I(n,"click",pt(e[16]))],Mo=!0)},p(De,Be){var Ot,Kr;Be[0]&1&&b!==(b=((Ot=De[0].machine)==null?void 0:Ot.name)+"")&&ve(S,b),Be[0]&1&&y!==(y=((Kr=De[0].machine)==null?void 0:Kr.model)+"")&&ve(R,y),Be[0]&2&&we.value!==De[1]&&Q(we,De[1]),Be[0]&4&&Q(V,De[2]),Be[0]&8&&$e!==($e=De[3].sameMecanic)&&(de.disabled=$e),Be[0]&8&&de.value!==De[3].contractor&&Q(de,De[3].contractor),Be[0]&8&&_n(Le.value)!==De[3].price&&Q(Le,De[3].price),Be[0]&8&&(at.checked=De[3].sameMecanic),Be[0]&8&&Q(tt,De[3].observations),Be[0]&144&&(Qn=ut(De[4]),Ze=Ds(Ze,Be,Wr,1,De,Qn,je,Et,Ms,Mi,Ue,Oi)),Be[0]&32&&Zn!==(Zn=!De[5])&&(Ge.disabled=Zn)},i:ce,o:ce,d(De){De&&M(t);for(let Be=0;Be<Ze.length;Be+=1)Ze[Be].d();Mo=!1,Ie(qr)}}}function zu(e,t,n){var ne,re,x,K,W;let o,{workOrder:r=null}=t;const i=!1,s=sn();let a="",l="",u={price:"0",sameMecanic:!0,contractor:"",observations:""},f=[{id:1,ref:"",name:"",quantity:1,price:""}],h=2;function g(){n(4,f=[...f,{id:h++,ref:"",name:"",quantity:1,price:""}])}function p(A){n(4,f=f.filter(G=>G.id!==A)),f.length===0&&g()}function _(){if(!o)return;const A={ref:f.map(ae=>ae.ref).join("|"),name:f.map(ae=>ae.name).join("|"),quantity:f.map(ae=>ae.quantity).join("|"),price:f.reduce((ae,Se)=>ae+(Number(Se.price)||0),0)},G={orderId:r.order.id,timeSpent:a,description:l,labor:u,sparePart:A};s("execute",G)}function v(){s("cancel")}const b=r.order.description.split("|"),S=((ne=b[0])==null?void 0:ne.trim())||"",C=((re=b[1])==null?void 0:re.trim())||"",y=((x=b[2])==null?void 0:x.trim())||"",R=((K=b[3])==null?void 0:K.trim())||"",T=((W=b[4])==null?void 0:W.trim())||"";function L(A){wt.call(this,e,A)}function O(){a=this.value,n(1,a)}function H(){l=this.value,n(2,l)}function $(){u.contractor=this.value,n(3,u)}function X(){u.price=_n(this.value),n(3,u)}function te(){u.sameMecanic=this.checked,n(3,u)}const Z=()=>{u.sameMecanic&&n(3,u.contractor="",u)};function Y(){u.observations=this.value,n(3,u)}const le=A=>p(A.id);function ue(A,G){A[G].ref=this.value,n(4,f)}function pe(A,G){A[G].name=this.value,n(4,f)}function U(A,G){A[G].quantity=_n(this.value),n(4,f)}function N(A,G){A[G].price=_n(this.value),n(4,f)}return e.$$set=A=>{"workOrder"in A&&n(0,r=A.workOrder)},e.$$.update=()=>{e.$$.dirty[0]&30&&n(5,o=a.trim()!==""&&l.trim()!==""&&(u.sameMecanic||u.contractor.trim()!=="")&&u.price!==""&&Number(u.price)>=0&&f.every(A=>A.ref.trim()!==""&&A.name.trim()!==""&&A.quantity!==""&&Number(A.quantity)>0&&A.price!==""&&Number(A.price)>=0))},[r,a,l,u,f,o,g,p,_,v,S,C,y,R,T,i,L,O,H,$,X,te,Z,Y,le,ue,pe,U,N]}class qu extends xe{constructor(t){super(),Xe(this,t,zu,Bu,We,{workOrder:0,isSubmitting:15},null,[-1,-1])}get isSubmitting(){return this.$$.ctx[15]}}function Wu(e){let t,n,o,r,i,s,a;return r=new Bt({props:{columns:fu,data:e[3].data,totalElements:e[3].totalElements,totalPages:e[3].totalPages,currentPage:e[3].currentPage,pageSize:e[3].pageSize,fixedLayout:!1}}),r.$on("pageChange",e[5]),r.$on("sizeChange",e[6]),r.$on("action",e[7]),{c(){t=m("div"),n=m("button"),n.textContent="Refrescar información",o=w(),Te(r.$$.fragment),d(n,"class","btn-refresh svelte-d2p4gq"),d(t,"class","refresh-container svelte-d2p4gq")},m(l,u){D(l,t,u),c(t,n),D(l,o,u),Ee(r,l,u),i=!0,s||(a=I(n,"click",e[10]),s=!0)},p(l,u){const f={};u&8&&(f.data=l[3].data),u&8&&(f.totalElements=l[3].totalElements),u&8&&(f.totalPages=l[3].totalPages),u&8&&(f.currentPage=l[3].currentPage),u&8&&(f.pageSize=l[3].pageSize),r.$set(f)},i(l){i||(B(r.$$.fragment,l),i=!0)},o(l){J(r.$$.fragment,l),i=!1},d(l){l&&(M(t),M(o)),ke(r,l),s=!1,a()}}}function xu(e){let t,n,o,r,i;return n=new Ft({}),{c(){t=m("div"),Te(n.$$.fragment),o=w(),r=m("p"),r.textContent="Cargando órdenes de trabajo...",d(t,"class","loader-container svelte-d2p4gq")},m(s,a){D(s,t,a),Ee(n,t,null),c(t,o),c(t,r),i=!0},p:ce,i(s){i||(B(n.$$.fragment,s),i=!0)},o(s){J(n.$$.fragment,s),i=!1},d(s){s&&M(t),ke(n)}}}function Di(e){let t,n;return t=new qu({props:{workOrder:e[1],isSubmitting:e[2]}}),t.$on("cancel",e[11]),t.$on("execute",e[8]),{c(){Te(t.$$.fragment)},m(o,r){Ee(t,o,r),n=!0},p(o,r){const i={};r&2&&(i.workOrder=o[1]),r&4&&(i.isSubmitting=o[2]),t.$set(i)},i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){J(t.$$.fragment,o),n=!1},d(o){ke(t,o)}}}function Gu(e){let t,n,o,r,i;const s=[xu,Wu],a=[];function l(f,h){return f[4]?0:1}t=l(e),n=a[t]=s[t](e);let u=e[0]&&Di(e);return{c(){n.c(),o=w(),u&&u.c(),r=lt()},m(f,h){a[t].m(f,h),D(f,o,h),u&&u.m(f,h),D(f,r,h),i=!0},p(f,[h]){let g=t;t=l(f),t===g?a[t].p(f,h):(Ne(),J(a[g],1,1,()=>{a[g]=null}),Pe(),n=a[t],n?n.p(f,h):(n=a[t]=s[t](f),n.c()),B(n,1),n.m(o.parentNode,o)),f[0]?u?(u.p(f,h),h&1&&B(u,1)):(u=Di(f),u.c(),B(u,1),u.m(r.parentNode,r)):u&&(Ne(),J(u,1,1,()=>{u=null}),Pe())},i(f){i||(B(n),B(u),i=!0)},o(f){J(n),J(u),i=!1},d(f){f&&(M(o),M(r)),a[t].d(f),u&&u.d(f)}}}function Ku(e,t,n){let o,r,i;bt(e,ge,v=>n(9,i=v));let s=!1,a=null,l=!1;function u(v){const b=v.detail;ge.fetchWorkOrders(b,o.pageSize)}function f(v){const b=v.detail;ge.fetchWorkOrders(0,b)}function h(v){const{type:b,data:S}=v.detail;b==="execute"&&(n(1,a=S),n(0,s=!0))}async function g(v){n(2,l=!0);try{await ge.executeWorkOrder(v.detail),ht({id:Date.now(),text:`Orden #${a.order.id} ejecutada con éxito.`}),n(0,s=!1)}catch(b){ht({id:Date.now(),text:`Error al ejecutar la orden: ${b.message}`})}finally{n(2,l=!1)}}const p=()=>ge.fetchWorkOrders(),_=()=>n(0,s=!1);return e.$$.update=()=>{e.$$.dirty&512&&n(3,o=i.workOrders),e.$$.dirty&512&&n(4,r=i.isLoading)},[s,a,l,o,r,u,f,h,g,i,p,_]}class Xu extends xe{constructor(t){super(),Xe(this,t,Ku,Gu,We,{})}}function Ni(e){let t;return{c(){t=m("span"),t.textContent="⟳",d(t,"class","loading-icon svelte-1fss2ef")},m(n,o){D(n,t,o)},d(n){n&&M(t)}}}function Ju(e){let t,n,o,r=e[4].length>0&&Pi(e),i=e[3].length>0&&$i(e);return{c(){r&&r.c(),t=w(),i&&i.c(),n=lt()},m(s,a){r&&r.m(s,a),D(s,t,a),i&&i.m(s,a),D(s,n,a),o=!0},p(s,a){s[4].length>0?r?(r.p(s,a),a&16&&B(r,1)):(r=Pi(s),r.c(),B(r,1),r.m(t.parentNode,t)):r&&(Ne(),J(r,1,1,()=>{r=null}),Pe()),s[3].length>0?i?(i.p(s,a),a&8&&B(i,1)):(i=$i(s),i.c(),B(i,1),i.m(n.parentNode,n)):i&&(Ne(),J(i,1,1,()=>{i=null}),Pe())},i(s){o||(B(r),B(i),o=!0)},o(s){J(r),J(i),o=!1},d(s){s&&(M(t),M(n)),r&&r.d(s),i&&i.d(s)}}}function Zu(e){let t,n,o,r,i;return{c(){t=m("div"),n=m("p"),n.innerHTML="<strong>Se encontraron problemas al cargar los datos:</strong>",o=w(),r=m("p"),i=z(e[1]),d(t,"class","error-panel svelte-1fss2ef")},m(s,a){D(s,t,a),c(t,n),c(t,o),c(t,r),c(r,i)},p(s,a){a&2&&ve(i,s[1])},i:ce,o:ce,d(s){s&&M(t)}}}function Qu(e){let t,n,o,r,i;return n=new Ft({}),{c(){t=m("div"),Te(n.$$.fragment),o=w(),r=m("p"),r.textContent="Cargando datos del consolidado...",d(t,"class","loader-container svelte-1fss2ef")},m(s,a){D(s,t,a),Ee(n,t,null),c(t,o),c(t,r),i=!0},p:ce,i(s){i||(B(n.$$.fragment,s),i=!0)},o(s){J(n.$$.fragment,s),i=!1},d(s){s&&M(t),ke(n)}}}function Pi(e){let t,n,o;return n=new Bt({props:{columns:e[5],data:e[4],fixedLayout:!1}}),{c(){t=m("div"),Te(n.$$.fragment),d(t,"class","table-group svelte-1fss2ef")},m(r,i){D(r,t,i),Ee(n,t,null),o=!0},p(r,i){const s={};i&16&&(s.data=r[4]),n.$set(s)},i(r){o||(B(n.$$.fragment,r),o=!0)},o(r){J(n.$$.fragment,r),o=!1},d(r){r&&M(t),ke(n)}}}function $i(e){let t,n,o;return n=new Bt({props:{columns:e[6],data:e[3],fixedLayout:!1}}),{c(){t=m("div"),Te(n.$$.fragment),d(t,"class","table-group svelte-1fss2ef")},m(r,i){D(r,t,i),Ee(n,t,null),o=!0},p(r,i){const s={};i&8&&(s.data=r[3]),n.$set(s)},i(r){o||(B(n.$$.fragment,r),o=!0)},o(r){J(n.$$.fragment,r),o=!1},d(r){r&&M(t),ke(n)}}}function Yu(e){let t,n,o,r,i,s,a=e[0]?"Descargando...":"Exportar Excel",l,u,f,h,g,p,_,v=e[0]&&Ni();const b=[Qu,Zu,Ju],S=[];function C(y,R){return y[2]?0:y[1]?1:2}return f=C(e),h=S[f]=b[f](e),{c(){t=m("div"),n=m("div"),o=m("button"),o.textContent="Refrescar información",r=w(),i=m("button"),v&&v.c(),s=w(),l=z(a),u=w(),h.c(),d(o,"class","btn-refresh svelte-1fss2ef"),d(i,"class","btn-export svelte-1fss2ef"),i.disabled=e[0],d(n,"class","refresh-container svelte-1fss2ef"),d(t,"class","consolidado-container svelte-1fss2ef")},m(y,R){D(y,t,R),c(t,n),c(n,o),c(n,r),c(n,i),v&&v.m(i,null),c(i,s),c(i,l),c(t,u),S[f].m(t,null),g=!0,p||(_=[I(o,"click",e[9]),I(i,"click",e[7])],p=!0)},p(y,[R]){y[0]?v||(v=Ni(),v.c(),v.m(i,s)):v&&(v.d(1),v=null),(!g||R&1)&&a!==(a=y[0]?"Descargando...":"Exportar Excel")&&ve(l,a),(!g||R&1)&&(i.disabled=y[0]);let T=f;f=C(y),f===T?S[f].p(y,R):(Ne(),J(S[T],1,1,()=>{S[T]=null}),Pe(),h=S[f],h?h.p(y,R):(h=S[f]=b[f](y),h.c()),B(h,1),h.m(t,null))},i(y){g||(B(h),g=!0)},o(y){J(h),g=!1},d(y){y&&M(t),v&&v.d(),S[f].d(),p=!1,Ie(_)}}}function ed(e,t,n){let o,r,i,s,a;bt(e,ge,p=>n(8,a=p));const l=_i("Distrito"),u=_i("Asociación");let f=!1;async function h(){n(0,f=!0);try{const p=await fetch("http://localhost:8080/api/oil-changes/consolidated/excel",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!p.ok)throw new Error("Error al descargar el archivo");const _=await p.blob(),v=window.URL.createObjectURL(_),b=document.createElement("a");b.href=v,b.download="consolidado.xlsx",document.body.appendChild(b),b.click(),window.URL.revokeObjectURL(v),document.body.removeChild(b),ht({id:Date.now(),text:"Archivo consolidado descargado con éxito."})}catch(p){ht({id:Date.now(),text:`Error al descargar el archivo: ${p.message}`})}finally{n(0,f=!1)}}const g=()=>ge.fetchConsolidadoData();return e.$$.update=()=>{e.$$.dirty&256&&n(4,o=a.consolidated.distrito),e.$$.dirty&256&&n(3,r=a.consolidated.asociacion),e.$$.dirty&256&&n(2,i=a.isLoading),e.$$.dirty&256&&n(1,s=a.error)},[f,s,i,r,o,l,u,h,a,g]}class td extends xe{constructor(t){super(),Xe(this,t,ed,Yu,We,{})}}function Li(e,t,n){const o=e.slice();return o[4]=t[n],o}function nd(e){let t=[],n=new Map,o,r=ut(e[0]);const i=s=>s[4].id;for(let s=0;s<r.length;s+=1){let a=Li(e,r,s),l=i(a);n.set(l,t[s]=Fi(l,a))}return{c(){for(let s=0;s<t.length;s+=1)t[s].c();o=lt()},m(s,a){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(s,a);D(s,o,a)},p(s,a){a&3&&(r=ut(s[0]),t=Ds(t,a,i,1,s,r,n,o.parentNode,Ms,Fi,o,Li))},d(s){s&&M(o);for(let a=0;a<t.length;a+=1)t[a].d(s)}}}function od(e){let t;return{c(){t=m("div"),t.textContent="No hay notificaciones",d(t,"class","dropdown-item empty svelte-d2sajp")},m(n,o){D(n,t,o)},p:ce,d(n){n&&M(t)}}}function Fi(e,t){let n,o,r=t[4].text+"",i,s,a,l,u,f;function h(){return t[2](t[4])}return{key:e,first:null,c(){n=m("div"),o=m("span"),i=z(r),s=w(),a=m("button"),a.textContent="×",l=w(),d(a,"class","delete-btn svelte-d2sajp"),d(a,"title","Borrar notificación"),d(n,"class","dropdown-item svelte-d2sajp"),this.first=n},m(g,p){D(g,n,p),c(n,o),c(o,i),c(n,s),c(n,a),c(n,l),u||(f=I(a,"click",pt(h)),u=!0)},p(g,p){t=g,p&1&&r!==(r=t[4].text+"")&&ve(i,r)},d(g){g&&M(n),u=!1,f()}}}function rd(e){let t;function n(i,s){return i[0].length===0?od:nd}let o=n(e),r=o(e);return{c(){t=m("div"),r.c(),d(t,"class","dropdown-container svelte-d2sajp")},m(i,s){D(i,t,s),r.m(t,null)},p(i,[s]){o===(o=n(i))&&r?r.p(i,s):(r.d(1),r=o(i),r&&(r.c(),r.m(t,null)))},i:ce,o:ce,d(i){i&&M(t),r.d()}}}function id(e,t,n){let{messages:o=[]}=t;const r=sn();function i(a){r("delete",a)}const s=a=>i(a.id);return e.$$set=a=>{"messages"in a&&n(0,o=a.messages)},[o,i,s]}class sd extends xe{constructor(t){super(),Xe(this,t,id,rd,We,{messages:0})}}function ld(e){let t,n,o,r,i,s=e[0]?"Descargando...":"Exportar Excel",a,l,u,f,h,g,p,_=e[0]&&Ui();return f=new Bt({props:{columns:pu,data:e[1].data,totalElements:e[1].totalElements,totalPages:e[1].totalPages,currentPage:e[1].currentPage,pageSize:e[1].pageSize}}),f.$on("action",e[10]),f.$on("cellContextMenu",e[6]),f.$on("pageChange",e[4]),f.$on("sizeChange",e[5]),{c(){t=m("div"),n=m("button"),n.textContent="Refrescar información",o=w(),r=m("button"),_&&_.c(),i=w(),a=z(s),l=w(),u=m("div"),Te(f.$$.fragment),d(n,"class","btn-refresh svelte-1y9km12"),d(r,"class","btn-export svelte-1y9km12"),r.disabled=e[0],d(t,"class","refresh-container svelte-1y9km12"),d(u,"class","grid-wrapper svelte-1y9km12")},m(v,b){D(v,t,b),c(t,n),c(t,o),c(t,r),_&&_.m(r,null),c(r,i),c(r,a),D(v,l,b),D(v,u,b),Ee(f,u,null),h=!0,g||(p=[I(n,"click",e[9]),I(r,"click",e[7])],g=!0)},p(v,b){v[0]?_||(_=Ui(),_.c(),_.m(r,i)):_&&(_.d(1),_=null),(!h||b&1)&&s!==(s=v[0]?"Descargando...":"Exportar Excel")&&ve(a,s),(!h||b&1)&&(r.disabled=v[0]);const S={};b&2&&(S.data=v[1].data),b&2&&(S.totalElements=v[1].totalElements),b&2&&(S.totalPages=v[1].totalPages),b&2&&(S.currentPage=v[1].currentPage),b&2&&(S.pageSize=v[1].pageSize),f.$set(S)},i(v){h||(B(f.$$.fragment,v),h=!0)},o(v){J(f.$$.fragment,v),h=!1},d(v){v&&(M(t),M(l),M(u)),_&&_.d(),ke(f),g=!1,Ie(p)}}}function ad(e){let t,n,o,r,i;return n=new Ft({}),{c(){t=m("div"),Te(n.$$.fragment),o=w(),r=m("p"),r.textContent="Cargando inspecciones...",d(t,"class","loader-container svelte-1y9km12")},m(s,a){D(s,t,a),Ee(n,t,null),c(t,o),c(t,r),i=!0},p:ce,i(s){i||(B(n.$$.fragment,s),i=!0)},o(s){J(n.$$.fragment,s),i=!1},d(s){s&&M(t),ke(n)}}}function Ui(e){let t;return{c(){t=m("span"),t.textContent="⟳",d(t,"class","loading-icon svelte-1y9km12")},m(n,o){D(n,t,o)},d(n){n&&M(t)}}}function cd(e){let t,n,o,r;const i=[ad,ld],s=[];function a(l,u){return l[2]?0:1}return t=a(e),n=s[t]=i[t](e),{c(){n.c(),o=lt()},m(l,u){s[t].m(l,u),D(l,o,u),r=!0},p(l,[u]){let f=t;t=a(l),t===f?s[t].p(l,u):(Ne(),J(s[f],1,1,()=>{s[f]=null}),Pe(),n=s[t],n?n.p(l,u):(n=s[t]=i[t](l),n.c()),B(n,1),n.m(o.parentNode,o))},i(l){r||(B(n),r=!0)},o(l){J(n),r=!1},d(l){l&&M(o),s[t].d(l)}}}function ud(e,t,n){let o,r,i;bt(e,ge,_=>n(8,i=_));const s=sn();let a=!1;function l(_){const v=_.detail;ge.fetchDashboardData(v,o.pageSize)}function u(_){const v=_.detail;ge.fetchDashboardData(0,v)}function f(_){s("cellContextMenu",_.detail)}async function h(){n(0,a=!0);try{const _=await fetch("http://localhost:8080/api/v1/inspection/export",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!_.ok)throw new Error("Error al descargar el archivo");const v=await _.blob(),b=window.URL.createObjectURL(v),S=document.createElement("a");S.href=b,S.download="inspecciones.xlsx",document.body.appendChild(S),S.click(),window.URL.revokeObjectURL(b),document.body.removeChild(S),ht({id:Date.now(),text:"Archivo de inspecciones descargado con éxito."})}catch(_){ht({id:Date.now(),text:`Error al descargar el archivo: ${_.message}`})}finally{n(0,a=!1)}}const g=()=>ge.fetchDashboardData(),p=_=>s("gridaction",_.detail);return e.$$.update=()=>{e.$$.dirty&256&&n(1,o=i.dashboard),e.$$.dirty&256&&n(2,r=i.isLoading)},[a,o,r,s,l,u,f,h,i,g,p]}class dd extends xe{constructor(t){super(),Xe(this,t,ud,cd,We,{})}}var fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function hd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Hi={exports:{}};/** @license
 * eventsource.js
 * Available under MIT License (MIT)
 * https://github.com/Yaffle/EventSource/
 */(function(e,t){(function(n){var o=n.setTimeout,r=n.clearTimeout,i=n.XMLHttpRequest,s=n.XDomainRequest,a=n.ActiveXObject,l=n.EventSource,u=n.document,f=n.Promise,h=n.fetch,g=n.Response,p=n.TextDecoder,_=n.TextEncoder,v=n.AbortController;if(typeof window<"u"&&typeof u<"u"&&!("readyState"in u)&&u.body==null&&(u.readyState="loading",window.addEventListener("load",function(E){u.readyState="complete"},!1)),i==null&&a!=null&&(i=function(){return new a("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(E){function k(){}return k.prototype=E,new k}),Date.now||(Date.now=function(){return new Date().getTime()}),v==null){var b=h;h=function(E,k){var F=k.signal;return b(E,{headers:k.headers,credentials:k.credentials,cache:k.cache}).then(function(V){var j=V.body.getReader();return F._reader=j,F._aborted&&F._reader.cancel(),{status:V.status,statusText:V.statusText,headers:V.headers,body:{getReader:function(){return j}}}})},v=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function S(){this.bitsNeeded=0,this.codePoint=0}S.prototype.decode=function(E){function k(se,oe,de){if(de===1)return se>=128>>oe&&se<<oe<=2047;if(de===2)return se>=2048>>oe&&se<<oe<=55295||se>=57344>>oe&&se<<oe<=65535;if(de===3)return se>=65536>>oe&&se<<oe<=1114111;throw new Error}function F(se,oe){if(se===6*1)return oe>>6>15?3:oe>31?2:1;if(se===6*2)return oe>15?3:2;if(se===6*3)return 3;throw new Error}for(var V=65533,j="",q=this.bitsNeeded,Ce=this.codePoint,ee=0;ee<E.length;ee+=1){var P=E[ee];q!==0&&(P<128||P>191||!k(Ce<<6|P&63,q-6,F(q,Ce)))&&(q=0,Ce=V,j+=String.fromCharCode(Ce)),q===0?(P>=0&&P<=127?(q=0,Ce=P):P>=192&&P<=223?(q=6*1,Ce=P&31):P>=224&&P<=239?(q=6*2,Ce=P&15):P>=240&&P<=247?(q=6*3,Ce=P&7):(q=0,Ce=V),q!==0&&!k(Ce,q,F(q,Ce))&&(q=0,Ce=V)):(q-=6,Ce=Ce<<6|P&63),q===0&&(Ce<=65535?j+=String.fromCharCode(Ce):(j+=String.fromCharCode(55296+(Ce-65535-1>>10)),j+=String.fromCharCode(56320+(Ce-65535-1&1023))))}return this.bitsNeeded=q,this.codePoint=Ce,j};var C=function(){try{return new p().decode(new _().encode("test"),{stream:!0})==="test"}catch(E){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+E)}return!1};(p==null||_==null||!C())&&(p=S);var y=function(){};function R(E){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=y,this.onload=y,this.onerror=y,this.onreadystatechange=y,this._contentType="",this._xhr=E,this._sendTimeout=0,this._abort=y}R.prototype.open=function(E,k){this._abort(!0);var F=this,V=this._xhr,j=1,q=0;this._abort=function(de){F._sendTimeout!==0&&(r(F._sendTimeout),F._sendTimeout=0),(j===1||j===2||j===3)&&(j=4,V.onload=y,V.onerror=y,V.onabort=y,V.onprogress=y,V.onreadystatechange=y,V.abort(),q!==0&&(r(q),q=0),de||(F.readyState=4,F.onabort(null),F.onreadystatechange())),j=0};var Ce=function(){if(j===1){var de=0,$e="",gt=void 0;if("contentType"in V)de=200,$e="OK",gt=V.contentType;else try{de=V.status,$e=V.statusText,gt=V.getResponseHeader("Content-Type")}catch{de=0,$e="",gt=void 0}de!==0&&(j=2,F.readyState=2,F.status=de,F.statusText=$e,F._contentType=gt,F.onreadystatechange())}},ee=function(){if(Ce(),j===2||j===3){j=3;var de="";try{de=V.responseText}catch{}F.readyState=3,F.responseText=de,F.onprogress()}},P=function(de,$e){if(($e==null||$e.preventDefault==null)&&($e={preventDefault:y}),ee(),j===1||j===2||j===3){if(j=4,q!==0&&(r(q),q=0),F.readyState=4,de==="load")F.onload($e);else if(de==="error")F.onerror($e);else if(de==="abort")F.onabort($e);else throw new TypeError;F.onreadystatechange()}},se=function(de){V!=null&&(V.readyState===4?(!("onload"in V)||!("onerror"in V)||!("onabort"in V))&&P(V.responseText===""?"error":"load",de):V.readyState===3?"onprogress"in V||ee():V.readyState===2&&Ce())},oe=function(){q=o(function(){oe()},500),V.readyState===3&&ee()};"onload"in V&&(V.onload=function(de){P("load",de)}),"onerror"in V&&(V.onerror=function(de){P("error",de)}),"onabort"in V&&(V.onabort=function(de){P("abort",de)}),"onprogress"in V&&(V.onprogress=ee),"onreadystatechange"in V&&(V.onreadystatechange=function(de){se(de)}),("contentType"in V||!("ontimeout"in i.prototype))&&(k+=(k.indexOf("?")===-1?"?":"&")+"padding=true"),V.open(E,k,!0),"readyState"in V&&(q=o(function(){oe()},0))},R.prototype.abort=function(){this._abort(!1)},R.prototype.getResponseHeader=function(E){return this._contentType},R.prototype.setRequestHeader=function(E,k){var F=this._xhr;"setRequestHeader"in F&&F.setRequestHeader(E,k)},R.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},R.prototype.send=function(){if((!("ontimeout"in i.prototype)||!("sendAsBinary"in i.prototype)&&!("mozAnon"in i.prototype))&&u!=null&&u.readyState!=null&&u.readyState!=="complete"){var E=this;E._sendTimeout=o(function(){E._sendTimeout=0,E.send()},4);return}var k=this._xhr;"withCredentials"in k&&(k.withCredentials=this.withCredentials);try{k.send(void 0)}catch(F){throw F}};function T(E){return E.replace(/[A-Z]/g,function(k){return String.fromCharCode(k.charCodeAt(0)+32)})}function L(E){for(var k=Object.create(null),F=E.split(`\r
`),V=0;V<F.length;V+=1){var j=F[V],q=j.split(": "),Ce=q.shift(),ee=q.join(": ");k[T(Ce)]=ee}this._map=k}L.prototype.get=function(E){return this._map[T(E)]},i!=null&&i.HEADERS_RECEIVED==null&&(i.HEADERS_RECEIVED=2);function O(){}O.prototype.open=function(E,k,F,V,j,q,Ce){E.open("GET",j);var ee=0;E.onprogress=function(){var se=E.responseText,oe=se.slice(ee);ee+=oe.length,F(oe)},E.onerror=function(se){se.preventDefault(),V(new Error("NetworkError"))},E.onload=function(){V(null)},E.onabort=function(){V(null)},E.onreadystatechange=function(){if(E.readyState===i.HEADERS_RECEIVED){var se=E.status,oe=E.statusText,de=E.getResponseHeader("Content-Type"),$e=E.getAllResponseHeaders();k(se,oe,de,new L($e))}},E.withCredentials=q;for(var P in Ce)Object.prototype.hasOwnProperty.call(Ce,P)&&E.setRequestHeader(P,Ce[P]);return E.send(),E};function H(E){this._headers=E}H.prototype.get=function(E){return this._headers.get(E)};function $(){}$.prototype.open=function(E,k,F,V,j,q,Ce){var ee=null,P=new v,se=P.signal,oe=new p;return h(j,{headers:Ce,credentials:q?"include":"same-origin",signal:se,cache:"no-store"}).then(function(de){return ee=de.body.getReader(),k(de.status,de.statusText,de.headers.get("Content-Type"),new H(de.headers)),new f(function($e,gt){var yt=function(){ee.read().then(function(Je){if(Je.done)$e(void 0);else{var Le=oe.decode(Je.value,{stream:!0});F(Le),yt()}}).catch(function(Je){gt(Je)})};yt()})}).catch(function(de){if(de.name!=="AbortError")return de}).then(function(de){V(de)}),{abort:function(){ee!=null&&ee.cancel(),P.abort()}}};function X(){this._listeners=Object.create(null)}function te(E){o(function(){throw E},0)}X.prototype.dispatchEvent=function(E){E.target=this;var k=this._listeners[E.type];if(k!=null)for(var F=k.length,V=0;V<F;V+=1){var j=k[V];try{typeof j.handleEvent=="function"?j.handleEvent(E):j.call(this,E)}catch(q){te(q)}}},X.prototype.addEventListener=function(E,k){E=String(E);var F=this._listeners,V=F[E];V==null&&(V=[],F[E]=V);for(var j=!1,q=0;q<V.length;q+=1)V[q]===k&&(j=!0);j||V.push(k)},X.prototype.removeEventListener=function(E,k){E=String(E);var F=this._listeners,V=F[E];if(V!=null){for(var j=[],q=0;q<V.length;q+=1)V[q]!==k&&j.push(V[q]);j.length===0?delete F[E]:F[E]=j}};function Z(E){this.type=E,this.target=void 0}function Y(E,k){Z.call(this,E),this.data=k.data,this.lastEventId=k.lastEventId}Y.prototype=Object.create(Z.prototype);function le(E,k){Z.call(this,E),this.status=k.status,this.statusText=k.statusText,this.headers=k.headers}le.prototype=Object.create(Z.prototype);function ue(E,k){Z.call(this,E),this.error=k.error}ue.prototype=Object.create(Z.prototype);var pe=-1,U=0,N=1,ne=2,re=-1,x=0,K=1,W=2,A=3,G=/^text\/event\-stream(;.*)?$/i,ae=1e3,Se=18e6,Ae=function(E,k){var F=E==null?k:parseInt(E,10);return F!==F&&(F=k),ye(F)},ye=function(E){return Math.min(Math.max(E,ae),Se)},be=function(E,k,F){try{typeof k=="function"&&k.call(E,F)}catch(V){te(V)}};function he(E,k){X.call(this),k=k||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,Re(this,E,k)}function fe(){return i!=null&&"withCredentials"in i.prototype||s==null?new i:new s}var ie=h!=null&&g!=null&&"body"in g.prototype;function Re(E,k,F){k=String(k);var V=!!F.withCredentials,j=F.lastEventIdQueryParameterName||"lastEventId",q=ye(1e3),Ce=Ae(F.heartbeatTimeout,45e3),ee="",P=q,se=!1,oe=0,de=F.headers||{},$e=F.Transport,gt=ie&&$e==null?void 0:new R($e!=null?new $e:fe()),yt=$e!=null&&typeof $e!="string"?new $e:gt==null?new $:new O,Je=void 0,Le=0,it=pe,mt="",at="",_t="",Qt="",ze=x,dn=0,tt=0,Jn=function(je,Ue,qe,Qe){if(it===U)if(je===200&&qe!=null&&G.test(qe)){it=N,se=Date.now(),P=q,E.readyState=N;var Ve=new le("open",{status:je,statusText:Ue,headers:Qe});E.dispatchEvent(Ve),be(E,E.onopen,Ve)}else{var He="";je!==200?(Ue&&(Ue=Ue.replace(/\s+/g," ")),He="EventSource's response has a status "+je+" "+Ue+" that is not 200. Aborting the connection."):He="EventSource's response has a Content-Type specifying an unsupported type: "+(qe==null?"-":qe.replace(/\s+/g," "))+". Aborting the connection.",fn();var Ve=new le("error",{status:je,statusText:Ue,headers:Qe});E.dispatchEvent(Ve),be(E,E.onerror,Ve),console.error(He)}},Et=function(je){if(it===N){for(var Ue=-1,qe=0;qe<je.length;qe+=1){var Qe=je.charCodeAt(qe);(Qe===`
`.charCodeAt(0)||Qe==="\r".charCodeAt(0))&&(Ue=qe)}var Ve=(Ue!==-1?Qt:"")+je.slice(0,Ue+1);Qt=(Ue===-1?Qt:"")+je.slice(Ue+1),je!==""&&(se=Date.now(),oe+=je.length);for(var He=0;He<Ve.length;He+=1){var Qe=Ve.charCodeAt(He);if(ze===re&&Qe===`
`.charCodeAt(0))ze=x;else if(ze===re&&(ze=x),Qe==="\r".charCodeAt(0)||Qe===`
`.charCodeAt(0)){if(ze!==x){ze===K&&(tt=He+1);var vt=Ve.slice(dn,tt-1),Ge=Ve.slice(tt+(tt<He&&Ve.charCodeAt(tt)===" ".charCodeAt(0)?1:0),He);vt==="data"?(mt+=`
`,mt+=Ge):vt==="id"?at=Ge:vt==="event"?_t=Ge:vt==="retry"?(q=Ae(Ge,q),P=q):vt==="heartbeatTimeout"&&(Ce=Ae(Ge,Ce),Le!==0&&(r(Le),Le=o(function(){Ze()},Ce)))}if(ze===x){if(mt!==""){ee=at,_t===""&&(_t="message");var Ht=new Y(_t,{data:mt.slice(1),lastEventId:at});if(E.dispatchEvent(Ht),_t==="open"?be(E,E.onopen,Ht):_t==="message"?be(E,E.onmessage,Ht):_t==="error"&&be(E,E.onerror,Ht),it===ne)return}mt="",_t=""}ze=Qe==="\r".charCodeAt(0)?re:x}else ze===x&&(dn=He,ze=K),ze===K?Qe===":".charCodeAt(0)&&(tt=He+1,ze=W):ze===W&&(ze=A)}}},Yt=function(je){if(it===N||it===U){it=pe,Le!==0&&(r(Le),Le=0),Le=o(function(){Ze()},P),P=ye(Math.min(q*16,P*2)),E.readyState=U;var Ue=new ue("error",{error:je});E.dispatchEvent(Ue),be(E,E.onerror,Ue),je!=null&&console.error(je)}},fn=function(){it=ne,Je!=null&&(Je.abort(),Je=void 0),Le!==0&&(r(Le),Le=0),E.readyState=ne},Ze=function(){if(Le=0,it!==pe){if(!se&&Je!=null)Yt(new Error("No activity within "+Ce+" milliseconds. "+(it===U?"No response received.":oe+" chars received.")+" Reconnecting.")),Je!=null&&(Je.abort(),Je=void 0);else{var je=Math.max((se||Date.now())+Ce-Date.now(),1);se=!1,Le=o(function(){Ze()},je)}return}se=!1,oe=0,Le=o(function(){Ze()},Ce),it=U,mt="",_t="",at=ee,Qt="",dn=0,tt=0,ze=x;var Ue=k;if(k.slice(0,5)!=="data:"&&k.slice(0,5)!=="blob:"&&ee!==""){var qe=k.indexOf("?");Ue=qe===-1?k:k.slice(0,qe+1)+k.slice(qe+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(Ge,Ht){return Ht===j?"":Ge}),Ue+=(k.indexOf("?")===-1?"?":"&")+j+"="+encodeURIComponent(ee)}var Qe=E.withCredentials,Ve={};Ve.Accept="text/event-stream";var He=E.headers;if(He!=null)for(var vt in He)Object.prototype.hasOwnProperty.call(He,vt)&&(Ve[vt]=He[vt]);try{Je=yt.open(gt,Jn,Et,Yt,Ue,Qe,Ve)}catch(Ge){throw fn(),Ge}};E.url=k,E.readyState=U,E.withCredentials=V,E.headers=de,E._close=fn,Ze()}he.prototype=Object.create(X.prototype),he.prototype.CONNECTING=U,he.prototype.OPEN=N,he.prototype.CLOSED=ne,he.prototype.close=function(){this._close()},he.CONNECTING=U,he.OPEN=N,he.CLOSED=ne,he.prototype.withCredentials=void 0;var we=l;i!=null&&(l==null||!("withCredentials"in l.prototype))&&(we=he),function(E){{var k=E(t);k!==void 0&&(e.exports=k)}}(function(E){E.EventSourcePolyfill=he,E.NativeEventSource=l,E.EventSource=we})})(typeof globalThis>"u"?typeof window<"u"?window:typeof self<"u"?self:fd:globalThis)})(Hi,Hi.exports);function Vi(e){let t,n;return{c(){t=m("div"),n=z(e[3]),d(t,"class","error svelte-18sqb4z")},m(o,r){D(o,t,r),c(t,n)},p(o,r){r&8&&ve(n,o[3])},d(o){o&&M(t)}}}function ji(e){let t,n,o;return{c(){t=m("div"),n=z("Error del servidor: "),o=z(e[11]),d(t,"class","error svelte-18sqb4z")},m(r,i){D(r,t,i),c(t,n),c(t,o)},p(r,i){i&2048&&ve(o,r[11])},d(r){r&&M(t)}}}function pd(e){let t,n,o,r,i,s,a,l,u,f,h;return i=new Bt({props:{columns:e[17],data:e[0]}}),i.$on("action",e[16]),f=new Bt({props:{columns:e[17],data:e[1]}}),f.$on("action",e[16]),{c(){t=m("div"),n=m("div"),o=m("h3"),o.textContent="Aceites Hidráulicos",r=w(),Te(i.$$.fragment),s=w(),a=m("div"),l=m("h3"),l.textContent="Aceites de Motor",u=w(),Te(f.$$.fragment),d(o,"class","table-title svelte-18sqb4z"),d(n,"class","table-section svelte-18sqb4z"),d(l,"class","table-title svelte-18sqb4z"),d(a,"class","table-section svelte-18sqb4z"),d(t,"class","tables-container svelte-18sqb4z")},m(g,p){D(g,t,p),c(t,n),c(n,o),c(n,r),Ee(i,n,null),c(t,s),c(t,a),c(a,l),c(a,u),Ee(f,a,null),h=!0},p(g,p){const _={};p&1&&(_.data=g[0]),i.$set(_);const v={};p&2&&(v.data=g[1]),f.$set(v)},i(g){h||(B(i.$$.fragment,g),B(f.$$.fragment,g),h=!0)},o(g){J(i.$$.fragment,g),J(f.$$.fragment,g),h=!1},d(g){g&&M(t),ke(i),ke(f)}}}function gd(e){let t,n,o,r,i;return n=new Ft({}),{c(){t=m("div"),Te(n.$$.fragment),o=w(),r=m("p"),r.textContent="Cargando aceites...",d(t,"class","loader-container svelte-18sqb4z")},m(s,a){D(s,t,a),Ee(n,t,null),c(t,o),c(t,r),i=!0},p:ce,i(s){i||(B(n.$$.fragment,s),i=!0)},o(s){J(n.$$.fragment,s),i=!1},d(s){s&&M(t),ke(n)}}}function Bi(e){let t,n,o,r,i,s,a,l,u,f,h,g,p,_,v,b,S,C,y,R=e[4]&&zi(e);return{c(){t=m("div"),n=m("div"),o=m("div"),r=m("h3"),r.textContent="Editar Aceite",i=w(),s=m("button"),s.textContent="×",a=w(),l=m("form"),u=m("label"),f=z(`Nombre / Marca:\r
          `),h=m("input"),g=w(),R&&R.c(),p=w(),_=m("div"),v=m("button"),v.textContent="Cancelar",b=w(),S=m("button"),S.textContent="Guardar Cambios",d(r,"class","svelte-18sqb4z"),d(s,"class","close-btn svelte-18sqb4z"),d(o,"class","modal-header svelte-18sqb4z"),d(h,"type","text"),h.required=!0,d(h,"class","svelte-18sqb4z"),d(u,"class","svelte-18sqb4z"),d(v,"type","button"),d(v,"class","btn-cancel svelte-18sqb4z"),d(S,"type","submit"),d(S,"class","btn-save svelte-18sqb4z"),d(_,"class","modal-actions svelte-18sqb4z"),d(l,"class","modal-form svelte-18sqb4z"),d(n,"class","modal-content svelte-18sqb4z"),d(t,"class","modal-overlay svelte-18sqb4z")},m(T,L){D(T,t,L),c(t,n),c(n,o),c(o,r),c(o,i),c(o,s),c(n,a),c(n,l),c(l,u),c(u,f),c(u,h),Q(h,e[10]),c(l,g),R&&R.m(l,null),c(l,p),c(l,_),c(_,v),c(_,b),c(_,S),C||(y=[I(s,"click",e[15]),I(h,"input",e[24]),I(v,"click",e[15]),I(l,"submit",As(e[13])),I(n,"click",pt(e[20]))],C=!0)},p(T,L){L&1024&&h.value!==T[10]&&Q(h,T[10]),T[4]?R?R.p(T,L):(R=zi(T),R.c(),R.m(l,p)):R&&(R.d(1),R=null)},d(T){T&&M(t),R&&R.d(),C=!1,Ie(y)}}}function zi(e){let t,n;return{c(){t=m("p"),n=z(e[4]),d(t,"class","error svelte-18sqb4z")},m(o,r){D(o,t,r),c(t,n)},p(o,r){r&16&&ve(n,o[4])},d(o){o&&M(t)}}}function qi(e){var C;let t,n,o,r,i,s,a,l=((C=e[9])==null?void 0:C.name)+"",u,f,h,g,p,_,v,b,S;return{c(){t=m("div"),n=m("div"),o=m("h3"),o.textContent="Confirmar Eliminación",r=w(),i=m("p"),s=z('¿Está seguro que desea eliminar el registro "'),a=m("strong"),u=z(l),f=z('"?'),h=w(),g=m("div"),p=m("button"),p.textContent="Cancelar",_=w(),v=m("button"),v.textContent="Sí, Eliminar",d(p,"type","button"),d(p,"class","btn-cancel svelte-18sqb4z"),d(v,"type","button"),d(v,"class","btn-delete-confirm svelte-18sqb4z"),d(g,"class","modal-actions svelte-18sqb4z"),d(n,"class","modal-content confirmation svelte-18sqb4z"),d(t,"class","modal-overlay svelte-18sqb4z")},m(y,R){D(y,t,R),c(t,n),c(n,o),c(n,r),c(n,i),c(i,s),c(i,a),c(a,u),c(i,f),c(n,h),c(n,g),c(g,p),c(g,_),c(g,v),b||(S=[I(p,"click",e[15]),I(v,"click",e[14]),I(n,"click",pt(e[19]))],b=!0)},p(y,R){var T;R&512&&l!==(l=((T=y[9])==null?void 0:T.name)+"")&&ve(u,l)},d(y){y&&M(t),b=!1,Ie(S)}}}function md(e){let t,n,o,r,i,s,a,l,u,f,h,g,p,_,v,b,S,C,y,R,T,L,O,H,$,X,te,Z,Y,le,ue,pe,U=e[3]&&Vi(e),N=e[11]&&!e[3]&&!e[4]&&ji(e);const ne=[gd,pd],re=[];function x(A,G){return A[2]?0:1}$=x(e),X=re[$]=ne[$](e);let K=e[7]&&Bi(e),W=e[8]&&qi(e);return{c(){t=m("div"),n=m("button"),n.textContent="Refrescar información",o=w(),r=m("div"),i=m("h3"),i.textContent="Nuevo Registro de Aceite",s=w(),a=m("div"),l=m("div"),u=m("label"),u.textContent="Nombre / Marca:",f=w(),h=m("input"),g=w(),p=m("div"),_=m("label"),_.textContent="Tipo:",v=w(),b=m("select"),S=m("option"),S.textContent="Hidráulico",C=m("option"),C.textContent="Motor",y=w(),R=m("div"),T=m("button"),T.textContent="Crear",L=w(),U&&U.c(),O=w(),N&&N.c(),H=w(),X.c(),te=w(),K&&K.c(),Z=w(),W&&W.c(),Y=lt(),d(n,"class","btn-refresh svelte-18sqb4z"),d(t,"class","refresh-container svelte-18sqb4z"),d(u,"for","new-name"),d(u,"class","svelte-18sqb4z"),d(h,"id","new-name"),d(h,"placeholder","Ej: Mobil, Shell..."),d(h,"class","svelte-18sqb4z"),d(l,"class","form-field svelte-18sqb4z"),d(_,"for","new-type"),d(_,"class","svelte-18sqb4z"),S.__value="hidraulico",Q(S,S.__value),C.__value="motor",Q(C,C.__value),d(b,"id","new-type"),d(b,"class","svelte-18sqb4z"),e[6]===void 0&&rn(()=>e[23].call(b)),d(p,"class","form-field svelte-18sqb4z"),d(a,"class","form-grid svelte-18sqb4z"),d(T,"class","btn svelte-18sqb4z"),d(R,"class","form-actions svelte-18sqb4z"),d(r,"class","form-container svelte-18sqb4z")},m(A,G){D(A,t,G),c(t,n),D(A,o,G),D(A,r,G),c(r,i),c(r,s),c(r,a),c(a,l),c(l,u),c(l,f),c(l,h),Q(h,e[5]),c(a,g),c(a,p),c(p,_),c(p,v),c(p,b),c(b,S),c(b,C),Nt(b,e[6],!0),c(r,y),c(r,R),c(R,T),c(r,L),U&&U.m(r,null),D(A,O,G),N&&N.m(A,G),D(A,H,G),re[$].m(A,G),D(A,te,G),K&&K.m(A,G),D(A,Z,G),W&&W.m(A,G),D(A,Y,G),le=!0,ue||(pe=[I(n,"click",e[21]),I(h,"input",e[22]),I(b,"change",e[23]),I(T,"click",e[12])],ue=!0)},p(A,[G]){G&32&&h.value!==A[5]&&Q(h,A[5]),G&64&&Nt(b,A[6]),A[3]?U?U.p(A,G):(U=Vi(A),U.c(),U.m(r,null)):U&&(U.d(1),U=null),A[11]&&!A[3]&&!A[4]?N?N.p(A,G):(N=ji(A),N.c(),N.m(H.parentNode,H)):N&&(N.d(1),N=null);let ae=$;$=x(A),$===ae?re[$].p(A,G):(Ne(),J(re[ae],1,1,()=>{re[ae]=null}),Pe(),X=re[$],X?X.p(A,G):(X=re[$]=ne[$](A),X.c()),B(X,1),X.m(te.parentNode,te)),A[7]?K?K.p(A,G):(K=Bi(A),K.c(),K.m(Z.parentNode,Z)):K&&(K.d(1),K=null),A[8]?W?W.p(A,G):(W=qi(A),W.c(),W.m(Y.parentNode,Y)):W&&(W.d(1),W=null)},i(A){le||(B(X),le=!0)},o(A){J(X),le=!1},d(A){A&&(M(t),M(o),M(r),M(O),M(H),M(te),M(Z),M(Y)),U&&U.d(),N&&N.d(A),re[$].d(A),K&&K.d(A),W&&W.d(A),ue=!1,Ie(pe)}}}function _d(e,t,n){let o,r;bt(e,ge,Z=>n(18,r=Z));let i=[],s=[],a=r.isLoading,l="",u="",f="",h="hidraulico",g=!1,p=!1,_=null,v="";async function b(){if(n(3,l=""),!f.trim()){n(3,l="El campo Nombre / Marca no puede estar vacío.");return}try{await ge.createOil({name:f,type:h}),n(5,f="")}catch{}}async function S(){if(n(4,u=""),!v.trim()){n(4,u="El nombre no puede estar vacío.");return}try{await ge.updateOil(_.id,{..._,name:v}),y()}catch{}}async function C(){try{await ge.deleteOil(_.id),y()}catch{}}function y(){n(7,g=!1),n(8,p=!1),n(9,_=null)}function R(Z){const{type:Y,data:le}=Z.detail;Y==="edit"?(n(9,_=le),n(10,v=le.name),n(4,u=""),n(7,g=!0)):Y==="delete"&&(n(9,_=le),n(8,p=!0))}const T=[{header:"Nombre",accessorKey:"name"},{header:"Tipo",accessorKey:"type"},{header:"Acciones",id:"actions",meta:{isAction:!0}}];function L(Z){wt.call(this,e,Z)}function O(Z){wt.call(this,e,Z)}const H=()=>ge.fetchOils();function $(){f=this.value,n(5,f)}function X(){h=ho(this),n(6,h)}function te(){v=this.value,n(10,v)}return e.$$.update=()=>{if(e.$$.dirty&262144){const Z=r.oils||[];n(0,i=Z.filter(Y=>Y.type&&Y.type.trim().toLowerCase()==="hidraulico")),n(1,s=Z.filter(Y=>Y.type&&Y.type.trim().toLowerCase()==="motor"))}e.$$.dirty&262144&&n(2,a=r.isLoading),e.$$.dirty&262144&&n(11,o=r.error||"")},[i,s,a,l,u,f,h,g,p,_,v,o,b,S,C,y,R,T,r,L,O,H,$,X,te]}class vd extends xe{constructor(t){super(),Xe(this,t,_d,md,We,{})}}var qs={exports:{}},dr={};globalThis.crypto&&globalThis.crypto.getRandomValues?dr.randomBytes=function(e){var t=new Uint8Array(e);return globalThis.crypto.getRandomValues(t),t}:dr.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(Math.random()*256);return t};var bd=dr,Wi="abcdefghijklmnopqrstuvwxyz012345",Cn={string:function(e){for(var t=Wi.length,n=bd.randomBytes(e),o=[],r=0;r<e;r++)o.push(Wi.substr(n[r]%t,1));return o.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length,n=new Array(t+1).join("0");return(n+this.number(e)).slice(-t)}};(function(e){var t=Cn,n={},o=!1,r=globalThis.chrome&&globalThis.chrome.app&&globalThis.chrome.app.runtime;e.exports={attachEvent:function(s,a){typeof globalThis.addEventListener<"u"?globalThis.addEventListener(s,a,!1):globalThis.document&&globalThis.attachEvent&&(globalThis.document.attachEvent("on"+s,a),globalThis.attachEvent("on"+s,a))},detachEvent:function(s,a){typeof globalThis.addEventListener<"u"?globalThis.removeEventListener(s,a,!1):globalThis.document&&globalThis.detachEvent&&(globalThis.document.detachEvent("on"+s,a),globalThis.detachEvent("on"+s,a))},unloadAdd:function(s){if(r)return null;var a=t.string(8);return n[a]=s,o&&setTimeout(this.triggerUnloadCallbacks,0),a},unloadDel:function(s){s in n&&delete n[s]},triggerUnloadCallbacks:function(){for(var s in n)n[s](),delete n[s]}};var i=function(){o||(o=!0,e.exports.triggerUnloadCallbacks())};r||e.exports.attachEvent("unload",i)})(qs);var Zt=qs.exports,wd=function(t,n){if(n=n.split(":")[0],t=+t,!t)return!1;switch(n){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0},Ir={},Cd=Object.prototype.hasOwnProperty,Sd;function xi(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function Gi(e){try{return encodeURIComponent(e)}catch{return null}}function yd(e){for(var t=/([^=?#&]+)=?([^&]*)/g,n={},o;o=t.exec(e);){var r=xi(o[1]),i=xi(o[2]);r===null||i===null||r in n||(n[r]=i)}return n}function Ed(e,t){t=t||"";var n=[],o,r;typeof t!="string"&&(t="?");for(r in e)if(Cd.call(e,r)){if(o=e[r],!o&&(o===null||o===Sd||isNaN(o))&&(o=""),r=Gi(r),o=Gi(o),r===null||o===null)continue;n.push(r+"="+o)}return n.length?t+n.join("&"):""}Ir.stringify=Ed;Ir.parse=yd;var Ws=wd,yo=Ir,kd=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,xs=/[\n\r\t]/g,Rd=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,Gs=/:\d+$/,Td=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Ad=/^[a-zA-Z]:/;function Mr(e){return(e||"").toString().replace(kd,"")}var fr=[["#","hash"],["?","query"],function(t,n){return It(n.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Ki={hash:1,query:1};function Ks(e){var t;typeof window<"u"?t=window:typeof globalThis<"u"?t=globalThis:typeof self<"u"?t=self:t={};var n=t.location||{};e=e||n;var o={},r=typeof e,i;if(e.protocol==="blob:")o=new $t(unescape(e.pathname),{});else if(r==="string"){o=new $t(e,{});for(i in Ki)delete o[i]}else if(r==="object"){for(i in e)i in Ki||(o[i]=e[i]);o.slashes===void 0&&(o.slashes=Rd.test(e.href))}return o}function It(e){return e==="file:"||e==="ftp:"||e==="http:"||e==="https:"||e==="ws:"||e==="wss:"}function Xs(e,t){e=Mr(e),e=e.replace(xs,""),t=t||{};var n=Td.exec(e),o=n[1]?n[1].toLowerCase():"",r=!!n[2],i=!!n[3],s=0,a;return r?i?(a=n[2]+n[3]+n[4],s=n[2].length+n[3].length):(a=n[2]+n[4],s=n[2].length):i?(a=n[3]+n[4],s=n[3].length):a=n[4],o==="file:"?s>=2&&(a=a.slice(2)):It(o)?a=n[4]:o?r&&(a=a.slice(2)):s>=2&&It(t.protocol)&&(a=n[4]),{protocol:o,slashes:r||It(o),slashesCount:s,rest:a}}function Od(e,t){if(e==="")return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),o=n.length,r=n[o-1],i=!1,s=0;o--;)n[o]==="."?n.splice(o,1):n[o]===".."?(n.splice(o,1),s++):s&&(o===0&&(i=!0),n.splice(o,1),s--);return i&&n.unshift(""),(r==="."||r==="..")&&n.push(""),n.join("/")}function $t(e,t,n){if(e=Mr(e),e=e.replace(xs,""),!(this instanceof $t))return new $t(e,t,n);var o,r,i,s,a,l,u=fr.slice(),f=typeof t,h=this,g=0;for(f!=="object"&&f!=="string"&&(n=t,t=null),n&&typeof n!="function"&&(n=yo.parse),t=Ks(t),r=Xs(e||"",t),o=!r.protocol&&!r.slashes,h.slashes=r.slashes||o&&t.slashes,h.protocol=r.protocol||t.protocol||"",e=r.rest,(r.protocol==="file:"&&(r.slashesCount!==2||Ad.test(e))||!r.slashes&&(r.protocol||r.slashesCount<2||!It(h.protocol)))&&(u[3]=[/(.*)/,"pathname"]);g<u.length;g++){if(s=u[g],typeof s=="function"){e=s(e,h);continue}i=s[0],l=s[1],i!==i?h[l]=e:typeof i=="string"?(a=i==="@"?e.lastIndexOf(i):e.indexOf(i),~a&&(typeof s[2]=="number"?(h[l]=e.slice(0,a),e=e.slice(a+s[2])):(h[l]=e.slice(a),e=e.slice(0,a)))):(a=i.exec(e))&&(h[l]=a[1],e=e.slice(0,a.index)),h[l]=h[l]||o&&s[3]&&t[l]||"",s[4]&&(h[l]=h[l].toLowerCase())}n&&(h.query=n(h.query)),o&&t.slashes&&h.pathname.charAt(0)!=="/"&&(h.pathname!==""||t.pathname!=="")&&(h.pathname=Od(h.pathname,t.pathname)),h.pathname.charAt(0)!=="/"&&It(h.protocol)&&(h.pathname="/"+h.pathname),Ws(h.port,h.protocol)||(h.host=h.hostname,h.port=""),h.username=h.password="",h.auth&&(a=h.auth.indexOf(":"),~a?(h.username=h.auth.slice(0,a),h.username=encodeURIComponent(decodeURIComponent(h.username)),h.password=h.auth.slice(a+1),h.password=encodeURIComponent(decodeURIComponent(h.password))):h.username=encodeURIComponent(decodeURIComponent(h.auth)),h.auth=h.password?h.username+":"+h.password:h.username),h.origin=h.protocol!=="file:"&&It(h.protocol)&&h.host?h.protocol+"//"+h.host:"null",h.href=h.toString()}function Id(e,t,n){var o=this;switch(e){case"query":typeof t=="string"&&t.length&&(t=(n||yo.parse)(t)),o[e]=t;break;case"port":o[e]=t,Ws(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,Gs.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var r=e==="pathname"?"/":"#";o[e]=t.charAt(0)!==r?r+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var i=t.indexOf(":");~i?(o.username=t.slice(0,i),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(i+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var s=0;s<fr.length;s++){var a=fr[s];a[4]&&(o[a[1]]=o[a[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin=o.protocol!=="file:"&&It(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o}function Md(e){(!e||typeof e!="function")&&(e=yo.stringify);var t,n=this,o=n.host,r=n.protocol;r&&r.charAt(r.length-1)!==":"&&(r+=":");var i=r+(n.protocol&&n.slashes||It(n.protocol)?"//":"");return n.username?(i+=n.username,n.password&&(i+=":"+n.password),i+="@"):n.password?(i+=":"+n.password,i+="@"):n.protocol!=="file:"&&It(n.protocol)&&!o&&n.pathname!=="/"&&(i+="@"),(o[o.length-1]===":"||Gs.test(n.hostname)&&!n.port)&&(o+=":"),i+=o+n.pathname,t=typeof n.query=="object"?e(n.query):n.query,t&&(i+=t.charAt(0)!=="?"?"?"+t:t),n.hash&&(i+=n.hash),i}$t.prototype={set:Id,toString:Md};$t.extractProtocol=Xs;$t.location=Ks;$t.trimLeft=Mr;$t.qs=yo;var Js=$t,Dd=Js,St={getOrigin:function(e){if(!e)return null;var t=new Dd(e);if(t.protocol==="file:")return null;var n=t.port;return n||(n=t.protocol==="https:"?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(e.indexOf("?")===-1?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}},hr={exports:{}};typeof Object.create=="function"?hr.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:hr.exports=function(t,n){if(n){t.super_=n;var o=function(){};o.prototype=n.prototype,t.prototype=new o,t.prototype.constructor=t}};var Me=hr.exports,et={};function Eo(){this._listeners={}}Eo.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];n.indexOf(t)===-1&&(n=n.concat([t])),this._listeners[e]=n};Eo.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var o=n.indexOf(t);if(o!==-1){n.length>1?this._listeners[e]=n.slice(0,o).concat(n.slice(o+1)):delete this._listeners[e];return}}};Eo.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=arguments.length===1?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var o=this._listeners[t],r=0;r<o.length;r++)o[r].apply(this,n)};var Zs=Eo,Nd=Me,ko=Zs;function Jt(){ko.call(this)}Nd(Jt,ko);Jt.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}};Jt.prototype.once=function(e,t){var n=this,o=!1;function r(){n.removeListener(e,r),o||(o=!0,t.apply(this,arguments))}this.on(e,r)};Jt.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,o=new Array(n-1),r=1;r<n;r++)o[r-1]=arguments[r];for(var i=0;i<t.length;i++)t[i].apply(this,o)}};Jt.prototype.on=Jt.prototype.addListener=ko.prototype.addEventListener;Jt.prototype.removeListener=ko.prototype.removeEventListener;et.EventEmitter=Jt;var pr={exports:{}},Xi=globalThis.WebSocket||globalThis.MozWebSocket;Xi?pr.exports=function(t){return new Xi(t)}:pr.exports=void 0;var Pd=pr.exports,Qs=Zt,$d=St,Ld=Me,Ys=et.EventEmitter,el=Pd,Ji=function(){};function zt(e,t,n){if(!zt.enabled())throw new Error("Transport created when disabled");Ys.call(this);var o=this,r=$d.addPath(e,"/websocket");r.slice(0,5)==="https"?r="wss"+r.slice(5):r="ws"+r.slice(4),this.url=r,this.ws=new el(this.url,[],n),this.ws.onmessage=function(i){Ji("message event",i.data),o.emit("message",i.data)},this.unloadRef=Qs.unloadAdd(function(){o.ws.close()}),this.ws.onclose=function(i){Ji("close event",i.code,i.reason),o.emit("close",i.code,i.reason),o._cleanup()},this.ws.onerror=function(i){o.emit("close",1006,"WebSocket connection broken"),o._cleanup()}}Ld(zt,Ys);zt.prototype.send=function(e){var t="["+e+"]";this.ws.send(t)};zt.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()};zt.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),Qs.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()};zt.enabled=function(){return!!el};zt.transportName="websocket";zt.roundTrips=2;var Fd=zt,Ud=Me,tl=et.EventEmitter,Hd=function(){};function ln(e,t){tl.call(this),this.sendBuffer=[],this.sender=t,this.url=e}Ud(ln,tl);ln.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()};ln.prototype.sendScheduleWait=function(){var e=this,t;this.sendStop=function(){e.sendStop=null,clearTimeout(t)},t=setTimeout(function(){e.sendStop=null,e.sendSchedule()},25)};ln.prototype.sendSchedule=function(){Hd("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(n){e.sendStop=null,n?(e.emit("close",n.code||1006,"Sending error: "+n),e.close()):e.sendScheduleWait()}),this.sendBuffer=[]}};ln.prototype._cleanup=function(){this.removeAllListeners()};ln.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)};var Vd=ln,jd=Me,nl=et.EventEmitter,Bd=function(){};function Ro(e,t,n){nl.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}jd(Ro,nl);Ro.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(n){e.emit("message",n)}),t.once("close",function(n,o){Bd("close",n,o,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||(o==="network"?e._scheduleReceiver():(e.emit("close",n||1006,o),e.removeAllListeners()))})};Ro.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()};var zd=Ro,qd=Me,Wd=St,Dr=Vd,xd=zd;function Nr(e,t,n,o,r){var i=Wd.addPath(e,t),s=this;Dr.call(this,e,n),this.poll=new xd(o,i,r),this.poll.on("message",function(a){s.emit("message",a)}),this.poll.once("close",function(a,l){s.poll=null,s.emit("close",a,l),s.close()})}qd(Nr,Dr);Nr.prototype.close=function(){Dr.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)};var ol=Nr,Gd=Me,Kd=St,rl=ol;function Xd(e){return function(t,n,o){var r={};typeof n=="string"&&(r.headers={"Content-type":"text/plain"});var i=Kd.addPath(t,"/xhr_send"),s=new e("POST",i,n,r);return s.once("finish",function(a){if(s=null,a!==200&&a!==204)return o(new Error("http status "+a));o()}),function(){s.close(),s=null;var a=new Error("Aborted");a.code=1e3,o(a)}}}function il(e,t,n,o){rl.call(this,e,t,Xd(o),n,o)}Gd(il,rl);var Sn=il,Jd=Me,sl=et.EventEmitter;function Hn(e,t){sl.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(o,r){n._chunkHandler(o,r),n.xo=null;var i=o===200?"network":"permanent";n.emit("close",null,i),n._cleanup()})}Jd(Hn,sl);Hn.prototype._chunkHandler=function(e,t){if(!(e!==200||!t))for(var n=-1;;this.bufferPosition+=n+1){var o=t.slice(this.bufferPosition);if(n=o.indexOf(`
`),n===-1)break;var r=o.slice(0,n);r&&this.emit("message",r)}};Hn.prototype._cleanup=function(){this.removeAllListeners()};Hn.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()};var To=Hn,ll=et.EventEmitter,Zd=Me,al=Zt,Qd=St,$n=globalThis.XMLHttpRequest,Wo=function(){};function Lt(e,t,n,o){var r=this;ll.call(this),setTimeout(function(){r._start(e,t,n,o)},0)}Zd(Lt,ll);Lt.prototype._start=function(e,t,n,o){var r=this;try{this.xhr=new $n}catch{}if(!this.xhr){this.emit("finish",0,"no xhr support"),this._cleanup();return}t=Qd.addQuery(t,"t="+ +new Date),this.unloadRef=al.unloadAdd(function(){r._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){Wo("xhr timeout"),r.emit("finish",0,""),r._cleanup(!1)})}catch{this.emit("finish",0,""),this._cleanup(!1);return}if((!o||!o.noCredentials)&&Lt.supportsCORS&&(this.xhr.withCredentials=!0),o&&o.headers)for(var i in o.headers)this.xhr.setRequestHeader(i,o.headers[i]);this.xhr.onreadystatechange=function(){if(r.xhr){var s=r.xhr,a,l;switch(Wo("readyState",s.readyState),s.readyState){case 3:try{l=s.status,a=s.responseText}catch{}l===1223&&(l=204),l===200&&a&&a.length>0&&r.emit("chunk",l,a);break;case 4:l=s.status,l===1223&&(l=204),(l===12005||l===12029)&&(l=0),Wo("finish",l,s.responseText),r.emit("finish",l,s.responseText),r._cleanup(!1);break}}};try{r.xhr.send(n)}catch{r.emit("finish",0,""),r._cleanup(!1)}};Lt.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),al.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}};Lt.prototype.close=function(){this._cleanup(!0)};Lt.enabled=!!$n;var Zi=["Active"].concat("Object").join("X");!Lt.enabled&&Zi in globalThis&&($n=function(){try{return new globalThis[Zi]("Microsoft.XMLHTTP")}catch{return null}},Lt.enabled=!!new $n);var cl=!1;try{cl="withCredentials"in new $n}catch{}Lt.supportsCORS=cl;var ul=Lt,Yd=Me,_o=ul;function Pr(e,t,n,o){_o.call(this,e,t,n,o)}Yd(Pr,_o);Pr.enabled=_o.enabled&&_o.supportsCORS;var Ao=Pr,ef=Me,$r=ul;function Lr(e,t,n){$r.call(this,e,t,n,{noCredentials:!0})}ef(Lr,$r);Lr.enabled=$r.enabled;var Vn=Lr,jn={isOpera:function(){return globalThis.navigator&&/opera/i.test(globalThis.navigator.userAgent)},isKonqueror:function(){return globalThis.navigator&&/konqueror/i.test(globalThis.navigator.userAgent)},hasDomain:function(){if(!globalThis.document)return!0;try{return!!globalThis.document.domain}catch{return!1}}},tf=Me,dl=Sn,nf=To,gr=Ao,of=Vn,rf=jn;function yn(e){if(!of.enabled&&!gr.enabled)throw new Error("Transport created when disabled");dl.call(this,e,"/xhr_streaming",nf,gr)}tf(yn,dl);yn.enabled=function(e){return e.nullOrigin||rf.isOpera()?!1:gr.enabled};yn.transportName="xhr-streaming";yn.roundTrips=2;yn.needBody=!!globalThis.document;var sf=yn,fl=et.EventEmitter,lf=Me,hl=Zt,af=jn,cf=St,uf=function(){};function an(e,t,n){var o=this;fl.call(this),setTimeout(function(){o._start(e,t,n)},0)}lf(an,fl);an.prototype._start=function(e,t,n){var o=this,r=new globalThis.XDomainRequest;t=cf.addQuery(t,"t="+ +new Date),r.onerror=function(){o._error()},r.ontimeout=function(){o._error()},r.onprogress=function(){uf("progress",r.responseText),o.emit("chunk",200,r.responseText)},r.onload=function(){o.emit("finish",200,r.responseText),o._cleanup(!1)},this.xdr=r,this.unloadRef=hl.unloadAdd(function(){o._cleanup(!0)});try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(n)}catch{this._error()}};an.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)};an.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),hl.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}};an.prototype.close=function(){this._cleanup(!0)};an.enabled=!!(globalThis.XDomainRequest&&af.hasDomain());var Fr=an,df=Me,pl=Sn,ff=To,mr=Fr;function Bn(e){if(!mr.enabled)throw new Error("Transport created when disabled");pl.call(this,e,"/xhr_streaming",ff,mr)}df(Bn,pl);Bn.enabled=function(e){return e.cookie_needed||e.nullOrigin?!1:mr.enabled&&e.sameScheme};Bn.transportName="xdr-streaming";Bn.roundTrips=2;var gl=Bn,ml=globalThis.EventSource,hf=Me,_l=et.EventEmitter,pf=ml,Qi=function(){};function zn(e){_l.call(this);var t=this,n=this.es=new pf(e);n.onmessage=function(o){Qi("message",o.data),t.emit("message",decodeURI(o.data))},n.onerror=function(o){Qi("error",n.readyState);var r=n.readyState!==2?"network":"permanent";t._cleanup(),t._close(r)}}hf(zn,_l);zn.prototype.abort=function(){this._cleanup(),this._close("user")};zn.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)};zn.prototype._close=function(e){var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)};var gf=zn,mf=Me,vl=Sn,_f=gf,vf=Ao,bf=ml;function En(e){if(!En.enabled())throw new Error("Transport created when disabled");vl.call(this,e,"/eventsource",_f,vf)}mf(En,vl);En.enabled=function(){return!!bf};En.transportName="eventsource";En.roundTrips=2;var Yi=En,xo,es;function bl(){return es||(es=1,xo="1.6.1"),xo}var wl={exports:{}};(function(e){var t=Zt,n=jn;e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in globalThis||(globalThis[e.exports.WPrefix]={})},postMessage:function(o,r){globalThis.parent!==globalThis&&globalThis.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:o,data:r||""}),"*")},createIframe:function(o,r){var i=globalThis.document.createElement("iframe"),s,a,l=function(){clearTimeout(s);try{i.onload=null}catch{}i.onerror=null},u=function(){i&&(l(),setTimeout(function(){i&&i.parentNode.removeChild(i),i=null},0),t.unloadDel(a))},f=function(g){i&&(u(),r(g))},h=function(g,p){setTimeout(function(){try{i&&i.contentWindow&&i.contentWindow.postMessage(g,p)}catch{}},0)};return i.src=o,i.style.display="none",i.style.position="absolute",i.onerror=function(){f("onerror")},i.onload=function(){clearTimeout(s),s=setTimeout(function(){f("onload timeout")},2e3)},globalThis.document.body.appendChild(i),s=setTimeout(function(){f("timeout")},15e3),a=t.unloadAdd(u),{post:h,cleanup:u,loaded:l}},createHtmlfile:function(o,r){var i=["Active"].concat("Object").join("X"),s=new globalThis[i]("htmlfile"),a,l,u,f=function(){clearTimeout(a),u.onerror=null},h=function(){s&&(f(),t.unloadDel(l),u.parentNode.removeChild(u),u=s=null,CollectGarbage())},g=function(v){s&&(h(),r(v))},p=function(v,b){try{setTimeout(function(){u&&u.contentWindow&&u.contentWindow.postMessage(v,b)},0)}catch{}};s.open(),s.write('<html><script>document.domain="'+globalThis.document.domain+'";<\/script></html>'),s.close(),s.parentWindow[e.exports.WPrefix]=globalThis[e.exports.WPrefix];var _=s.createElement("div");return s.body.appendChild(_),u=s.createElement("iframe"),_.appendChild(u),u.src=o,u.onerror=function(){g("onerror")},a=setTimeout(function(){g("timeout")},15e3),l=t.unloadAdd(h),{post:p,cleanup:h,loaded:f}}},e.exports.iframeEnabled=!1,globalThis.document&&(e.exports.iframeEnabled=(typeof globalThis.postMessage=="function"||typeof globalThis.postMessage=="object")&&!n.isKonqueror())})(wl);var qn=wl.exports,wf=Me,Cl=et.EventEmitter,Cf=bl(),_r=St,Sl=qn,yl=Zt,Sf=Cn,Rn=function(){};function Ut(e,t,n){if(!Ut.enabled())throw new Error("Transport created when disabled");Cl.call(this);var o=this;this.origin=_r.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=Sf.string(8);var r=_r.addPath(n,"/iframe.html")+"#"+this.windowId;this.iframeObj=Sl.createIframe(r,function(i){o.emit("close",1006,"Unable to load an iframe ("+i+")"),o.close()}),this.onmessageCallback=this._message.bind(this),yl.attachEvent("message",this.onmessageCallback)}wf(Ut,Cl);Ut.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){yl.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}};Ut.prototype._message=function(e){if(Rn("message",e.data),!_r.isOriginEqual(e.origin,this.origin)){Rn("not same origin",e.origin,this.origin);return}var t;try{t=JSON.parse(e.data)}catch{Rn("bad json",e.data);return}if(t.windowId!==this.windowId){Rn("mismatched window id",t.windowId,this.windowId);return}switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([Cf,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=JSON.parse(t.data)}catch{Rn("bad json",t.data);return}this.emit("close",n[0],n[1]),this.close();break}};Ut.prototype.postMessage=function(e,t){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)};Ut.prototype.send=function(e){this.postMessage("m",e)};Ut.enabled=function(){return Sl.iframeEnabled};Ut.transportName="iframe";Ut.roundTrips=2;var El=Ut,Ur={isObject:function(e){var t=typeof e;return t==="function"||t==="object"&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,o=1,r=arguments.length;o<r;o++){t=arguments[o];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}},yf=Me,oo=El,Ef=Ur,Go=function(e){function t(n,o){oo.call(this,e.transportName,n,o)}return yf(t,oo),t.enabled=function(n,o){if(!globalThis.document)return!1;var r=Ef.extend({},o);return r.sameOrigin=!0,e.enabled(r)&&oo.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=oo.roundTrips+e.roundTrips-1,t.facadeTransport=e,t},kf=Me,en=qn,Rf=St,kl=et.EventEmitter,Tf=Cn,Af=function(){};function At(e){kl.call(this);var t=this;en.polluteGlobalNamespace(),this.id="a"+Tf.string(6),e=Rf.addQuery(e,"c="+decodeURIComponent(en.WPrefix+"."+this.id)),Af("using htmlfile",At.htmlfileEnabled);var n=At.htmlfileEnabled?en.createHtmlfile:en.createIframe;globalThis[en.WPrefix][this.id]={start:function(){t.iframeObj.loaded()},message:function(o){t.emit("message",o)},stop:function(){t._cleanup(),t._close("network")}},this.iframeObj=n(e,function(){t._cleanup(),t._close("permanent")})}kf(At,kl);At.prototype.abort=function(){this._cleanup(),this._close("user")};At.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete globalThis[en.WPrefix][this.id]};At.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()};At.htmlfileEnabled=!1;var ts=["Active"].concat("Object").join("X");if(ts in globalThis)try{At.htmlfileEnabled=!!new globalThis[ts]("htmlfile")}catch{}At.enabled=At.htmlfileEnabled||en.iframeEnabled;var Of=At,If=Me,vr=Of,Mf=Vn,Rl=Sn;function Wn(e){if(!vr.enabled)throw new Error("Transport created when disabled");Rl.call(this,e,"/htmlfile",vr,Mf)}If(Wn,Rl);Wn.enabled=function(e){return vr.enabled&&e.sameOrigin};Wn.transportName="htmlfile";Wn.roundTrips=2;var ns=Wn,Df=Me,Tl=Sn,Nf=To,br=Ao,Al=Vn;function xn(e){if(!Al.enabled&&!br.enabled)throw new Error("Transport created when disabled");Tl.call(this,e,"/xhr",Nf,br)}Df(xn,Tl);xn.enabled=function(e){return e.nullOrigin?!1:Al.enabled&&e.sameOrigin?!0:br.enabled};xn.transportName="xhr-polling";xn.roundTrips=2;var os=xn,Pf=Me,Ol=Sn,$f=gl,Lf=To,rs=Fr;function Gn(e){if(!rs.enabled)throw new Error("Transport created when disabled");Ol.call(this,e,"/xhr",Lf,rs)}Pf(Gn,Ol);Gn.enabled=$f.enabled;Gn.transportName="xdr-polling";Gn.roundTrips=2;var Ff=Gn,Nn=qn,Il=Cn,Uf=jn,Hf=St,Vf=Me,Ml=et.EventEmitter,jf=function(){};function Ct(e){var t=this;Ml.call(this),Nn.polluteGlobalNamespace(),this.id="a"+Il.string(6);var n=Hf.addQuery(e,"c="+encodeURIComponent(Nn.WPrefix+"."+this.id));globalThis[Nn.WPrefix][this.id]=this._callback.bind(this),this._createScript(n),this.timeoutId=setTimeout(function(){t._abort(new Error("JSONP script loaded abnormally (timeout)"))},Ct.timeout)}Vf(Ct,Ml);Ct.prototype.abort=function(){if(globalThis[Nn.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}};Ct.timeout=35e3;Ct.scriptErrorTimeout=1e3;Ct.prototype._callback=function(e){this._cleanup(),!this.aborting&&(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())};Ct.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()};Ct.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete globalThis[Nn.WPrefix][this.id]};Ct.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},Ct.scriptErrorTimeout))};Ct.prototype._createScript=function(e){var t=this,n=this.script=globalThis.document.createElement("script"),o;if(n.id="a"+Il.string(8),n.src=e,n.type="text/javascript",n.charset="UTF-8",n.onerror=this._scriptError.bind(this),n.onload=function(){t._abort(new Error("JSONP script loaded abnormally (onload)"))},n.onreadystatechange=function(){if(jf("onreadystatechange",n.readyState),/loaded|closed/.test(n.readyState)){if(n&&n.htmlFor&&n.onclick){t.loadedOkay=!0;try{n.onclick()}catch{}}n&&t._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof n.async>"u"&&globalThis.document.attachEvent)if(Uf.isOpera())o=this.script2=globalThis.document.createElement("script"),o.text="try{var a = document.getElementById('"+n.id+"'); if(a)a.onerror();}catch(x){};",n.async=o.async=!1;else{try{n.htmlFor=n.id,n.event="onclick"}catch{}n.async=!0}typeof n.async<"u"&&(n.async=!0);var r=globalThis.document.getElementsByTagName("head")[0];r.insertBefore(n,r.firstChild),o&&r.insertBefore(o,r.firstChild)};var Bf=Ct,zf=Cn,is=St,qf=function(){},ct,Pn;function Wf(e){try{return globalThis.document.createElement('<iframe name="'+e+'">')}catch{var t=globalThis.document.createElement("iframe");return t.name=e,t}}function xf(){ct=globalThis.document.createElement("form"),ct.style.display="none",ct.style.position="absolute",ct.method="POST",ct.enctype="application/x-www-form-urlencoded",ct.acceptCharset="UTF-8",Pn=globalThis.document.createElement("textarea"),Pn.name="d",ct.appendChild(Pn),globalThis.document.body.appendChild(ct)}var Gf=function(e,t,n){ct||xf();var o="a"+zf.string(8);ct.target=o,ct.action=is.addQuery(is.addPath(e,"/jsonp_send"),"i="+o);var r=Wf(o);r.id=o,r.style.display="none",ct.appendChild(r);try{Pn.value=t}catch{}ct.submit();var i=function(s){r.onerror&&(r.onreadystatechange=r.onerror=r.onload=null,setTimeout(function(){r.parentNode.removeChild(r),r=null},500),Pn.value="",n(s))};return r.onerror=function(){i()},r.onload=function(){i()},r.onreadystatechange=function(s){qf("onreadystatechange",o,r.readyState),r.readyState==="complete"&&i()},function(){i(new Error("Aborted"))}},Kf=Me,Dl=ol,Xf=Bf,Jf=Gf;function cn(e){if(!cn.enabled())throw new Error("Transport created when disabled");Dl.call(this,e,"/jsonp",Jf,Xf)}Kf(cn,Dl);cn.enabled=function(){return!!globalThis.document};cn.transportName="jsonp-polling";cn.roundTrips=1;cn.needBody=!0;var Zf=cn,Qf=[Fd,sf,gl,Yi,Go(Yi),ns,Go(ns),os,Ff,Go(os),Zf],Ln=Array.prototype,Hr=Object.prototype,Yf=Function.prototype,Fn=String.prototype,Ko=Ln.slice,Vr=Hr.toString,Nl=function(e){return Hr.toString.call(e)==="[object Function]"},eh=function(t){return Vr.call(t)==="[object Array]"},Pl=function(t){return Vr.call(t)==="[object String]"},th=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}}(),wr;th?wr=function(e,t,n,o){!o&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:wr=function(e,t,n,o){!o&&t in e||(e[t]=n)};var Kn=function(e,t,n){for(var o in t)Hr.hasOwnProperty.call(t,o)&&wr(e,o,t[o],n)},$l=function(e){if(e==null)throw new TypeError("can't convert "+e+" to object");return Object(e)};function nh(e){var t=+e;return t!==t?t=0:t!==0&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function oh(e){return e>>>0}function Xo(){}Kn(Yf,{bind:function(t){var n=this;if(!Nl(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var o=Ko.call(arguments,1),r=function(){if(this instanceof l){var u=n.apply(this,o.concat(Ko.call(arguments)));return Object(u)===u?u:this}else return n.apply(t,o.concat(Ko.call(arguments)))},i=Math.max(0,n.length-o.length),s=[],a=0;a<i;a++)s.push("$"+a);var l=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this, arguments); }")(r);return n.prototype&&(Xo.prototype=n.prototype,l.prototype=new Xo,Xo.prototype=null),l}});Kn(Array,{isArray:eh});var ss=Object("a"),Ll=ss[0]!=="a"||!(0 in ss),rh=function(t){var n=!0,o=!0;return t&&(t.call("foo",function(r,i,s){typeof s!="object"&&(n=!1)}),t.call([1],function(){o=typeof this=="string"},"x")),!!t&&n&&o};Kn(Ln,{forEach:function(t){var n=$l(this),o=Ll&&Pl(this)?this.split(""):n,r=arguments[1],i=-1,s=o.length>>>0;if(!Nl(t))throw new TypeError;for(;++i<s;)i in o&&t.call(r,o[i],i,n)}},!rh(Ln.forEach));var ih=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;Kn(Ln,{indexOf:function(t){var n=Ll&&Pl(this)?this.split(""):$l(this),o=n.length>>>0;if(!o)return-1;var r=0;for(arguments.length>1&&(r=nh(arguments[1])),r=r>=0?r:Math.max(0,o+r);r<o;r++)if(r in n&&n[r]===t)return r;return-1}},ih);var ls=Fn.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?function(){var e=/()??/.exec("")[1]===void 0;Fn.split=function(t,n){var o=this;if(t===void 0&&n===0)return[];if(Vr.call(t)!=="[object RegExp]")return ls.call(this,t,n);var r=[],i=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),s=0,a,l,u,f;for(t=new RegExp(t.source,i+"g"),o+="",e||(a=new RegExp("^"+t.source+"$(?!\\s)",i)),n=n===void 0?-1>>>0:oh(n);(l=t.exec(o))&&(u=l.index+l[0].length,!(u>s&&(r.push(o.slice(s,l.index)),!e&&l.length>1&&l[0].replace(a,function(){for(var h=1;h<arguments.length-2;h++)arguments[h]===void 0&&(l[h]=void 0)}),l.length>1&&l.index<o.length&&Ln.push.apply(r,l.slice(1)),f=l[0].length,s=u,r.length>=n)));)t.lastIndex===l.index&&t.lastIndex++;return s===o.length?(f||!t.test(""))&&r.push(""):r.push(o.slice(s)),r.length>n?r.slice(0,n):r}}():"0".split(void 0,0).length&&(Fn.split=function(t,n){return t===void 0&&n===0?[]:ls.call(this,t,n)});var sh=Fn.substr,lh="".substr&&"0b".substr(-1)!=="b";Kn(Fn,{substr:function(t,n){return sh.call(this,t<0&&(t=this.length+t)<0?0:t,n)}},lh);var ro=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,Jo,ah=function(e){var t,n={},o=[];for(t=0;t<65536;t++)o.push(String.fromCharCode(t));return e.lastIndex=0,o.join("").replace(e,function(r){return n[r]="\\u"+("0000"+r.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n},ch={quote:function(e){var t=JSON.stringify(e);return ro.lastIndex=0,ro.test(t)?(Jo||(Jo=ah(ro)),t.replace(ro,function(n){return Jo[n]})):t}},Zo=function(){},uh=function(e){return{filterToEnabled:function(t,n){var o={main:[],facade:[]};return t?typeof t=="string"&&(t=[t]):t=[],e.forEach(function(r){if(r&&!(r.transportName==="websocket"&&n.websocket===!1)){if(t.length&&t.indexOf(r.transportName)===-1){Zo("not in whitelist",r.transportName);return}r.enabled(n)?(Zo("enabled",r.transportName),o.main.push(r),r.facadeTransport&&o.facade.push(r.facadeTransport)):Zo("disabled",r.transportName)}}),o}}},Cr={};["log","debug","warn"].forEach(function(e){var t;try{t=globalThis.console&&globalThis.console[e]&&globalThis.console[e].apply}catch{}Cr[e]=t?function(){return globalThis.console[e].apply(globalThis.console,arguments)}:e==="log"?function(){}:Cr.log});var dh=Cr;function un(e){this.type=e}un.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this};un.prototype.stopPropagation=function(){};un.prototype.preventDefault=function(){};un.CAPTURING_PHASE=1;un.AT_TARGET=2;un.BUBBLING_PHASE=3;var jr=un,Fl=globalThis.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""},fh=Me,Ul=jr;function Hl(){Ul.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}fh(Hl,Ul);var hh=Hl,ph=Me,Vl=jr;function jl(e){Vl.call(this),this.initEvent("message",!1,!1),this.data=e}ph(jl,Vl);var gh=jl,Bl=et.EventEmitter,mh=Me;function Xn(){var e=this;Bl.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},Xn.timeout)}mh(Xn,Bl);Xn.prototype.close=function(){clearTimeout(this.to)};Xn.timeout=2e3;var _h=Xn,zl=et.EventEmitter,vh=Me,bh=Ur;function Br(e,t){zl.call(this);var n=this,o=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(r,i){var s,a;if(r===200){if(a=+new Date-o,i)try{s=JSON.parse(i)}catch{}bh.isObject(s)||(s={})}n.emit("finish",s,a),n.removeAllListeners()})}vh(Br,zl);Br.prototype.close=function(){this.removeAllListeners(),this.xo.close()};var ql=Br,wh=Me,Wl=et.EventEmitter,Ch=Vn,Sh=ql;function Oo(e){var t=this;Wl.call(this),this.ir=new Sh(e,Ch),this.ir.once("finish",function(n,o){t.ir=null,t.emit("message",JSON.stringify([n,o]))})}wh(Oo,Wl);Oo.transportName="iframe-info-receiver";Oo.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()};var xl=Oo,Gl=et.EventEmitter,yh=Me,Eh=Zt,Kl=El,kh=xl;function Io(e,t){var n=this;Gl.call(this);var o=function(){var r=n.ifr=new Kl(kh.transportName,t,e);r.once("message",function(i){if(i){var s;try{s=JSON.parse(i)}catch{n.emit("finish"),n.close();return}var a=s[0],l=s[1];n.emit("finish",a,l)}n.close()}),r.once("close",function(){n.emit("finish"),n.close()})};globalThis.document.body?o():Eh.attachEvent("load",o)}yh(Io,Gl);Io.enabled=function(){return Kl.enabled()};Io.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null};var Rh=Io,Xl=et.EventEmitter,Th=Me,Ah=St,as=Fr,cs=Ao,Oh=Vn,Ih=_h,us=Rh,io=ql;function jt(e,t){var n=this;Xl.call(this),setTimeout(function(){n.doXhr(e,t)},0)}Th(jt,Xl);jt._getReceiver=function(e,t,n){return n.sameOrigin?new io(t,Oh):cs.enabled?new io(t,cs):as.enabled&&n.sameScheme?new io(t,as):us.enabled()?new us(e,t):new io(t,Ih)};jt.prototype.doXhr=function(e,t){var n=this,o=Ah.addPath(e,"/info");this.xo=jt._getReceiver(e,o,t),this.timeoutRef=setTimeout(function(){n._cleanup(!1),n.emit("finish")},jt.timeout),this.xo.once("finish",function(r,i){n._cleanup(!0),n.emit("finish",r,i)})};jt.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null};jt.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)};jt.timeout=8e3;var Mh=jt,Qo,ds;function Dh(){if(ds)return Qo;ds=1;var e=qn;function t(n){this._transport=n,n.on("message",this._transportMessage.bind(this)),n.on("close",this._transportClose.bind(this))}return t.prototype._transportClose=function(n,o){e.postMessage("c",JSON.stringify([n,o]))},t.prototype._transportMessage=function(n){e.postMessage("t",n)},t.prototype._send=function(n){this._transport.send(n)},t.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},Qo=t,Qo}var Yo,fs;function Nh(){if(fs)return Yo;fs=1;var e=St,t=Zt,n=Dh(),o=xl,r=qn,i=Fl,s=function(){};return Yo=function(a,l){var u={};l.forEach(function(h){h.facadeTransport&&(u[h.facadeTransport.transportName]=h.facadeTransport)}),u[o.transportName]=o;var f;a.bootstrap_iframe=function(){var h;r.currentWindowId=i.hash.slice(1);var g=function(p){if(p.source===parent&&(typeof f>"u"&&(f=p.origin),p.origin===f)){var _;try{_=JSON.parse(p.data)}catch{s("bad json",p.data);return}if(_.windowId===r.currentWindowId)switch(_.type){case"s":var v;try{v=JSON.parse(_.data)}catch{s("bad json",_.data);break}var b=v[0],S=v[1],C=v[2],y=v[3];if(b!==a.version)throw new Error('Incompatible SockJS! Main site uses: "'+b+'", the iframe: "'+a.version+'".');if(!e.isOriginEqual(C,i.href)||!e.isOriginEqual(y,i.href))throw new Error("Can't connect to different domain from within an iframe. ("+i.href+", "+C+", "+y+")");h=new n(new u[S](C,y));break;case"m":h._send(_.data);break;case"c":h&&h._close(),h=null;break}}};t.attachEvent("message",g),r.postMessage("s")}},Yo}var Ph=Js,$h=Me,hs=Cn,Lh=ch,On=St,Fh=Zt,Uh=uh,Hh=Ur,Vh=jn,jh=dh,zr=jr,Jl=Zs,so=Fl,Bh=hh,ps=gh,zh=Mh,Mt=function(){},Zl;function Oe(e,t,n){if(!(this instanceof Oe))return new Oe(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");Jl.call(this),this.readyState=Oe.CONNECTING,this.extensions="",this.protocol="",n=n||{},n.protocols_whitelist&&jh.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var o=n.sessionId||8;if(typeof o=="function")this._generateSessionId=o;else if(typeof o=="number")this._generateSessionId=function(){return hs.string(o)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=n.server||hs.numberString(1e3);var r=new Ph(e);if(!r.host||!r.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(r.hash)throw new SyntaxError("The URL must not contain a fragment");if(r.protocol!=="http:"&&r.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+r.protocol+"' is not allowed.");var i=r.protocol==="https:";if(so.protocol==="https:"&&!i&&!On.isLoopbackAddr(r.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var s=t.sort();s.forEach(function(l,u){if(!l)throw new SyntaxError("The protocols entry '"+l+"' is invalid.");if(u<s.length-1&&l===s[u+1])throw new SyntaxError("The protocols entry '"+l+"' is duplicated.")});var a=On.getOrigin(so.href);this._origin=a?a.toLowerCase():null,r.set("pathname",r.pathname.replace(/\/+$/,"")),this.url=r.href,Mt("using url",this.url),this._urlInfo={nullOrigin:!Vh.hasDomain(),sameOrigin:On.isOriginEqual(this.url,so.href),sameScheme:On.isSchemeEqual(this.url,so.href)},this._ir=new zh(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}$h(Oe,Jl);function Ql(e){return e===1e3||e>=3e3&&e<=4999}Oe.prototype.close=function(e,t){if(e&&!Ql(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===Oe.CLOSING||this.readyState===Oe.CLOSED)){var n=!0;this._close(e||1e3,t||"Normal closure",n)}};Oe.prototype.send=function(e){if(typeof e!="string"&&(e=""+e),this.readyState===Oe.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===Oe.OPEN&&this._transport.send(Lh.quote(e))};Oe.version=bl();Oe.CONNECTING=0;Oe.OPEN=1;Oe.CLOSING=2;Oe.CLOSED=3;Oe.prototype._receiveInfo=function(e,t){if(this._ir=null,!e){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=Hh.extend(e,this._urlInfo);var n=Zl.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,Mt(this._transports.length+" enabled transports"),this._connect()};Oe.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(Mt("attempt",e.transportName),e.needBody&&(!globalThis.document.body||typeof globalThis.document.readyState<"u"&&globalThis.document.readyState!=="complete"&&globalThis.document.readyState!=="interactive")){this._transports.unshift(e),Fh.attachEvent("load",this._connect.bind(this));return}var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t);var n=On.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),o=this._transportOptions[e.transportName],r=new e(n,this._transUrl,o);r.on("message",this._transportMessage.bind(this)),r.once("close",this._transportClose.bind(this)),r.transportName=e.transportName,this._transport=r;return}this._close(2e3,"All transports failed",!1)};Oe.prototype._transportTimeout=function(){this.readyState===Oe.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))};Oe.prototype._transportMessage=function(e){var t=this,n=e.slice(0,1),o=e.slice(1),r;switch(n){case"o":this._open();return;case"h":this.dispatchEvent(new zr("heartbeat")),Mt("heartbeat",this.transport);return}if(o)try{r=JSON.parse(o)}catch{}if(!(typeof r>"u"))switch(n){case"a":Array.isArray(r)&&r.forEach(function(i){Mt("message",t.transport),t.dispatchEvent(new ps(i))});break;case"m":Mt("message",this.transport),this.dispatchEvent(new ps(r));break;case"c":Array.isArray(r)&&r.length===2&&this._close(r[0],r[1],!0);break}};Oe.prototype._transportClose=function(e,t){if(Mt("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!Ql(e)&&e!==2e3&&this.readyState===Oe.CONNECTING){this._connect();return}this._close(e,t)};Oe.prototype._open=function(){Mt("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===Oe.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=Oe.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new zr("open")),Mt("connected",this.transport)):this._close(1006,"Server lost session")};Oe.prototype._close=function(e,t,n){Mt("_close",this.transport,e,t,n,this.readyState);var o=!1;if(this._ir&&(o=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===Oe.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=Oe.CLOSING,setTimeout((function(){this.readyState=Oe.CLOSED,o&&this.dispatchEvent(new zr("error"));var r=new Bh;r.wasClean=n||!1,r.code=e||1e3,r.reason=t,this.dispatchEvent(r),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)};Oe.prototype.countRTO=function(e){return e>100?4*e:300+e};var qh=function(e){return Zl=Uh(e),Nh()(Oe,e),Oe},Wh=Qf,xh=qh(Wh);"_sockjs_onload"in globalThis&&setTimeout(globalThis._sockjs_onload,1);const Gh=hd(xh);function Kh(e,t){e.terminate=function(){const n=()=>{};this.onerror=n,this.onmessage=n,this.onopen=n;const o=new Date,r=Math.random().toString().substring(2,8),i=this.onclose;this.onclose=s=>{const a=new Date().getTime()-o.getTime();t(`Discarded socket (#${r})  closed after ${a}ms, with code/reason: ${s.code}/${s.reason}`)},this.close(),i==null||i.call(e,{code:4001,reason:`Quick discarding socket (#${r}) without waiting for the shutdown sequence.`,wasClean:!1})}}const In={LF:`
`,NULL:"\0"};class xt{get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}constructor(t){const{command:n,headers:o,body:r,binaryBody:i,escapeHeaderValues:s,skipContentLengthHeader:a}=t;this.command=n,this.headers=Object.assign({},o||{}),i?(this._binaryBody=i,this.isBinaryBody=!0):(this._body=r||"",this.isBinaryBody=!1),this.escapeHeaderValues=s||!1,this.skipContentLengthHeader=a||!1}static fromRawFrame(t,n){const o={},r=i=>i.replace(/^\s+|\s+$/g,"");for(const i of t.headers.reverse()){i.indexOf(":");const s=r(i[0]);let a=r(i[1]);n&&t.command!=="CONNECT"&&t.command!=="CONNECTED"&&(a=xt.hdrValueUnEscape(a)),o[s]=a}return new xt({command:t.command,headers:o,binaryBody:t.binaryBody,escapeHeaderValues:n})}toString(){return this.serializeCmdAndHeaders()}serialize(){const t=this.serializeCmdAndHeaders();return this.isBinaryBody?xt.toUnit8Array(t,this._binaryBody).buffer:t+this._body+In.NULL}serializeCmdAndHeaders(){const t=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const n of Object.keys(this.headers||{})){const o=this.headers[n];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?t.push(`${n}:${xt.hdrValueEscape(`${o}`)}`):t.push(`${n}:${o}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&t.push(`content-length:${this.bodyLength()}`),t.join(In.LF)+In.LF+In.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){const t=this.binaryBody;return t?t.length:0}static sizeOfUTF8(t){return t?new TextEncoder().encode(t).length:0}static toUnit8Array(t,n){const o=new TextEncoder().encode(t),r=new Uint8Array([0]),i=new Uint8Array(o.length+n.length+r.length);return i.set(o),i.set(n,o.length),i.set(r,o.length+n.length),i}static marshall(t){return new xt(t).serialize()}static hdrValueEscape(t){return t.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(t){return t.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const gs=0,lo=10,ao=13,Xh=58;class Jh{constructor(t,n){this.onFrame=t,this.onIncomingPing=n,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(t,n=!1){let o;if(typeof t=="string"?o=this._encoder.encode(t):o=new Uint8Array(t),n&&o[o.length-1]!==0){const r=new Uint8Array(o.length+1);r.set(o,0),r[o.length]=0,o=r}for(let r=0;r<o.length;r++){const i=o[r];this._onByte(i)}}_collectFrame(t){if(t!==gs&&t!==ao){if(t===lo){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(t)}}_collectCommand(t){if(t!==ao){if(t===lo){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(t)}}_collectHeaders(t){if(t!==ao){if(t===lo){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(t)}}_reinjectByte(t){this._onByte(t)}_collectHeaderKey(t){if(t===Xh){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(t)}_collectHeaderValue(t){if(t!==ao){if(t===lo){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(t)}}_setupCollectBody(){const t=this._results.headers.filter(n=>n[0]==="content-length")[0];t?(this._bodyBytesRemaining=parseInt(t[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(t){if(t===gs){this._retrievedBody();return}this._consumeByte(t)}_collectBodyFixedSize(t){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(t)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(t){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",t)}this._initState()}_consumeByte(t){this._token.push(t)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const t=new Uint8Array(this._token);return this._token=[],t}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var Gt;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"})(Gt||(Gt={}));var Rt;(function(e){e[e.ACTIVE=0]="ACTIVE",e[e.DEACTIVATING=1]="DEACTIVATING",e[e.INACTIVE=2]="INACTIVE"})(Rt||(Rt={}));var vo;(function(e){e[e.LINEAR=0]="LINEAR",e[e.EXPONENTIAL=1]="EXPONENTIAL"})(vo||(vo={}));var Un;(function(e){e.Interval="interval",e.Worker="worker"})(Un||(Un={}));class Zh{constructor(t,n=Un.Interval,o){this._interval=t,this._strategy=n,this._debug=o,this._workerScript=`
    var startTime = Date.now();
    setInterval(function() {
        self.postMessage(Date.now() - startTime);
    }, ${this._interval});
  `}start(t){this.stop(),this.shouldUseWorker()?this.runWorker(t):this.runInterval(t)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===Un.Worker}runWorker(t){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=n=>t(n.data))}runInterval(t){if(this._debug("Using runInterval for outgoing pings"),!this._timer){const n=Date.now();this._timer=setInterval(()=>{t(Date.now()-n)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}}class ot{constructor(t){this.versions=t}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(t=>`v${t.replace(".","")}.stomp`)}}ot.V1_0="1.0";ot.V1_1="1.1";ot.V1_2="1.2";ot.default=new ot([ot.V1_2,ot.V1_1,ot.V1_0]);class Qh{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(t,n,o){this._client=t,this._webSocket=n,this._connected=!1,this._serverFrameHandlers={CONNECTED:r=>{this.debug(`connected to server ${r.headers.server}`),this._connected=!0,this._connectedVersion=r.headers.version,this._connectedVersion===ot.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(r.headers),this.onConnect(r)},MESSAGE:r=>{const i=r.headers.subscription,s=this._subscriptions[i]||this.onUnhandledMessage,a=r,l=this,u=this._connectedVersion===ot.V1_2?a.headers.ack:a.headers["message-id"];a.ack=(f={})=>l.ack(u,i,f),a.nack=(f={})=>l.nack(u,i,f),s(a)},RECEIPT:r=>{const i=this._receiptWatchers[r.headers["receipt-id"]];i?(i(r),delete this._receiptWatchers[r.headers["receipt-id"]]):this.onUnhandledReceipt(r)},ERROR:r=>{this.onStompError(r)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=o.debug,this.stompVersions=o.stompVersions,this.connectHeaders=o.connectHeaders,this.disconnectHeaders=o.disconnectHeaders,this.heartbeatIncoming=o.heartbeatIncoming,this.heartbeatToleranceMultiplier=o.heartbeatGracePeriods,this.heartbeatOutgoing=o.heartbeatOutgoing,this.splitLargeFrames=o.splitLargeFrames,this.maxWebSocketChunkSize=o.maxWebSocketChunkSize,this.forceBinaryWSFrames=o.forceBinaryWSFrames,this.logRawCommunication=o.logRawCommunication,this.appendMissingNULLonIncoming=o.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=o.discardWebsocketOnCommFailure,this.onConnect=o.onConnect,this.onDisconnect=o.onDisconnect,this.onStompError=o.onStompError,this.onWebSocketClose=o.onWebSocketClose,this.onWebSocketError=o.onWebSocketError,this.onUnhandledMessage=o.onUnhandledMessage,this.onUnhandledReceipt=o.onUnhandledReceipt,this.onUnhandledFrame=o.onUnhandledFrame,this.onHeartbeatReceived=o.onHeartbeatReceived,this.onHeartbeatLost=o.onHeartbeatLost}start(){const t=new Jh(n=>{const o=xt.fromRawFrame(n,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${o}`),(this._serverFrameHandlers[o.command]||this.onUnhandledFrame)(o)},()=>{this.debug("<<< PONG"),this.onHeartbeatReceived()});this._webSocket.onmessage=n=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const o=n.data instanceof ArrayBuffer?new TextDecoder().decode(n.data):n.data;this.debug(`<<< ${o}`)}t.parseChunk(n.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=n=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(n)},this._webSocket.onerror=n=>{this.onWebSocketError(n)},this._webSocket.onopen=()=>{const n=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),n["accept-version"]=this.stompVersions.supportedVersions(),n["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:n})}}_setupHeartbeat(t){if(t.version!==ot.V1_1&&t.version!==ot.V1_2||!t["heart-beat"])return;const[n,o]=t["heart-beat"].split(",").map(r=>parseInt(r,10));if(this.heartbeatOutgoing!==0&&o!==0){const r=Math.max(this.heartbeatOutgoing,o);this.debug(`send PING every ${r}ms`),this._pinger=new Zh(r,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===Gt.OPEN&&(this._webSocket.send(In.LF),this.debug(">>> PING"))})}if(this.heartbeatIncoming!==0&&n!==0){const r=Math.max(this.heartbeatIncoming,n);this.debug(`check PONG every ${r}ms`),this._ponger=setInterval(()=>{const i=Date.now()-this._lastServerActivityTS;i>r*this.heartbeatToleranceMultiplier&&(this.debug(`did not receive server activity for the last ${i}ms`),this.onHeartbeatLost(),this._closeOrDiscardWebsocket())},r)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===Gt.CONNECTING||this._webSocket.readyState===Gt.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&Kh(this._webSocket,t=>this.debug(t)),this._webSocket.terminate()}_transmit(t){const{command:n,headers:o,body:r,binaryBody:i,skipContentLengthHeader:s}=t,a=new xt({command:n,headers:o,body:r,binaryBody:i,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:s});let l=a.serialize();if(this.logRawCommunication?this.debug(`>>> ${l}`):this.debug(`>>> ${a}`),this.forceBinaryWSFrames&&typeof l=="string"&&(l=new TextEncoder().encode(l)),typeof l!="string"||!this.splitLargeFrames)this._webSocket.send(l);else{let u=l;for(;u.length>0;){const f=u.substring(0,this.maxWebSocketChunkSize);u=u.substring(this.maxWebSocketChunkSize),this._webSocket.send(f),this.debug(`chunk sent = ${f.length}, remaining = ${u.length}`)}}}dispose(){if(this.connected)try{const t=Object.assign({},this.disconnectHeaders);t.receipt||(t.receipt=`close-${this._counter++}`),this.watchForReceipt(t.receipt,n=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(n)}),this._transmit({command:"DISCONNECT",headers:t})}catch(t){this.debug(`Ignoring error during disconnect ${t}`)}else(this._webSocket.readyState===Gt.CONNECTING||this._webSocket.readyState===Gt.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(t){const{destination:n,headers:o,body:r,binaryBody:i,skipContentLengthHeader:s}=t,a=Object.assign({destination:n},o);this._transmit({command:"SEND",headers:a,body:r,binaryBody:i,skipContentLengthHeader:s})}watchForReceipt(t,n){this._receiptWatchers[t]=n}subscribe(t,n,o={}){o=Object.assign({},o),o.id||(o.id=`sub-${this._counter++}`),o.destination=t,this._subscriptions[o.id]=n,this._transmit({command:"SUBSCRIBE",headers:o});const r=this;return{id:o.id,unsubscribe(i){return r.unsubscribe(o.id,i)}}}unsubscribe(t,n={}){n=Object.assign({},n),delete this._subscriptions[t],n.id=t,this._transmit({command:"UNSUBSCRIBE",headers:n})}begin(t){const n=t||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:n}});const o=this;return{id:n,commit(){o.commit(n)},abort(){o.abort(n)}}}commit(t){this._transmit({command:"COMMIT",headers:{transaction:t}})}abort(t){this._transmit({command:"ABORT",headers:{transaction:t}})}ack(t,n,o={}){o=Object.assign({},o),this._connectedVersion===ot.V1_2?o.id=t:o["message-id"]=t,o.subscription=n,this._transmit({command:"ACK",headers:o})}nack(t,n,o={}){return o=Object.assign({},o),this._connectedVersion===ot.V1_2?o.id=t:o["message-id"]=t,o.subscription=n,this._transmit({command:"NACK",headers:o})}}class Yh{get webSocket(){var t;return(t=this._stompHandler)==null?void 0:t._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(t){this._disconnectHeaders=t,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===Rt.ACTIVE}_changeState(t){this.state=t,this.onChangeState(t)}constructor(t={}){this.stompVersions=ot.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=15*60*1e3,this.reconnectTimeMode=vo.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatToleranceMultiplier=2,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=Un.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=Rt.INACTIVE;const n=()=>{};this.debug=n,this.beforeConnect=n,this.onConnect=n,this.onDisconnect=n,this.onUnhandledMessage=n,this.onUnhandledReceipt=n,this.onUnhandledFrame=n,this.onHeartbeatReceived=n,this.onHeartbeatLost=n,this.onStompError=n,this.onWebSocketClose=n,this.onWebSocketError=n,this.logRawCommunication=!1,this.onChangeState=n,this.connectHeaders={},this._disconnectHeaders={},this.configure(t)}configure(t){Object.assign(this,t),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){const t=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(Rt.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect()};this.state===Rt.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{t()})):t()}async _connect(){if(await this.beforeConnect(this),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const t=this._createWebSocket();this._stompHandler=new Qh(this,t,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatGracePeriods:this.heartbeatToleranceMultiplier,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:n=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),this._nextReconnectDelay=this.reconnectDelay,!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(n)},onDisconnect:n=>{this.onDisconnect(n)},onStompError:n=>{this.onStompError(n)},onWebSocketClose:n=>{this._stompHandler=void 0,this.state===Rt.DEACTIVATING&&this._changeState(Rt.INACTIVE),this.onWebSocketClose(n),this.active&&this._schedule_reconnect()},onWebSocketError:n=>{this.onWebSocketError(n)},onUnhandledMessage:n=>{this.onUnhandledMessage(n)},onUnhandledReceipt:n=>{this.onUnhandledReceipt(n)},onUnhandledFrame:n=>{this.onUnhandledFrame(n)},onHeartbeatReceived:()=>{this.onHeartbeatReceived()},onHeartbeatLost:()=>{this.onHeartbeatLost()}}),this._stompHandler.start()}_createWebSocket(){let t;if(this.webSocketFactory)t=this.webSocketFactory();else if(this.brokerURL)t=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return t.binaryType="arraybuffer",t}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===vo.EXPONENTIAL&&(this._nextReconnectDelay=this._nextReconnectDelay*2,this.maxReconnectDelay!==0&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}async deactivate(t={}){var i;const n=t.force||!1,o=this.active;let r;if(this.state===Rt.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(Rt.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==Gt.CLOSED){const s=this._stompHandler.onWebSocketClose;r=new Promise((a,l)=>{this._stompHandler.onWebSocketClose=u=>{s(u),a()}})}else return this._changeState(Rt.INACTIVE),Promise.resolve();return n?(i=this._stompHandler)==null||i.discardWebsocket():o&&this._disposeStompHandler(),r}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(t){this._checkConnection(),this._stompHandler.publish(t)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(t,n){this._checkConnection(),this._stompHandler.watchForReceipt(t,n)}subscribe(t,n,o={}){return this._checkConnection(),this._stompHandler.subscribe(t,n,o)}unsubscribe(t,n={}){this._checkConnection(),this._stompHandler.unsubscribe(t,n)}begin(t){return this._checkConnection(),this._stompHandler.begin(t)}commit(t){this._checkConnection(),this._stompHandler.commit(t)}abort(t){this._checkConnection(),this._stompHandler.abort(t)}ack(t,n,o={}){this._checkConnection(),this._stompHandler.ack(t,n,o)}nack(t,n,o={}){this._checkConnection(),this._stompHandler.nack(t,n,o)}}const Yl={protocol:window.location.protocol==="https:"?"https:":"http:",host:window.location.hostname,port:window.location.port||(window.location.protocol==="https:"?443:80),path:"/ws",reconnectDelay:5e3,heartbeatDelay:3e4},gn={GENERAL:"/topic/notifications/general",INSPECTION:"/topic/notifications/inspection",DATA_UPDATE:"/topic/notifications/data-update",OIL_CHANGE:"/topic/notifications/oil-change",CONNECTION:"/topic/notifications/connection",SOAT_RUNT:"/topic/notifications/soat-runt"},Tn={INSPECTION:"inspection",DATA_UPDATE:"data-update",SOAT_RUNT:"soat-runt",OIL_CHANGE:"oil-change"},Dt=Pt({isConnected:!1,connection:null,stompClient:null,type:"sockjs-stomp",isReconnecting:!1,subscriptions:new Map,connectionStats:{connectTime:null,reconnectAttempts:0,messageCount:0,lastError:null}}),ea=Pt(!0);function fo(e){ea.set(e),console.log(`🔊 [WEBSOCKET] Estado de activación de sonido actualizado: ${e?"REQUIERE ACTIVACIÓN":"ACTIVADO"}`)}let Wt=null,rt=null;function Sr(){const e=window.location.protocol==="https:"?"https:":"http:",t=window.location.hostname;return`${e}//${t}:8080/ws`}function ep(){const e=localStorage.getItem("accessToken"),t=new Date().toLocaleTimeString();if(console.log(`🚀 [WEBSOCKET] === INICIO DE INICIALIZACIÓN SOCKJS + STOMP === ${t}`),console.log(`🚀 [WEBSOCKET] Token disponible: ${e?"SÍ":"NO"}`),console.log(`🚀 [WEBSOCKET] WebSocket URL: ${Sr()}`),console.log(`🚀 [WEBSOCKET] 🔍 URL ACTUAL: ${Sr()} (DEBERÍA SER localhost:8080/ws)`),console.log(`🚀 [WEBSOCKET] Auth state: ${st(on).isAuthenticated?"AUTENTICADO":"NO AUTENTICADO"}`),console.log("🚀 [WEBSOCKET] 🧪 MODO DEBUG HABILITADO"),!e){console.warn("❌ [WEBSOCKET] No se puede inicializar: falta el token.");return}ta(e),oa(),console.log(`🚀 [WEBSOCKET] === INICIALIZACIÓN COMPLETA === ${t}`)}function nt(e,t){const n=new Date().toLocaleTimeString();console.log(`🔍 [WEBSOCKET DEBUG] [${n}] ${e}:`,t)}function ta(e){console.log("🚀 [WEBSOCKET] Iniciando conexión SockJS + STOMP con DEBUG...");const t=Sr();console.log("🔌 [WEBSOCKET] URL:",t),console.log("📡 [WEBSOCKET] Paso 1: Creando conexión SockJS básica..."),Wt=new Gh(t),Wt.onopen=function(){nt("SOCKJS_OPEN","SockJS conexión abierta exitosamente")},Wt.onmessage=function(n){nt("SOCKJS_MESSAGE",{data:n.data,type:typeof n.data})},Wt.onerror=function(n){nt("SOCKJS_ERROR",n),co(`SockJS Error: ${n}`)},Wt.onclose=function(n){nt("SOCKJS_CLOSE",{code:n.code,reason:n.reason,wasClean:n.wasClean})},console.log("📡 [WEBSOCKET] Paso 2: Creando cliente STOMP..."),rt=new Yh({webSocketFactory:function(){return nt("STOMP_WS_FACTORY","Creando WebSocket factory"),Wt},connectHeaders:{Authorization:`Bearer ${e}`,"X-User-Token":e},debug:function(n){console.log("STOMP DEBUG:",n)},onConnect:n=>{nt("STOMP_CONNECT","Conectado exitosamente a STOMP"),console.log("✅ [WEBSOCKET] Conectado STOMP:",n),ms(!0),tp(),na(),dp()},onError:n=>{nt("STOMP_ERROR",n),console.error("❌ [WEBSOCKET] Error de conexión STOMP:",n),co(`STOMP Error: ${JSON.stringify(n)}`),fp()},onDisconnect:n=>{nt("STOMP_DISCONNECT",n),console.log("🔌 [WEBSOCKET] Conexión STOMP cerrada:",n),ms(!1)},onStompError:function(n){nt("STOMP_PROTOCOL_ERROR",{headers:n.headers,body:n.body}),console.error("❌ [WEBSOCKET] Error de protocolo STOMP:",n),co(`Protocolo STOMP Error: ${n.body}`)}}),console.log("📡 [WEBSOCKET] Paso 3: Activando cliente STOMP...");try{rt.activate(),nt("STOMP_ACTIVATE","Cliente STOMP activado")}catch(n){console.error("❌ [WEBSOCKET] Error activando cliente STOMP:",n),co(`Activación STOMP Error: ${n.message}`)}}function ms(e,t=!1){console.log(`📊 [WEBSOCKET] Estado actualizado - Conectado: ${e}, Reconectando: ${t}`),Dt.update(n=>({...n,isConnected:e,connection:Wt,stompClient:rt,isReconnecting:t,connectionStats:{...n.connectionStats,connectTime:e?new Date().toISOString():n.connectionStats.connectTime,lastError:e?null:n.connectionStats.lastError}}))}function co(e){console.error("💥 [WEBSOCKET] Error registrado:",e),Dt.update(t=>({...t,connectionStats:{...t.connectionStats,lastError:e}}))}function tp(){console.log("📡 [WEBSOCKET] Suscribiéndose a todos los topics STOMP..."),[{topic:gn.INSPECTION,type:Tn.INSPECTION,handler:ip},{topic:gn.DATA_UPDATE,type:Tn.DATA_UPDATE,handler:sp},{topic:gn.OIL_CHANGE,type:Tn.OIL_CHANGE,handler:lp},{topic:gn.GENERAL,type:Tn.SOAT_RUNT,handler:ap},{topic:gn.SOAT_RUNT,type:Tn.SOAT_RUNT,handler:cp},{topic:gn.CONNECTION,type:"connection",handler:up}].forEach(t=>{np(t.topic,t.handler)})}function np(e,t){if(!rt||!rt.connected){console.warn(`⚠️ [WEBSOCKET] No se puede suscribir a ${e}: cliente no conectado`);return}console.log(`📡 [WEBSOCKET] Suscribiéndose a topic: ${e}`);try{const n=rt.subscribe(e,{onMessage:o=>{nt("STOMP_MESSAGE",{topic:e,body:o.body,headers:o.headers}),console.log(`📨 [WEBSOCKET] Mensaje recibido en ${e}:`,o.body),rp(e,o.body,t)}});Dt.update(o=>(o.subscriptions.set(e,n),o)),nt("STOMP_SUBSCRIBE_SUCCESS",e)}catch(n){console.error(`❌ [WEBSOCKET] Error suscribiendo a ${e}:`,n),nt("STOMP_SUBSCRIBE_ERROR",{topic:e,error:n.message})}}function na(){console.log("🏓 [WEBSOCKET] Enviando ping de confirmación..."),op("/app/ping",{timestamp:Date.now(),client:"frontend"})}function op(e,t){if(!rt||!rt.connected){console.warn(`⚠️ [WEBSOCKET] No se puede enviar mensaje a ${e}: cliente no conectado`);return}console.log(`📤 [WEBSOCKET] Enviando mensaje STOMP a ${e}:`,t);try{rt.publish({destination:e,body:JSON.stringify(t),headers:{}}),nt("STOMP_PUBLISH_SUCCESS",e)}catch(n){console.error("❌ [WEBSOCKET] Error enviando mensaje:",n),nt("STOMP_PUBLISH_ERROR",{destination:e,error:n.message})}}function rp(e,t,n){try{let o=t;typeof t=="string"&&t.trim()&&(o=JSON.parse(t)),n(o),Dt.update(r=>(r.connectionStats.messageCount++,r))}catch(o){console.error(`❌ [WEBSOCKET] Error procesando mensaje de ${e}:`,o),console.error("❌ [WEBSOCKET] Contenido del mensaje:",t)}}function ip(e){const t=new Date().toLocaleTimeString();if(console.log(`📨 [INSPECTION] ⭐ NOTIFICACIÓN WEBSOCKET EN ${t} ⭐`),console.log("📨 [INSPECTION] 🚨 RAW DATA:",e),e.type==="stream_open"||e==="stream_open"){console.log("✅ [INSPECTION] Notificaciones de inspecciones confirmadas.");return}const n=e.machine?`${e.machine.name} ${e.machine.model}`:"una máquina";console.log(`🚨 [INSPECTION] ⚡ AGREGANDO NOTIFICACIÓN WEBSOCKET: ${n}!`),ht({id:e.UUID||e.id||Date.now(),text:`¡IMPREVISTO EN ${n}!`}),console.log("🔊 [INSPECTION] Reproduciendo sonido..."),pp();const o=st(kt).currentView;if(console.log("🔄 [INSPECTION] Vista actual:",o),o==="dashboard"){console.log("🔄 [INSPECTION] Actualizando dashboard...");const r=st(ge);ge.fetchDashboardData(r.dashboard.currentPage,r.dashboard.pageSize)}}function sp(e){const t=new Date().toLocaleTimeString();if(console.log(`📨 [DATA_UPDATE] Mensaje WebSocket recibido en ${t}`),console.log("📨 [DATA_UPDATE] Raw data:",e),e.type==="stream_open"||e==="stream_open"){console.log("✅ [DATA_UPDATE] Notificaciones de actualización confirmadas.");return}const n=st(kt).currentView,o=e.type||e;console.log(`🔄 [DATA_UPDATE] Mensaje: "${o}", Vista actual: "${n}"`),hp(n,o)}function lp(e){const t=new Date().toLocaleTimeString();if(console.log(`📨 [OIL_CHANGE] Mensaje WebSocket recibido en ${t}`),console.log("📨 [OIL_CHANGE] Raw data:",e),e.type==="stream_open"||e==="stream_open"){console.log("✅ [OIL_CHANGE] Notificaciones de cambios de aceite confirmadas.");return}console.log("🔔 [OIL_CHANGE] Agregando notificación WebSocket:",e.message||"Notificación de cambio de aceite"),ht({id:e.id||Date.now(),text:e.message||"Notificación de cambio de aceite"})}function ap(e){const t=new Date().toLocaleTimeString();if(console.log(`📨 [GENERAL] Mensaje WebSocket recibido en ${t}`),console.log("📨 [GENERAL] Raw data:",e),e.type==="stream_open"||e==="stream_open"){console.log("✅ [GENERAL] Notificaciones generales confirmadas.");return}console.log("🔔 [GENERAL] Agregando notificación WebSocket:",e.message||"Notificación general"),ht({id:e.id||Date.now(),text:e.message||"Notificación general"})}function cp(e){const t=new Date().toLocaleTimeString();if(console.log(`📨 [SOAT_RUNT] Mensaje WebSocket recibido en ${t}`),console.log("📨 [SOAT_RUNT] Raw data:",e),e.type==="stream_open"||e==="stream_open"){console.log("✅ [SOAT_RUNT] Notificaciones SOAT/RUNT confirmadas.");return}console.log("🔔 [SOAT_RUNT] Agregando notificación WebSocket:",e.message||"Notificación SOAT/RUNT"),ht({id:e.id||Date.now(),text:e.message||"Notificación SOAT/RUNT"})}function up(e){console.log("🔗 [CONNECTION] Mensaje de conexión WebSocket:",e),e.type==="connection_status"&&console.log(`📊 [CONNECTION] Estado de conexión: ${e.status}`)}function dp(){setInterval(()=>{rt&&rt.connected&&(console.log("💓 [WEBSOCKET] Verificando conexión STOMP..."),na())},Yl.heartbeatDelay)}function fp(){if(console.warn("⚠️ [WEBSOCKET] Error de conexión - intentando reconectar..."),st(Dt).connectionStats.reconnectAttempts>=3){console.error("❌ [WEBSOCKET] Máximo número de intentos de reconexión alcanzado."),Dt.update(n=>({...n,isReconnecting:!1,connectionStats:{...n.connectionStats,reconnectAttempts:n.connectionStats.reconnectAttempts+1}}));return}Dt.update(n=>({...n,isReconnecting:!0,connectionStats:{...n.connectionStats,reconnectAttempts:n.connectionStats.reconnectAttempts+1}})),setTimeout(()=>{const n=localStorage.getItem("accessToken");n&&(console.log("🔄 [WEBSOCKET] Reintentando conexión..."),ta(n))},Yl.reconnectDelay)}function hp(e,t){var o,r;console.log("🔄 [DATA_UPDATE] Manejando actualización para vista:",e,"mensaje:",t);const n=st(ge);switch(console.log("🔄 [DATA_UPDATE] Estado actual de datos:",{dashboard:(o=n.dashboard)==null?void 0:o.currentPage,workOrders:(r=n.workOrders)==null?void 0:r.currentPage}),t){case"inspections-updated":e==="dashboard"&&(console.log("🔄 [DATA_UPDATE] Recargando tabla de inspecciones..."),ge.fetchDashboardData(n.dashboard.currentPage,n.dashboard.pageSize));break;case"machines-updated":e==="machines"&&(console.log("🔄 [DATA_UPDATE] Recargando tabla de máquinas..."),ge.fetchMachines());break;case"users-updated":e==="users"&&(console.log("🔄 [DATA_UPDATE] Recargando tabla de usuarios..."),ge.fetchUsers());break;case"orders-updated":e==="work-orders"&&(console.log("🔄 [DATA_UPDATE] Recargando tabla de órdenes de trabajo..."),ge.fetchWorkOrders(n.workOrders.currentPage,n.workOrders.pageSize));break;case"oil-changes-updated":e==="consolidado"&&(console.log("🔄 [DATA_UPDATE] Recargando tabla de consolidado..."),ge.fetchConsolidadoData());break;default:console.log("⚠️ [DATA_UPDATE] Mensaje no reconocido:",t)}}function _s(){console.log("🔌 [WEBSOCKET] Cerrando conexión WebSocket..."),rt&&rt.connected&&(Dt.update(e=>(e.subscriptions.forEach((t,n)=>{console.log(`📡 [WEBSOCKET] Desuscribiéndose de ${n}`),t.unsubscribe()}),e.subscriptions.clear(),e)),rt.deactivate()),rt=null,Wt=null,Dt.set({isConnected:!1,connection:null,stompClient:null,type:null,isReconnecting:!1,subscriptions:new Map,connectionStats:{connectTime:null,reconnectAttempts:0,messageCount:0,lastError:null}}),console.log("🔌 [WEBSOCKET] Conexión WebSocket cerrada.")}function oa(){if(console.log("🔊 [AUDIO] Activando contexto de audio WebSocket..."),typeof audioCtx>"u"||audioCtx===null)try{audioCtx=new(window.AudioContext||window.webkitAudioContext),fo(!1),console.log("🔊 [AUDIO] Contexto de audio WebSocket activado exitosamente.")}catch(e){console.error("❌ [AUDIO] Web Audio API no es soportada:",e.message),fo(!1)}else console.log("🔊 [AUDIO] Contexto de audio ya existía, activándolo..."),fo(!1)}function pp(){if(console.log("🔊 [AUDIO] Intentando reproducir sonido WebSocket..."),!audioCtx){console.warn("⚠️ [AUDIO] El audio debe ser activado por un gesto del usuario.");return}audioCtx.state==="suspended"&&(console.log("🔊 [AUDIO] Reanudando contexto de audio..."),audioCtx.resume());const e=audioCtx.currentTime,t=audioCtx.createOscillator(),n=audioCtx.createGain();t.connect(n),n.connect(audioCtx.destination),t.type="sine",t.frequency.setValueAtTime(800,e),t.frequency.linearRampToValueAtTime(600,e+.15),n.gain.setValueAtTime(0,e),n.gain.linearRampToValueAtTime(.4,e+.02),n.gain.exponentialRampToValueAtTime(1e-4,e+.25),console.log("🔊 [AUDIO] Sonido WebSocket iniciado."),t.start(e),t.stop(e+.25),console.log("🔊 [AUDIO] Sonido WebSocket programado para terminar en 0.25s.")}function gp(e){let t,n,o,r,i=e[2],s,a,l=e[2]+1+"",u,f,h=e[1].length+"",g,p,_,v,b,S=vs(e);return{c(){t=m("div"),n=m("button"),n.textContent="❮",o=w(),r=m("div"),S.c(),s=w(),a=m("div"),u=z(l),f=z(" / "),g=z(h),p=w(),_=m("button"),_.textContent="❯",d(n,"class","nav-btn prev svelte-n3qlb5"),d(a,"class","image-counter svelte-n3qlb5"),d(r,"class","image-wrapper svelte-n3qlb5"),d(_,"class","nav-btn next svelte-n3qlb5"),d(t,"class","carousel-container svelte-n3qlb5")},m(C,y){D(C,t,y),c(t,n),c(t,o),c(t,r),S.m(r,null),c(r,s),c(r,a),c(a,u),c(a,f),c(a,g),c(t,p),c(t,_),v||(b=[I(n,"click",e[6]),I(_,"click",e[5])],v=!0)},p(C,y){y&4&&We(i,i=C[2])?(S.d(1),S=vs(C),S.c(),S.m(r,s)):S.p(C,y),y&4&&l!==(l=C[2]+1+"")&&ve(u,l),y&2&&h!==(h=C[1].length+"")&&ve(g,h)},i:ce,o:ce,d(C){C&&M(t),S.d(C),v=!1,Ie(b)}}}function mp(e){let t;return{c(){t=m("div"),t.innerHTML="<p>No hay imágenes para esta inspección.</p>",d(t,"class","status-container svelte-n3qlb5")},m(n,o){D(n,t,o)},p:ce,i:ce,o:ce,d(n){n&&M(t)}}}function _p(e){let t,n,o;return n=new Ft({}),{c(){t=m("div"),Te(n.$$.fragment),d(t,"class","status-container svelte-n3qlb5")},m(r,i){D(r,t,i),Ee(n,t,null),o=!0},p:ce,i(r){o||(B(n.$$.fragment,r),o=!0)},o(r){J(n.$$.fragment,r),o=!1},d(r){r&&M(t),ke(n)}}}function vp(e){let t,n,o,r,i;return{c(){t=m("img"),Xr(t.src,n=e[1][e[2]].blobUrl)||d(t,"src",n),d(t,"alt",o=`Inspección ${e[2]+1}`),d(t,"class","svelte-n3qlb5")},m(s,a){D(s,t,a),r||(i=I(t,"error",e[7]),r=!0)},p(s,a){a&6&&!Xr(t.src,n=s[1][s[2]].blobUrl)&&d(t,"src",n),a&4&&o!==(o=`Inspección ${s[2]+1}`)&&d(t,"alt",o)},d(s){s&&M(t),r=!1,i()}}}function bp(e){let t,n,o=e[3]?"URL de imagen roto":"Error al cargar imagen",r;return{c(){t=m("div"),n=m("span"),r=z(o),d(t,"class","image-error svelte-n3qlb5")},m(i,s){D(i,t,s),c(t,n),c(n,r)},p(i,s){s&8&&o!==(o=i[3]?"URL de imagen roto":"Error al cargar imagen")&&ve(r,o)},d(i){i&&M(t)}}}function vs(e){let t;function n(i,s){return i[3]||!i[1][i[2]].blobUrl?bp:vp}let o=n(e),r=o(e);return{c(){r.c(),t=lt()},m(i,s){r.m(i,s),D(i,t,s)},p(i,s){o===(o=n(i))&&r?r.p(i,s):(r.d(1),r=o(i),r&&(r.c(),r.m(t.parentNode,t)))},d(i){i&&M(t),r.d(i)}}}function wp(e){let t,n,o,r,i,s,a,l,u,f,h,g,p;const _=[_p,mp,gp],v=[];function b(S,C){return S[0]?0:S[1].length===0?1:2}return u=b(e),f=v[u]=_[u](e),{c(){t=m("div"),n=m("div"),o=m("div"),r=m("h3"),r.textContent="Imágenes de la Inspección",i=w(),s=m("button"),s.textContent="×",a=w(),l=m("div"),f.c(),d(r,"class","svelte-n3qlb5"),d(s,"class","close-btn svelte-n3qlb5"),d(o,"class","modal-header svelte-n3qlb5"),d(l,"class","modal-body svelte-n3qlb5"),d(n,"class","modal-content svelte-n3qlb5"),d(t,"class","modal-overlay svelte-n3qlb5")},m(S,C){D(S,t,C),c(t,n),c(n,o),c(o,r),c(o,i),c(o,s),c(n,a),c(n,l),v[u].m(l,null),h=!0,g||(p=[I(s,"click",e[4]),I(n,"click",pt(e[9])),I(t,"click",e[4])],g=!0)},p(S,[C]){let y=u;u=b(S),u===y?v[u].p(S,C):(Ne(),J(v[y],1,1,()=>{v[y]=null}),Pe(),f=v[u],f?f.p(S,C):(f=v[u]=_[u](S),f.c()),B(f,1),f.m(l,null))},i(S){h||(B(f),h=!0)},o(S){J(f),h=!1},d(S){S&&M(t),v[u].d(),g=!1,Ie(p)}}}function Cp(e,t,n){let{imageUrls:o=[]}=t,{isLoading:r=!1}=t;const i=sn();let s=0,a=!1,l=[];async function u(){console.log("Starting fetchBlobs"),n(0,r=!0);try{n(1,l=await Promise.all(o.map(async v=>{console.log("Fetching image URL:",v.url);try{const b=await fetch(v.url);if(console.log("Response status for",v.url,":",b.status),!b.ok)throw new Error(`HTTP ${b.status}`);const S=await b.blob(),C=URL.createObjectURL(S);return console.log("Blob created for",v.url),{...v,blobUrl:C}}catch(b){return console.error("Error fetching image:",b),{...v,blobUrl:null}}}))),console.log("All fetches completed, blobImages:",l)}catch(v){console.error("Error in fetchBlobs:",v),n(1,l=[])}console.log("Setting isLoading to false"),n(0,r=!1)}function f(){l.forEach(v=>{v.blobUrl&&URL.revokeObjectURL(v.blobUrl)}),n(1,l=[]),i("close")}function h(){n(2,s=(s+1)%l.length)}function g(){n(2,s=(s-1+l.length)%l.length)}function p(){n(3,a=!0)}function _(v){wt.call(this,e,v)}return e.$$set=v=>{"imageUrls"in v&&n(8,o=v.imageUrls),"isLoading"in v&&n(0,r=v.isLoading)},e.$$.update=()=>{e.$$.dirty&2&&l.length>0&&(n(2,s=0),n(3,a=!1)),e.$$.dirty&258&&o.length>0&&l.length===0&&(console.log("fetchBlobs called with imageUrls:",o),u())},[r,l,s,a,f,h,g,p,o,_]}class Sp extends xe{constructor(t){super(),Xe(this,t,Cp,wp,We,{imageUrls:8,isLoading:0})}}function bs(e){let t,n,o;return{c(){t=m("div"),t.innerHTML='<div class="message-box svelte-pfubcj"><h2 class="svelte-pfubcj">Activar Sonido</h2> <p>Haga clic en cualquier lugar para habilitar las notificaciones de sonido.</p></div>',d(t,"class","sound-activation-overlay svelte-pfubcj")},m(r,i){D(r,t,i),n||(o=I(t,"click",e[14]),n=!0)},p:ce,d(r){r&&M(t),n=!1,o()}}}function ws(e){let t,n,o;return n=new Ft({}),{c(){t=m("div"),Te(n.$$.fragment),d(t,"class","overlay svelte-pfubcj")},m(r,i){D(r,t,i),Ee(n,t,null),o=!0},i(r){o||(B(n.$$.fragment,r),o=!0)},o(r){J(n.$$.fragment,r),o=!1},d(r){r&&M(t),ke(n)}}}function Cs(e){let t,n,o,r,i,s;return o=new Ft({}),{c(){t=m("div"),n=m("div"),Te(o.$$.fragment),r=w(),i=m("p"),i.textContent="Renovando sesión...",d(n,"class","refresh-indicator svelte-pfubcj"),d(t,"class","overlay svelte-pfubcj")},m(a,l){D(a,t,l),c(t,n),Ee(o,n,null),c(n,r),c(n,i),s=!0},i(a){s||(B(o.$$.fragment,a),s=!0)},o(a){J(o.$$.fragment,a),s=!1},d(a){a&&M(t),ke(o)}}}function yp(e){var Ce;let t,n,o,r,i,s,a,l,u,f,h,g,p,_,v,b,S,C,y,R,T,L,O,H,$,X,te,Z,Y,le,ue=((Ce=e[7].currentUser)==null?void 0:Ce.name)+"",pe,U,N,ne,re,x,K,W,A,G,ae,Se;n=new Na({props:{activeView:e[10].currentView}}),n.$on("navigate",e[17]);function Ae(ee,P){if(ee[10].currentView==="dashboard")return Ip;if(ee[10].currentView==="users")return Op;if(ee[10].currentView==="machines")return Ap;if(ee[10].currentView==="work-orders")return Tp;if(ee[10].currentView==="consolidado")return Rp;if(ee[10].currentView==="oilManagement")return kp}let ye=Ae(e),be=ye&&ye(e),he=e[6]&&Ss(),fe=e[8]>0&&ys(e),ie=e[4]&&Es(e);function Re(ee,P){var se;return(se=ee[0])!=null&&se.isConnected?Dp:Mp}let we=Re(e),E=we(e);const k=[Up,Fp,Lp,$p,Pp,Np],F=[];function V(ee,P){return ee[10].currentView==="dashboard"?0:ee[10].currentView==="users"?1:ee[10].currentView==="machines"?2:ee[10].currentView==="work-orders"?3:ee[10].currentView==="consolidado"?4:ee[10].currentView==="oilManagement"?5:-1}~(x=V(e))&&(K=F[x]=k[x](e));let j=e[10].showWorkOrderModal&&ks(e),q=e[1]&&Rs(e);return{c(){t=m("div"),Te(n.$$.fragment),o=w(),r=m("main"),i=m("header"),s=m("div"),s.innerHTML='<div class="logo svelte-pfubcj"><img src="https://usochicamocha.com.co/wp-content/uploads/2024/02/Usochicamocha-v2.png" alt="Logo de Usochicamocha" class="logo-image svelte-pfubcj"/></div>',a=w(),l=m("div"),u=m("h2"),be&&be.c(),f=w(),h=m("div"),g=m("div"),p=m("button"),_=dt("svg"),v=dt("path"),C=w(),he&&he.c(),y=w(),R=m("div"),T=m("button"),L=dt("svg"),O=dt("path"),H=w(),fe&&fe.c(),$=w(),ie&&ie.c(),X=w(),te=m("div"),E.c(),Z=w(),Y=m("span"),le=z("Usuario: "),pe=z(ue),U=w(),N=m("button"),N.textContent="Cerrar Sesión",ne=w(),re=m("div"),K&&K.c(),W=w(),j&&j.c(),A=w(),q&&q.c(),d(s,"class","header-left svelte-pfubcj"),d(u,"class","svelte-pfubcj"),d(l,"class","header-center svelte-pfubcj"),d(v,"d","M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,16.5L18,9.5L16.59,8.09L11,13.67L7.91,10.59L6.5,12L11,16.5Z"),d(v,"fill",b=e[5]?"#4CAF50":"#9E9E9E"),d(_,"xmlns","http://www.w3.org/2000/svg"),d(_,"viewBox","0 0 24 24"),d(_,"class","svelte-pfubcj"),Fe(_,"spinning",e[6]),d(p,"class","auto-refresh-toggle svelte-pfubcj"),d(p,"title",S=e[5]?"Deshabilitar auto-refresh":"Habilitar auto-refresh"),d(g,"class","auto-refresh-indicator svelte-pfubcj"),d(O,"d","M12,22A2,2 0 0,0 14,20H10A2,2 0 0,0 12,22M18,16V11C18,7.93 16.36,5.36 13.5,4.68V4A1.5,1.5 0 0,0 12,2.5A1.5,1.5 0 0,0 10.5,4V4.68C7.63,5.36 6,7.93 6,11V16L4,18V19H20V18L18,16Z"),d(L,"xmlns","http://www.w3.org/2000/svg"),d(L,"viewBox","0 0 24 24"),d(L,"class","svelte-pfubcj"),d(T,"class","notification-bell svelte-pfubcj"),d(T,"title","Notificaciones"),d(R,"class","notification-wrapper svelte-pfubcj"),d(te,"class","connection-status-indicator svelte-pfubcj"),d(te,"title","Estado de conexión WebSocket"),d(Y,"class","user-info svelte-pfubcj"),d(N,"class","logout-btn svelte-pfubcj"),d(h,"class","header-right svelte-pfubcj"),d(i,"class","header svelte-pfubcj"),d(re,"class","content svelte-pfubcj"),d(r,"class","main-content svelte-pfubcj"),d(t,"class","app-container svelte-pfubcj")},m(ee,P){D(ee,t,P),Ee(n,t,null),c(t,o),c(t,r),c(r,i),c(i,s),c(i,a),c(i,l),c(l,u),be&&be.m(u,null),c(i,f),c(i,h),c(h,g),c(g,p),c(p,_),c(_,v),c(g,C),he&&he.m(g,null),c(h,y),c(h,R),c(R,T),c(T,L),c(L,O),c(T,H),fe&&fe.m(T,null),c(R,$),ie&&ie.m(R,null),c(h,X),c(h,te),E.m(te,null),c(h,Z),c(h,Y),c(Y,le),c(Y,pe),c(h,U),c(h,N),c(r,ne),c(r,re),~x&&F[x].m(re,null),c(t,W),j&&j.m(t,null),c(t,A),q&&q.m(t,null),G=!0,ae||(Se=[I(p,"click",e[13]),I(T,"click",e[15]),I(R,"click",pt(e[22])),I(N,"click",on.logout)],ae=!0)},p(ee,P){var de;const se={};P[0]&1024&&(se.activeView=ee[10].currentView),n.$set(se),ye!==(ye=Ae(ee))&&(be&&be.d(1),be=ye&&ye(ee),be&&(be.c(),be.m(u,null))),(!G||P[0]&32&&b!==(b=ee[5]?"#4CAF50":"#9E9E9E"))&&d(v,"fill",b),(!G||P[0]&64)&&Fe(_,"spinning",ee[6]),(!G||P[0]&32&&S!==(S=ee[5]?"Deshabilitar auto-refresh":"Habilitar auto-refresh"))&&d(p,"title",S),ee[6]?he||(he=Ss(),he.c(),he.m(g,null)):he&&(he.d(1),he=null),ee[8]>0?fe?fe.p(ee,P):(fe=ys(ee),fe.c(),fe.m(T,null)):fe&&(fe.d(1),fe=null),ee[4]?ie?(ie.p(ee,P),P[0]&16&&B(ie,1)):(ie=Es(ee),ie.c(),B(ie,1),ie.m(R,null)):ie&&(Ne(),J(ie,1,1,()=>{ie=null}),Pe()),we!==(we=Re(ee))&&(E.d(1),E=we(ee),E&&(E.c(),E.m(te,null))),(!G||P[0]&128)&&ue!==(ue=((de=ee[7].currentUser)==null?void 0:de.name)+"")&&ve(pe,ue);let oe=x;x=V(ee),x===oe?~x&&F[x].p(ee,P):(K&&(Ne(),J(F[oe],1,1,()=>{F[oe]=null}),Pe()),~x?(K=F[x],K?K.p(ee,P):(K=F[x]=k[x](ee),K.c()),B(K,1),K.m(re,null)):K=null),ee[10].showWorkOrderModal?j?(j.p(ee,P),P[0]&1024&&B(j,1)):(j=ks(ee),j.c(),B(j,1),j.m(t,A)):j&&(Ne(),J(j,1,1,()=>{j=null}),Pe()),ee[1]?q?(q.p(ee,P),P[0]&2&&B(q,1)):(q=Rs(ee),q.c(),B(q,1),q.m(t,null)):q&&(Ne(),J(q,1,1,()=>{q=null}),Pe())},i(ee){G||(B(n.$$.fragment,ee),B(ie),B(K),B(j),B(q),G=!0)},o(ee){J(n.$$.fragment,ee),J(ie),J(K),J(j),J(q),G=!1},d(ee){ee&&M(t),ke(n),be&&be.d(),he&&he.d(),fe&&fe.d(),ie&&ie.d(),E.d(),~x&&F[x].d(),j&&j.d(),q&&q.d(),ae=!1,Ie(Se)}}}function Ep(e){let t,n;return t=new Wa({}),{c(){Te(t.$$.fragment)},m(o,r){Ee(t,o,r),n=!0},p:ce,i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){J(t.$$.fragment,o),n=!1},d(o){ke(t,o)}}}function kp(e){let t;return{c(){t=z("Gestión de Aceites")},m(n,o){D(n,t,o)},d(n){n&&M(t)}}}function Rp(e){let t;return{c(){t=z("Consolidado de Maquinaria")},m(n,o){D(n,t,o)},d(n){n&&M(t)}}}function Tp(e){let t;return{c(){t=z("Gestión de Órdenes de Trabajo")},m(n,o){D(n,t,o)},d(n){n&&M(t)}}}function Ap(e){let t;return{c(){t=z("Gestión de Máquinas")},m(n,o){D(n,t,o)},d(n){n&&M(t)}}}function Op(e){let t;return{c(){t=z("Gestión de Usuarios")},m(n,o){D(n,t,o)},d(n){n&&M(t)}}}function Ip(e){let t;return{c(){t=z("Panel de Control - Estado de Equipos")},m(n,o){D(n,t,o)},d(n){n&&M(t)}}}function Ss(e){let t;return{c(){t=m("span"),t.textContent="Refrescando...",d(t,"class","auto-refresh-text svelte-pfubcj")},m(n,o){D(n,t,o)},d(n){n&&M(t)}}}function ys(e){let t,n;return{c(){t=m("span"),n=z(e[8]),d(t,"class","notification-badge svelte-pfubcj")},m(o,r){D(o,t,r),c(t,n)},p(o,r){r[0]&256&&ve(n,o[8])},d(o){o&&M(t)}}}function Es(e){let t,n;return t=new sd({props:{messages:e[11]}}),t.$on("delete",e[16]),{c(){Te(t.$$.fragment)},m(o,r){Ee(t,o,r),n=!0},p(o,r){const i={};r[0]&2048&&(i.messages=o[11]),t.$set(i)},i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){J(t.$$.fragment,o),n=!1},d(o){ke(t,o)}}}function Mp(e){let t;return{c(){t=m("div"),d(t,"class","connection-status disconnected svelte-pfubcj"),d(t,"title","Desconectado")},m(n,o){D(n,t,o)},d(n){n&&M(t)}}}function Dp(e){let t;return{c(){t=m("div"),d(t,"class","connection-status connected svelte-pfubcj"),d(t,"title","Conectado - WebSocket")},m(n,o){D(n,t,o)},d(n){n&&M(t)}}}function Np(e){let t,n;return t=new vd({}),{c(){Te(t.$$.fragment)},m(o,r){Ee(t,o,r),n=!0},p:ce,i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){J(t.$$.fragment,o),n=!1},d(o){ke(t,o)}}}function Pp(e){let t,n;return t=new td({}),{c(){Te(t.$$.fragment)},m(o,r){Ee(t,o,r),n=!0},p:ce,i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){J(t.$$.fragment,o),n=!1},d(o){ke(t,o)}}}function $p(e){let t,n;return t=new Xu({}),{c(){Te(t.$$.fragment)},m(o,r){Ee(t,o,r),n=!0},p:ce,i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){J(t.$$.fragment,o),n=!1},d(o){ke(t,o)}}}function Lp(e){let t,n;return t=new ju({}),{c(){Te(t.$$.fragment)},m(o,r){Ee(t,o,r),n=!0},p:ce,i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){J(t.$$.fragment,o),n=!1},d(o){ke(t,o)}}}function Fp(e){let t,n;return t=new Iu({}),{c(){Te(t.$$.fragment)},m(o,r){Ee(t,o,r),n=!0},p:ce,i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){J(t.$$.fragment,o),n=!1},d(o){ke(t,o)}}}function Up(e){let t,n;return t=new dd({}),t.$on("gridaction",e[19]),t.$on("cellContextMenu",e[18]),{c(){Te(t.$$.fragment)},m(o,r){Ee(t,o,r),n=!0},p:ce,i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){J(t.$$.fragment,o),n=!1},d(o){ke(t,o)}}}function ks(e){var o;let t,n;return t=new Fa({props:{rowData:e[10].selectedRowData,columnDef:e[10].selectedColumnDef,currentUser:(o=e[7].currentUser)==null?void 0:o.name}}),t.$on("createWorkOrder",e[20]),t.$on("cancel",e[21]),{c(){Te(t.$$.fragment)},m(r,i){Ee(t,r,i),n=!0},p(r,i){var a;const s={};i[0]&1024&&(s.rowData=r[10].selectedRowData),i[0]&1024&&(s.columnDef=r[10].selectedColumnDef),i[0]&128&&(s.currentUser=(a=r[7].currentUser)==null?void 0:a.name),t.$set(s)},i(r){n||(B(t.$$.fragment,r),n=!0)},o(r){J(t.$$.fragment,r),n=!1},d(r){ke(t,r)}}}function Rs(e){let t,n;return t=new Sp({props:{imageUrls:e[2],isLoading:e[3]}}),t.$on("close",e[12]),{c(){Te(t.$$.fragment)},m(o,r){Ee(t,o,r),n=!0},p(o,r){const i={};r[0]&4&&(i.imageUrls=o[2]),r[0]&8&&(i.isLoading=o[3]),t.$set(i)},i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){J(t.$$.fragment,o),n=!1},d(o){ke(t,o)}}}function Hp(e){let t,n,o,r,i,s,a,l,u,f,h;document.title=t=(e[8]>0?`(${e[8]})`:"")+" Dashboard Maquinaria";let g=e[9]&&e[7].isAuthenticated&&bs(e),p=e[10].isSaving&&ws(),_=e[7].isRefreshing&&Cs();const v=[Ep,yp],b=[];function S(C,y){return C[7].isAuthenticated?1:0}return s=S(e),a=b[s]=v[s](e),{c(){n=w(),g&&g.c(),o=w(),p&&p.c(),r=w(),_&&_.c(),i=w(),a.c(),l=lt()},m(C,y){D(C,n,y),g&&g.m(C,y),D(C,o,y),p&&p.m(C,y),D(C,r,y),_&&_.m(C,y),D(C,i,y),b[s].m(C,y),D(C,l,y),u=!0,f||(h=I(window,"click",e[23]),f=!0)},p(C,y){(!u||y[0]&256)&&t!==(t=(C[8]>0?`(${C[8]})`:"")+" Dashboard Maquinaria")&&(document.title=t),C[9]&&C[7].isAuthenticated?g?g.p(C,y):(g=bs(C),g.c(),g.m(o.parentNode,o)):g&&(g.d(1),g=null),C[10].isSaving?p?y[0]&1024&&B(p,1):(p=ws(),p.c(),B(p,1),p.m(r.parentNode,r)):p&&(Ne(),J(p,1,1,()=>{p=null}),Pe()),C[7].isRefreshing?_?y[0]&128&&B(_,1):(_=Cs(),_.c(),B(_,1),_.m(i.parentNode,i)):_&&(Ne(),J(_,1,1,()=>{_=null}),Pe());let R=s;s=S(C),s===R?b[s].p(C,y):(Ne(),J(b[R],1,1,()=>{b[R]=null}),Pe(),a=b[s],a?a.p(C,y):(a=b[s]=v[s](C),a.c()),B(a,1),a.m(l.parentNode,l))},i(C){u||(B(p),B(_),B(a),u=!0)},o(C){J(p),J(_),J(a),u=!1},d(C){C&&(M(n),M(o),M(r),M(i),M(l)),g&&g.d(C),p&&p.d(C),_&&_.d(C),b[s].d(C),f=!1,h()}}}const Vp=6e4;function jp(e,t,n){let o,r,i,s,a,l;bt(e,Dt,N=>n(0,o=N)),bt(e,on,N=>n(7,r=N)),bt(e,Or,N=>n(8,i=N)),bt(e,ea,N=>n(9,s=N)),bt(e,kt,N=>n(10,a=N)),bt(e,mo,N=>n(11,l=N));let u=!1,f=[],h=!1,g=!1,p,_=!0,v=!1,b=0;async function S(N){n(1,u=!0),n(3,h=!0);try{n(2,f=await ge.fetchInspectionImages(N))}catch{n(2,f=[])}finally{n(3,h=!1)}}function C(){n(1,u=!1),n(2,f=[])}let y=0;function R(){p&&clearInterval(p),p=setInterval(async()=>{const N=Date.now(),ne=st(kt).currentView,re=st(ge);if(_&&r.isAuthenticated&&!re.isLoading&&N-y>=Vp){n(6,v=!0);try{switch(ne){case"dashboard":console.log("🔄 Auto-refrescando tabla de inspecciones..."),await ge.fetchDashboardData(re.dashboard.currentPage,re.dashboard.pageSize);break;case"machines":console.log("🔄 Auto-refrescando tabla de máquinas..."),await ge.fetchMachines();break;case"work-orders":console.log("🔄 Auto-refrescando tabla de órdenes de trabajo..."),await ge.fetchWorkOrders(re.workOrders.currentPage,re.workOrders.pageSize);break;case"consolidado":console.log("🔄 Auto-refrescando tabla de consolidado..."),await ge.fetchConsolidadoData();break;case"oilManagement":console.log("🔄 Auto-refrescando tabla de aceites..."),await ge.fetchOils();break;case"users":console.log("🔄 Auto-refrescando tabla de usuarios..."),await ge.fetchUsers();break}y=N,b++,console.log(`🔄 Auto-refresh #${b} completed at ${new Date().toLocaleTimeString()}`)}catch(x){console.warn("Error en auto-refresh:",x.message)}finally{n(6,v=!1)}}},6e4)}function T(){p&&(clearInterval(p),p=null,n(6,v=!1))}function L(){n(5,_=!_),_?R():T()}function O(){console.log("🔊 [AUDIO] Activando sonido WebSocket por click del usuario..."),oa(),fo(!1),console.log("Contexto de audio WebSocket activado por el usuario.")}async function H(N){try{switch(N){case"dashboard":await ge.fetchDashboardData();break;case"users":await ge.fetchUsers();break;case"machines":await ge.fetchMachines();break;case"work-orders":await ge.fetchWorkOrders();break;case"consolidado":await ge.fetchConsolidadoData();break;case"oilManagement":await ge.fetchOils();break}}catch{console.warn("Carga de datos interrumpida por fallo de autenticación (comportamiento esperado).")}}Os(async()=>{console.log("🚀 [APP] Iniciando aplicación...");const N=await on.checkAuth();if(console.log("🚀 [APP] Estado de autenticación:",N?"AUTENTICADO":"NO AUTENTICADO"),N){const ne=st(kt).currentView;console.log("🚀 [APP] Cargando vista actual:",ne),H(ne),setTimeout(()=>{ep(),R(),console.log("🚀 [APP] Notificaciones WebSocket y auto-refresh iniciados.")},1e3)}else console.log("🚀 [APP] Usuario no autenticado - mostrando login")}),on.subscribe(N=>{console.log("🚀 [APP] Cambio en estado de auth:",N.isAuthenticated?"AUTENTICADO":"NO AUTENTICADO"),N.isAuthenticated?console.log("🚀 [APP] Usuario autenticado - ya iniciado en onMount"):(console.log("🚀 [APP] Usuario desconectado - cerrando streams WebSocket"),_s(),T())}),Er(()=>{_s(),T()});function $(){n(4,g=!g)}function X(N){const ne=N.detail;Mu(ne)}function te(N){const ne=N.detail;kt.setCurrentView(ne),H(ne)}function Z(N){var x,K;const{row:ne,columnDef:re}=N.detail;((x=re.meta)!=null&&x.isStatus||(K=re.meta)!=null&&K.isDateStatus)&&kt.openWorkOrderModal(ne,re)}function Y(N){const{type:ne,data:re}=N.detail;ne==="view_images"&&re&&re.id&&S(re.id)}async function le(N){kt.setSaving(!0);try{await ge.createWorkOrder(N.detail),kt.closeWorkOrderModal()}catch(ne){console.error("Error creating work order:",ne),ht({id:Date.now(),text:`Error al crear orden: ${ne.message}`})}finally{kt.setSaving(!1)}}function ue(){kt.closeWorkOrderModal()}function pe(N){wt.call(this,e,N)}const U=()=>n(4,g=!1);return e.$$.update=()=>{e.$$.dirty[0]&1&&console.log("🔌 [APP] Estado WebSocket actualizado:",o)},[o,u,f,h,g,_,v,r,i,s,a,l,C,L,O,$,X,te,Z,Y,le,ue,pe,U]}class Bp extends xe{constructor(t){super(),Xe(this,t,jp,Hp,We,{},null,[-1,-1])}}new Bp({target:document.getElementById("app")});
